{"map":"{\"version\":3,\"sources\":[\"/Users/andrew/code/yb-architecture/animations/src/constants.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/SmallClock.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/MainDiagram.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/HorizontalTimer.js\",\"/Users/andrew/code/yb-architecture/animations/src/HelperFunctions.js\",\"/Users/andrew/code/yb-architecture/animations/src/ReadFailureAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/RaftReadOperationAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/LeaderLeasesAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/AnimationRunner.js\",\"/Users/andrew/code/yb-architecture/animations/src/RaftWriteAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/Timer.js\",\"/Users/andrew/code/yb-architecture/animations/src/App.js\",\"/Users/andrew/code/yb-architecture/animations/src/Test.js\",\"/Users/andrew/code/yb-architecture/animations/src/serviceWorker.js\",\"/Users/andrew/code/yb-architecture/animations/src/index.js\"],\"names\":[\"__webpack_require__\",\"d\",\"__webpack_exports__\",\"Constants\",\"DEFAULT_DELAY\",\"NODE_A\",\"NODE_B\",\"NODE_C\",\"CLIENT_NODE\",\"ANIMATION_STATE_INITIAL\",\"ANIMATION_STATE_FINISHED\",\"COMMITTED\",\"UNCOMMITTED\",\"SmallClock\",\"props\",\"Object\",\"classCallCheck\",\"this\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"react_default\",\"a\",\"createElement\",\"width\",\"height\",\"xmlns\",\"id\",\"transform\",\"stroke\",\"strokeWidth\",\"cx\",\"cy\",\"r\",\"fill\",\"x\",\"y\",\"rx\",\"ry\",\"Component\",\"HelperFunctions\",\"require\",\"clientNodePositions\",\"mainText\",\"clientNodeYPos\",\"clientMessage\",\"nodeAPositions\",\"base\",\"messageToB\",\"nodeABaseXPos\",\"messageToClient\",\"leaseTimer\",\"nodeABaseYPos\",\"nodeCPositions\",\"nodeCBaseXPos\",\"messageToA\",\"partitionText1\",\"nodeCBaseYPos\",\"partitionText2\",\"nodeBPositions\",\"nodeBBaseXPos\",\"messageToC\",\"MainDiagram\",\"clientX\",\"clientY\",\"nodeAX\",\"nodeAY\",\"nodeBX\",\"nodeBY\",\"nodeCX\",\"nodeCY\",\"svg_SmallClock\",\"style\",\"fontFamily\",\"fontSize\",\"padding\",\"className\",\"dy\",\"dx\",\"concat\",\"fillOpacity\",\"HorizontalTimer\",\"uid\",\"myLeaseTimerId\",\"label\",\"leaderLeaseTimerId\",\"clientNodeXPos\",\"href\",\"_Users_andrew_code_yb_architecture_animations_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__\",\"_Users_andrew_code_yb_architecture_animations_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__\",\"_Users_andrew_code_yb_architecture_animations_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__\",\"react__WEBPACK_IMPORTED_MODULE_5___default\",\"setSVGText\",\"showElement\",\"hideElement\",\"delayedNext\",\"setTextWithAnimation\",\"introduceClient\",\"hideClient\",\"messageFromClient\",\"sendLogMessage\",\"logMessageFromLeaderToFollowers\",\"logMessageAckFromFollowersToLeader\",\"getFinishPromises\",\"messageFromC\",\"messageFromA\",\"messageFromB\",\"getSetValueText\",\"partitionNodeC\",\"startMyLeaseTimer\",\"startLeaderLeaseTimer\",\"startLeaseTimer\",\"animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__\",\"_constants__WEBPACK_IMPORTED_MODULE_1__\",\"params\",\"target\",\"document\",\"getElementById\",\"targetId\",\"text\",\"textContent\",\"addCSSClass\",\"classList\",\"add\",\"removeCSSClass\",\"remove\",\"element\",\"animation\",\"delay\",\"setTimeout\",\"next\",\"textSect\",\"onComplete\",\"innerHTML\",\"ml4\",\"anime\",\"targets\",\"opacity\",\"opacityIn\",\"scale\",\"scaleIn\",\"duration\",\"durationIn\",\"complete\",\"clientTextValue\",\"clientNode\",\"translateY\",\"destination\",\"messageElement\",\"translateX\",\"console\",\"log\",\"easing\",\"begin\",\"onBegin\",\"changeComplete\",\"onChangeComplete\",\"direction\",\"alternate\",\"fromNode\",\"toNode\",\"returnAck\",\"isAck\",\"value\",\"commitValue\",\"destinationTimerAnimation\",\"srcTimerAnimation\",\"method\",\"textElementId\",\"sourceNodeTextElementId\",\"messageContrainer\",\"additionalTextElementID\",\"sourceNodeAdditionalTextElementId\",\"Error\",\"anim\",\"restart\",\"additionalText\",\"withAck\",\"nodeATimerAnimation\",\"nodeBTimerAnimation\",\"nodeCTimerAnimation\",\"animations\",\"animationPromises\",\"forEach\",\"currentAnimation\",\"push\",\"finished\",\"warning\",\"forNode\",\"percent\",\"arguments\",\"length\",\"undefined\",\"innerRect\",\"calculatedWidth\",\"constructTimerId\",\"prefix\",\"error\",\"ReadOperationAnimation\",\"_Component\",\"_this\",\"animationState\",\"state\",\"animationFinished\",\"previousEnabled\",\"inherits\",\"createClass\",\"key\",\"mainTextSect\",\"_this2\",\"Promise\",\"resolve\",\"reject\",\"onNextInternal\",\"_this3\",\"nodeATextContainer\",\"nodeBTextContainer\",\"nodeCTextContainer\",\"nodeATermText\",\"nodeBTermText\",\"nodeCTermText\",\"nodeATermHighlight\",\"nodeBTermHighlight\",\"nodeAExtraText\",\"nodeBExtraText\",\"nodeCExtraText\",\"nodeAExtraHighlight\",\"nodeAExtraText2\",\"nodeAMessageBubble\",\"nodeAMessageStatus\",\"clientMessageBubble\",\"clientQueryMessage\",\"clientMessageBackground\",\"nodeOuterCircles\",\"getElementsByClassName\",\"i\",\"changeMainText\",\"altBubbleText\",\"contentLine1\",\"index\",\"str\",\"update\",\"innerText\",\"substr\",\"content\",\"clientContent1\",\"clientContent2\",\"clientContent3\",\"statusText1\",\"statusText2\",\"statusText3\",\"then\",\"aToBAnim\",\"setState\",\"_this4\",\"onPreviousInternal\",\"_this5\",\"nodeBExtraHighlight\",\"partitionWrap\",\"nodeC\",\"RaftReadOperationAnimation\",\"nodeCExtraHighlight\",\"introduceClientAnimation\",\"statusElem\",\"contentLine2\",\"statusTextLine1\",\"statusTextLine2\",\"leaderTextLine1\",\"leaderTextLine2\",\"leaderText1\",\"leaderText2\",\"ltxt1\",\"ltxt2\",\"LeaderLeaseAnimation\",\"init\",\"timersAreActive\",\"pauseTimers\",\"resumeTimers\",\"nodeBExtraText2\",\"nodeCMessageBubble\",\"nodeCMessageStatus\",\"asyncAnimation\",\"textAlt\",\"leaseToA\",\"nodeCTextAnimation\",\"nodeALeaseAnimation\",\"leaseToB\",\"nodeBLeaseAnimation\",\"all\",\"nodeAContent\",\"messageContrainerElement\",\"clientMessageStatus\",\"nodeCTextAlt\",\"nodeAMessage\",\"textAnimation\",\"nodeA\",\"messageStatus\",\"confirmToClientAnimation\",\"confirmToBAnimation\",\"stopTimers\",\"pause\",\"play\",\"AnimationRunner\",\"onPlayClicked\",\"bind\",\"assertThisInitialized\",\"onPreviousClicked\",\"onRestartClicked\",\"animationPlaying\",\"onNext\",\"result\",\"JSON\",\"stringify\",\"runMode\",\"resume\",\"onPrevious\",\"previous\",\"window\",\"location\",\"reload\",\"Animation\",\"animationToRun\",\"disableNext\",\"disablePrevious\",\"isAnimationFinished\",\"ref\",\"n\",\"disabled\",\"onClick\",\"aria-hidden\",\"AnimationState\",\"INITIAL\",\"LEADER_ELECTION_NODE_TIMED_OUT\",\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\",\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\",\"LOG_REPLICATION_START\",\"LOG_REPLICATION_INTRODUCE_CLIENT\",\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\",\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\",\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\",\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\",\"RaftWriteAnimation\",\"nodeAOuterCircle\",\"nodeBOuterCircle\",\"nodeCOuterCircle\",\"onNodeCAnimationEnd\",\"display\",\"addEventListener\",\"animation1\",\"animation2\",\"voteTexts\",\"App\",\"BrowserRouter\",\"Route\",\"exact\",\"path\",\"component\",\"Home\",\"render\",\"src_AnimationRunner\",\"assign\",\"ReadFailureAnimation\",\"LeaderLeasesAnimation\",\"Link\",\"to\",\"Boolean\",\"hostname\",\"match\",\"ReactDOM\",\"src_App_0\",\"navigator\",\"serviceWorker\",\"ready\",\"registration\",\"unregister\"],\"mappings\":\"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\",\"sourcesContent\":[\"export var Constants = {\\n\\tDEFAULT_DELAY: 2000,\\n\\tNODE_A: \\\"NODE_A\\\",\\n\\tNODE_B: \\\"NODE_B\\\",\\n\\tNODE_C: \\\"NODE_C\\\",\\n\\tCLIENT_NODE: \\\"CLIENT_NODE\\\",\\n\\tANIMATION_STATE_INITIAL: 'ANIMATION_STATE_INITIAL',\\n\\tANIMATION_STATE_FINISHED: \\\"ANIMATION_STATE_FINISHED\\\",\\n\\tCOMMITTED: \\\"(committed)\\\",\\n\\tUNCOMMITTED: \\\"(uncommitted)\\\",\\n}\\n\",\"import React, { Component } from 'react';\\n\\nclass SmallClock extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t}\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<svg width=\\\"100\\\" height=\\\"100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t\\t\\t<g id=\\\"analog-clock\\\" transform=\\\"translate(10,10)\\\">\\n\\t\\t\\t\\t\\t\\t<circle id=\\\"face\\\" stroke=\\\"black\\\" strokeWidth=\\\"3px\\\" cx=\\\"10\\\" cy=\\\"20\\\" r=\\\"10\\\" fill=\\\"transparent\\\"/>\\n\\t\\t\\t\\t\\t\\t<g id=\\\"hands\\\">\\n\\t\\t\\t\\t\\t\\t\\t<rect id=\\\"hour\\\" x=\\\"9\\\" y=\\\"12\\\" width=\\\"2\\\" height=\\\"10\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"555\\\" />\\n\\t\\t\\t\\t\\t\\t\\t<rect id=\\\"min\\\" x=\\\"9\\\" y=\\\"20\\\" width=\\\"9\\\" height=\\\"2\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"555\\\" />\\n\\t\\t\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t\\t</g>\\n\\t\\t\\t</svg>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default SmallClock;\\n\",\"import React, { Component } from 'react';\\n\\nimport SmallClock from './SmallClock';\\nimport HorizontalTimer from './HorizontalTimer';\\nimport {Constants} from '../constants';\\n\\nvar HelperFunctions = require('../HelperFunctions');\\n\\n\\n// starting position of nodes\\nconst nodeABaseXPos = 42;\\nconst nodeABaseYPos = 324;\\n\\nconst nodeCBaseXPos = 320;\\nconst nodeCBaseYPos = 324;\\n\\nconst nodeBBaseXPos = 168;\\nconst nodeBBaseYPos = 42;\\n\\nconst clientNodeXPos = 186;\\nconst clientNodeYPos = 550;\\n\\nexport const clientNodePositions = {\\n\\tmainText: {\\n\\t\\tx: clientNodeXPos,\\n\\t\\ty: clientNodeYPos + 9\\n\\t},\\n\\tclientMessage: {\\n\\t\\tx: clientNodeXPos,\\n\\t\\ty: clientNodeYPos - 72\\n\\t},\\n}\\n\\nexport const nodeAPositions = {\\n\\tbase: {\\n\\t\\tx: nodeABaseXPos,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tmessageToB: {\\n\\t\\tx: nodeABaseXPos + 6,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tmessageToClient: {\\n\\t\\tx: nodeABaseXPos + 6,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tleaseTimer: {\\n\\t\\tx: nodeABaseXPos - 48,\\n\\t\\ty: nodeABaseYPos + 108\\n\\t}\\n}\\n\\nexport const nodeCPositions = {\\n\\tbase: {\\n\\t\\tx: nodeCBaseXPos,\\n\\t\\ty: nodeCBaseYPos\\n\\t},\\n\\tmessageToB: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tmessageToA: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tmessageToClient: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tpartitionText1: {\\n\\t\\tx: nodeCBaseXPos - 80,\\n\\t\\ty: nodeCBaseYPos - 70\\n\\t},\\n\\tpartitionText2: {\\n\\t\\tx: nodeCBaseXPos - 80,\\n\\t\\ty: nodeCBaseYPos - 55\\n\\t}\\n}\\n\\nexport const nodeBPositions = {\\n\\tbase: {\\n\\t\\tx: nodeBBaseXPos,\\n\\t\\ty: nodeBBaseYPos\\n  },\\n  messageToA: {\\n\\t\\tx: nodeBBaseXPos - 10,\\n\\t\\ty: nodeBBaseYPos\\n\\t},\\n\\tmessageToC: {\\n\\t\\tx: nodeBBaseXPos + 32,\\n\\t\\ty: nodeBBaseYPos\\n\\t},\\n}\\n\\nclass MainDiagram extends Component {\\n\\n\\trender() {\\n\\t\\t// Initialize variables for each node location\\n\\t\\t// These are numbers so we can't destructure..\\n\\t\\tconst clientX = clientNodePositions.clientMessage.x;\\n\\t\\tconst clientY = clientNodePositions.clientMessage.y;\\n\\t\\tconst nodeAX = nodeAPositions.base.x;\\n\\t\\tconst nodeAY = nodeAPositions.base.y;\\n\\t\\tconst nodeBX = nodeBPositions.base.x;\\n\\t\\tconst nodeBY = nodeBPositions.base.y;\\n\\t\\tconst nodeCX = nodeCPositions.base.x;\\n\\t\\tconst nodeCY = nodeCPositions.base.y;\\n\\n\\t\\treturn (\\n\\t\\t\\t<svg height=\\\"500\\\" width=\\\"720\\\">\\n\\t\\t\\t\\t{/* reusable analog clock */}\\n\\t\\t\\t\\t<defs>\\n\\t\\t\\t\\t\\t<SmallClock/>\\n\\t\\t\\t\\t</defs>\\n\\n\\t\\t\\t\\t{/* Center text area */}\\n\\t\\t\\t\\t<foreignObject x={30} y={160} width=\\\"400\\\" height=\\\"300\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"center-message-text\\\" style={{fontFamily: 'Verdana', fontSize: '1em', padding: '30px'}}></div>\\n\\t\\t\\t\\t</foreignObject>\\n\\t\\t\\t\\t<g>\\n\\t\\t\\t\\t\\t<text id=\\\"center-message-rect\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={clientX} y={170} fontFamily=\\\"Verdana\\\" fontSize=\\\"1em\\\">\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"center-message-text1\\\" x={50} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"center-message-text2\\\" x={50} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t{/* smaller circles */}\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-b\\\" className=\\\"node-small-circle\\\" cx={nodeCPositions.messageToB.x} cy={nodeCPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-a\\\" className=\\\"node-small-circle\\\" cx={nodeCPositions.messageToA.x} cy={nodeCPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-client\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeCPositions.messageToClient.x} cy={nodeCPositions.messageToClient.y} />\\n\\n\\t\\t\\t\\t{/* partition around C */}\\n\\t\\t\\t\\t<g id=\\\"node-c-partition-wrap\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<path d=\\\"M250,360a83,75,0,1,1,190,-15\\\" id=\\\"node-c-partition\\\" className=\\\"node-partition\\\"/>\\n\\t\\t\\t\\t\\t<text fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t\\t<tspan x={nodeCPositions.partitionText1.x} y={nodeCPositions.partitionText1.y}>Partitioned</tspan>\\n\\t\\t\\t\\t\\t\\t<tspan x={nodeCPositions.partitionText2.x} y={nodeCPositions.partitionText2.y}>from A & B</tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t<g>\\n\\t\\t\\t\\t\\t{/* Node A text with white background */}\\n\\t\\t\\t\\t\\t<rect id=\\\"client-message-status-bg\\\" className=\\\"visibility-hidden\\\" x={clientX - 92} y={clientY - 152} fill=\\\"white\\\" width=\\\"210\\\" height=\\\"76\\\"></rect>\\n\\t\\t\\t\\t\\t<text id=\\\"client-query-message\\\" x={clientX - 90} y={clientY - 148} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-anchor\\\" x={clientX - 80} dy=\\\"1.2em\\\">Query: </tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text1\\\" dx={5} className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text2\\\" x={clientX - 83} dy=\\\"1.2em\\\" className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text3\\\" x={clientX - 83} dy=\\\"1.2em\\\" className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<foreignObject x={clientX - 85} y={clientY - 148} width=\\\"200\\\" height=\\\"70\\\">\\n\\t\\t\\t\\t\\t\\t<div id=\\\"client-message-status\\\"></div>\\n\\t\\t\\t\\t\\t</foreignObject>\\n\\n\\t\\t\\t\\t\\t<path id=\\\"client-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\td={`M${clientX + 3},${clientY - 50} l0,-26 l-90,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l200,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-90,0 z`}\\n\\t\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t<g id=\\\"client-message\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"client-message-circle\\\" className=\\\"client-message\\\" cx={clientX} cy={clientY}/>\\n\\t\\t\\t\\t\\t<text id=\\\"client-message-text\\\" x={clientX - 18} y={clientY + 24}>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<circle id=\\\"node-b-small-circle\\\" className=\\\"node-small-circle\\\" cx={nodeBX + 24} cy={nodeBY + 12} />\\n\\n\\t\\t\\t\\t<circle id=\\\"node-a-message-to-b\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\\n        <circle id=\\\"node-a-message-to-c\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-a-message-to-client\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToClient.x} cy={nodeAPositions.messageToClient.y} />\\n\\n\\t\\t\\t\\t{/* node C */}\\n\\n\\t\\t\\t\\t{/* main and outer circles */}\\n\\t\\t\\t\\t<g id=\\\"node-c-wrap\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"node-c-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeCX + 32} cy={nodeCY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t\\t\\t<circle id=\\\"node-c-circle\\\" cx={nodeCX + 32} cy={nodeCY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t\\t\\t<text id=\\\"node-c-main-text\\\" x={nodeCX + 30} y={nodeCY + 6} className=\\\"node-text\\\" fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t\\tNode C\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 118}\\n\\t\\t\\t\\t\\tlabel={\\\"My Lease\\\"}/>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 118}\\n\\t\\t\\t\\t\\tlabel={\\\"Leader Lease\\\"}/>\\n\\t\\t\\t\\t</g>\\n\\n\\t\\t\\t<g>\\n\\t\\t\\t\\t<rect id=\\\"node-c-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\tx={nodeCX + 5} y={nodeCY + 62} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n\\t\\t\\t\\t<text id=\\\"node-c-term-text-rect\\\" x={nodeCX + 10} y={nodeCY + 40} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-term-text\\\" x={nodeCX + 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeCX + 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-extra-text2\\\" className=\\\"node-extra-text2\\\" dx=\\\"0.5em\\\" ></tspan>\\n\\t\\t\\t\\t</text>\\n\\t\\t\\t</g>\\n\\n        {/* Node C bubble text area */}\\n\\t\\t\\t\\t<foreignObject x={nodeCX - 15} y={nodeCY - 174} width=\\\"235\\\" height=\\\"80\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"node-c-message-text-alt\\\"></div>\\n\\t\\t\\t\\t</foreignObject>\\n\\t\\t\\t\\t<text id=\\\"node-c-message-status\\\" x={nodeCX - 10} y={nodeCY - 130} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-message-status-text1\\\" x={nodeCX - 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-message-status-text2\\\" x={nodeCX - 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t<path id=\\\"node-c-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\td={`M${nodeCX + 40},${nodeCX - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l215,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-140,0 z`}\\n\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n        \\t\\t<path id=\\\"node-c-message-bubble-alt\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\td={`M${nodeCX + 45},${nodeCX - 50} l15,-40 l-80,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l235,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-135,0 z`}\\n\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\n\\t\\t\\t\\t{/* node A */}\\n\\n\\t\\t\\t\\t{/* main and outer circles */}\\n\\t\\t\\t\\t<g id=\\\"node-a-wrap\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"node-a-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeAX} cy={nodeAY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t\\t\\t<circle id=\\\"node-a-circle\\\" cx={nodeAX} cy={nodeAY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t\\t\\t<text id=\\\"node-a-main-text\\\" x={nodeAX} y={nodeAY + 6} className=\\\"node-text\\\">\\n\\t\\t\\t\\t\\t\\tNode A\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y + 12} label={\\\"My Lease\\\"}/>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y + 12} label={\\\"Leader Lease\\\"}/>\\n\\t\\t\\t\\t</g>\\n\\n        {/* text */}\\n        <g>\\n          <rect id=\\\"node-a-term-highlight\\\" className=\\\"visibility-hidden\\\"\\n            x={nodeAX - 30} y={nodeAY + 41} width=\\\"63\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <rect id=\\\"node-a-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={nodeAX - 30} y={nodeAY + 62} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <text id=\\\"node-a-term-text-rect\\\" x={nodeAX} y={nodeAY + 40} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n            <tspan id=\\\"node-a-term-text\\\" x={nodeAX - 24} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-a-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeAX - 24} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-a-extra-text2\\\" className=\\\"node-extra-text2\\\" dx=\\\"0.5em\\\"></tspan>\\n          </text>\\n        </g>\\n\\n\\t\\t{/* node B */}\\n        <circle id=\\\"node-b-message-to-a\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeBPositions.messageToA.x} cy={nodeBPositions.messageToA.y} />\\n        <circle id=\\\"node-b-message-to-c\\\" className=\\\"node-small-circle visibility-visible log-message\\\" cx={nodeBPositions.messageToC.x} cy={nodeBPositions.messageToC.y} />\\n\\n\\t\\t{/* main and outer circles */}\\n\\t\\t<g id=\\\"node-b-wrap\\\">\\n\\t\\t\\t<circle id=\\\"node-b-circle\\\" cx={nodeBX + 24} cy={nodeBY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t<circle id=\\\"node-b-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeBX + 24} cy={nodeBY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t<text id=\\\"node-b-main-text\\\" x={nodeBX + 24} y={nodeBY + 6} className=\\\"node-text\\\">\\n\\t\\t\\t\\tNode B\\n\\t\\t\\t</text>\\n\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 115} label={\\\"My Lease\\\"}/>\\n\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 115} label=\\\"Leader Lease\\\"/>\\n\\t\\t</g>\\n\\n        {/* text */}\\n        <g>\\n          <rect id=\\\"node-b-term-highlight\\\" className=\\\"visibility-hidden\\\"\\n              x={nodeBX - 6} y={nodeBY + 45} width=\\\"63\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <rect id=\\\"node-b-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={nodeBX - 6} y={nodeBY + 65} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <text id=\\\"node-b-term-text-rect\\\" x={nodeBX} y={nodeBY + 43} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n            <tspan id=\\\"node-b-term-text\\\" x={nodeBX} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-b-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeBX} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-b-extra-text2\\\" className=\\\"node-extra-text2\\\" dx={\\\"0.5em\\\"}></tspan>\\n          </text>\\n        </g>\\n\\n\\t\\t{/* Node A text with white background */}\\n\\t\\t<rect id=\\\"node-a-message-status-bg\\\" className=\\\"visibility-hidden\\\" x={nodeAX - 40} y={nodeAY - 167} fill=\\\"white\\\" width=\\\"207\\\" height=\\\"100\\\"></rect>\\n        <foreignObject x={nodeAX - 32} y={nodeAY - 155} width=\\\"200\\\" height=\\\"80\\\">\\t\\n\\t\\t\\t<div id=\\\"node-a-message-status\\\"></div>\\n\\t\\t</foreignObject>\\n\\t\\t{/* speech bubble */}\\n\\t\\t<path id=\\\"node-a-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t// d={`M${nodeAX + 20},${nodeAY - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l170,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-90,0 z`}\\n\\t\\t\\td=\\\"M62,284 l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-90 c0,0 0,-5 5,-5 l196,0 c0,0 5,0 5,5 l0,90 c0,0 0,5 -5,5 l-126,0 z\\\"\\n\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\n\\t\\t{/* client node */}\\n\\t\\t<g id=\\\"client-node\\\" className=\\\"visibility-visible\\\">\\n\\t\\t\\t<circle className=\\\"client-node\\\" cx={clientNodeXPos} cy={clientNodeYPos} />\\n\\t\\t\\t<text id=\\\"client-node-main-text\\\" x={clientNodeXPos} y={clientNodeYPos + 9} className=\\\"client-node-text\\\">\\n\\t\\t\\t\\tClient\\n\\t\\t\\t</text>\\n\\t\\t\\t<text id=\\\"client-node-value\\\" x={clientNodeXPos + 40} y={clientNodeYPos + 9}></text>\\n\\t\\t\\t<text id=\\\"client-node-value-alt\\\" x={clientNodeXPos + 40} y={clientNodeYPos + 9} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t<tspan fill=\\\"red\\\" x={clientNodeXPos + 40} fontSize=\\\"1.5em\\\"></tspan>\\n\\t\\t\\t\\t<tspan dx=\\\"4px\\\">Value: V1</tspan>\\n\\t\\t\\t\\t<tspan fill=\\\"red\\\" x={clientNodeXPos + 40} dy=\\\"1.2em\\\">Expected value = V2</tspan>\\n\\t\\t\\t</text>\\n\\t\\t</g>\\n\\n\\t\\t{/* lease messages */}\\n\\t\\t<g id=\\\"node-c-lease-to-node-a\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeCX + 6} y={nodeCY - 36}/>\\n\\t\\t</g>\\n\\t\\t<g id=\\\"node-c-lease-to-node-b\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeCX + 24} y={nodeCY - 36}/>\\n\\t\\t</g>\\n\\n\\t\\t<g id=\\\"node-a-lease-to-node-b\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeAX} y={nodeAY - 36}/>\\n\\t\\t</g>\\n\\n\\t</svg>\\n\\n\\t\\t);\\n\\t}\\n}\\nexport default MainDiagram;\\n\",\"import React, { Component } from 'react';\\n\\nimport anime from 'animejs/lib/anime.es.js';\\n\\nclass HorizontalTimer extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t}\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<g transform=\\\"translate(10,10)\\\" className={this.props.className} id={this.props.uid}>\\n\\t\\t\\t\\t<text x={this.props.x + 36} y={this.props.y - 4} fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t{this.props.label}\\n\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t<rect id={this.props.uid + '-inner'} x={this.props.x + 32} y={this.props.y} width=\\\"80\\\" height=\\\"6\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"#555\\\" />\\n\\t\\t\\t\\t<rect id={this.props.uid + '-outer'} x={this.props.x + 32} y={this.props.y} width=\\\"80\\\" height=\\\"7\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"2px\\\" fill=\\\"transparent\\\" stroke=\\\"black\\\" />}\\n\\t\\t\\t</g>\\n\\t\\t)\\n\\t}\\n\\tstartTimer() {\\n\\t\\t// TODO\\n\\t}\\n}\\n\\nexport default HorizontalTimer;\\n\",\"import anime from 'animejs/lib/anime.es.js';\\n\\nimport {Constants} from './constants';\\nimport {clientNodePositions} from './svg/MainDiagram';\\n\\n\\n// Set text content of a SVG text element\\n// params:{\\n//\\ttargetId:\\n//\\ttext:\\n//\\taddCSSClass:\\n//\\tshowElement:\\n//}\\nexport function setSVGText(params) {\\n\\tvar target = document.getElementById(params.targetId);\\n\\tif (params.text) {\\n\\t\\ttarget.textContent = params.text;\\n\\t}\\n\\tif (params.addCSSClass) {\\n\\t\\ttarget.classList.add(params.addCSSClass);\\n\\t}\\n\\tif (params.removeCSSClass) {\\n\\t\\ttarget.classList.remove(params.removeCSSClass);\\n\\t}\\n\\tif (params.showElement) {\\n\\t\\tshowElement(target);\\n\\t}\\n}\\n\\nexport function showElement(element) {\\n\\telement.classList.remove('visibility-hidden');\\n\\telement.classList.add('visibility-visible');\\n}\\n\\nexport function hideElement(element){\\n\\telement.classList.remove('visibility-visible');\\n\\telement.classList.add('visibility-hidden');\\n}\\n\\nexport function delayedNext(animation, delay) {\\n\\tif (!delay) {\\n\\t\\tdelay = Constants.DEFAULT_DELAY;\\n\\t}\\n\\tsetTimeout(() => animation.next(), delay);\\n}\\n\\nexport function setTextWithAnimation(textSect, text, onComplete, delay) {\\n\\ttextSect.innerHTML=text;\\n\\n\\tvar ml4 = {};\\n\\tml4.opacityIn = [0,1];\\n\\tml4.scaleIn = [0.2, 1];\\n\\tml4.scaleOut = 3;\\n\\tml4.durationIn = 2000;\\n\\tml4.durationOut = 2000;\\n\\tml4.delay = (delay?delay:500);\\n\\n\\tanime({\\n\\t\\ttargets: textSect,\\n\\t\\topacity: ml4.opacityIn,\\n\\t\\tscale: ml4.scaleIn,\\n\\t\\tduration: ml4.durationIn,\\n\\t\\tcomplete: onComplete,\\n\\t\\tdelay: ml4.delay,\\n\\t});\\n}\\n///////////////////////////////////////////////////////////////\\n//Animation Helpers. TODO: Maybe they should go in AnimationHelper module?\\n//////////////////////////////////////////////////////////////\\n\\nexport function introduceClient(clientTextValue) {\\n\\tvar clientNode = document.getElementById(\\\"client-node\\\");\\n\\tshowElement(clientNode);\\n\\tif (clientTextValue) {\\n\\t\\tsetSVGText({targetId: \\\"client-node-value\\\", text: clientTextValue})\\n\\t}\\n\\tvar animation = anime({\\n\\t\\ttargets: clientNode,\\n\\t\\ttranslateY: -84\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function hideClient() {\\n\\tvar clientNode = document.getElementById(\\\"client-node\\\");\\n\\thideElement(clientNode);\\n\\thideElement(document.getElementById('client-message-circle'));\\n}\\n\\n\\nexport function messageFromClient(destination, params) {\\n\\tvar messageElement = document.getElementById('client-message');\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\n\\tswitch (destination) {\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\ttranslateX = 140;\\n\\t\\t\\ttranslateY = -140;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\ttranslateX = -160;\\n\\t\\t\\ttranslateY = -156;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tconsole.log('messageFromClient: Unrecognized destination: ' + destination);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t}\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: messageElement,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 800,\\n\\t\\tbegin: params.onBegin,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tdirection: params.alternate?'alternate':'normal',\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function sendLogMessage(fromNode, toNode, returnAck, isAck, value, commitValue, delay, destinationTimerAnimation, srcTimerAnimation) {\\n\\tconsole.log('FromNode: ' + fromNode + \\\" toNode: \\\" + toNode + \\\" returnAck: \\\" + returnAck + \\\" value: \\\" + value + \\\" commitValue: \\\" + commitValue);\\n\\tvar method = null;\\n\\tvar messageElement = null;\\n\\tvar textElementId = null;\\n\\tvar sourceNodeTextElementId = null;\\n\\tvar messageContrainer = null;\\n\\tvar additionalTextElementID = null;\\n\\tvar sourceNodeAdditionalTextElementId = null;\\n\\n\\tswitch(fromNode) {\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\tmethod = messageFromA;\\n\\t\\t\\tsourceNodeTextElementId = 'node-a-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-a-extra-text2';\\n\\n\\t\\t\\tif(toNode == Constants.NODE_B) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-b');\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.NODE_C) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-c');\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.CLIENT_NODE) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-client');\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_B: {\\n\\t\\t\\tmethod = messageFromB;\\n\\t\\t\\tsourceNodeTextElementId = 'node-b-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-b-extra-text2';\\n\\n\\t\\t\\tif(toNode == Constants.NODE_A) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-b-message-to-a');\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.NODE_C) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-b-message-to-c');\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\tmethod = messageFromC;\\n\\t\\t\\tsourceNodeTextElementId = 'node-c-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-c-extra-text2';\\n\\n\\t\\t\\tif (toNode == Constants.NODE_A) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-a');\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.NODE_B) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-b');\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.CLIENT_NODE) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-client');\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.CLIENT_NODE: {\\n\\t\\t\\tmethod = messageFromClient;\\n\\t\\t\\tmessageElement = document.getElementById('client-message-circle');\\n\\t\\t\\tmessageContrainer = document.getElementById('client-message');\\n\\n\\t\\t\\tif (toNode == Constants.NODE_A) {\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.NODE_B) {\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode == Constants.NODE_C) {\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tthrow new Error('Unrecognized fromNode: ' + fromNode);\\n\\t\\t}\\n\\t}\\n\\n\\tvar animation = method(toNode,{\\n\\t\\t\\tdelay: delay,\\n\\t\\t\\tdestinationTimerAnimation: destinationTimerAnimation,\\n\\t\\t\\tonBegin: anim => {\\n\\t\\t\\t\\tshowElement(messageElement);\\n\\t\\t\\t\\tif (isAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message-ack');\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message-ack');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonChangeComplete: anim => {\\n\\t\\t\\t\\tconsole.log('In onChangeComplete. messageElement: ' + messageElement);\\n\\t\\t\\t\\tif (destinationTimerAnimation) {\\n\\t\\t\\t\\t\\tconsole.log('Will restart timer animation');\\n\\t\\t\\t\\t\\tdestinationTimerAnimation.restart();\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (returnAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message-ack');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvar additionalText = null;\\n\\t\\t\\t\\tif (value && textElementId){\\n\\t\\t\\t\\t\\tvar addCSSClass = \\\"\\\";\\n\\t\\t\\t\\t\\tvar removeCSSClass = \\\"\\\";\\n\\n\\t\\t\\t\\t\\tif (commitValue) {\\n\\t\\t\\t\\t\\t\\taddCSSClass = \\\"set-text-committed\\\";\\n\\t\\t\\t\\t\\t\\tremoveCSSClass = \\\"set-text-uncommitted\\\";\\n\\t\\t\\t\\t\\t\\tadditionalText = Constants.COMMITTED;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\taddCSSClass = \\\"set-text-uncommitted\\\";\\n\\t\\t\\t\\t\\t\\tremoveCSSClass = \\\"set-text-committed\\\";\\n\\t\\t\\t\\t\\t\\tadditionalText = Constants.UNCOMMITTED;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t// setSVGText({\\n\\t\\t\\t\\t\\t// \\ttargetId: textElementId,\\n\\t\\t\\t\\t\\t// \\ttext: value,\\n\\t\\t\\t\\t\\t// \\taddCSSClass: addCSSClass,\\n\\t\\t\\t\\t\\t// \\tremoveCSSClass:removeCSSClass,\\n\\t\\t\\t\\t\\t// \\tshowElement: !commitValue,\\n\\t\\t\\t\\t\\t// });\\n\\n\\t\\t\\t\\t\\tconsole.log('additionalText: ' + additionalText + 'additionalTextElementID: ' + additionalTextElementID);\\n\\t\\t\\t\\t\\tif (additionalText != null && additionalTextElementID) {\\n\\t\\t\\t\\t\\t\\tsetSVGText({\\n\\t\\t\\t\\t\\t\\t\\ttargetId: additionalTextElementID,\\n\\t\\t\\t\\t\\t\\t\\ttext: additionalText,\\n\\t\\t\\t\\t\\t\\t\\taddCSSClass: addCSSClass,\\n\\t\\t\\t\\t\\t\\t\\tremoveCSSClass:removeCSSClass,\\n\\t\\t\\t\\t\\t\\t\\tshowElement: !commitValue,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t},\\n\\t\\t\\tonComplete: anim => {\\n\\t\\t\\t\\tif (returnAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message-ack');\\n\\t\\t\\t\\t\\t// we got the ack back so uncommitted text should be shown as committed now\\n\\t\\t\\t\\t\\tif (value && sourceNodeTextElementId) {\\n\\t\\t\\t\\t\\t\\tsetSVGText({targetId: sourceNodeTextElementId, addCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif (value && sourceNodeAdditionalTextElementId){\\n\\t\\t\\t\\t\\t\\tsetSVGText({targetId: sourceNodeAdditionalTextElementId, text: Constants.COMMITTED, addCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (srcTimerAnimation) {\\n\\t\\t\\t\\t\\tsrcTimerAnimation.restart();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tmessageElement.style.transform = 'none';\\n\\t\\t\\t\\tif (messageContrainer) {\\n\\t\\t\\t\\t\\tmessageContrainer.style.transform = 'none';\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\talternate: returnAck,\\n\\t\\t});\\n\\treturn animation;\\n}\\n\\nexport function logMessageFromLeaderToFollowers(withAck, value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\\n\\tvar nodeAAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_A, withAck, false, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\\n\\tvar nodeBAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_B, withAck, false, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\\n\\n\\treturn [nodeAAnimation,nodeBAnimation];\\n}\\nexport function logMessageAckFromFollowersToLeader(value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\\n\\tvar nodeAAnimation = sendLogMessage(Constants.NODE_A,Constants.NODE_C, false, true, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\\n\\tvar nodeBAnimation = sendLogMessage(Constants.NODE_B,Constants.NODE_C, false, true, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\\n\\n\\treturn [nodeAAnimation,nodeBAnimation];\\n}\\nexport function getFinishPromises(animations) {\\n\\tvar animationPromises = [];\\n\\tanimations.forEach(currentAnimation => {\\n\\t\\tanimationPromises.push(currentAnimation.finished);\\n\\t});\\n\\treturn animationPromises;\\n}\\n\\nexport function messageFromC(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination == Constants.NODE_B) {\\n\\t\\ttranslateX = -140;\\n\\t\\ttranslateY = -276;\\n\\t\\ttargets = '#node-c-message-to-b';\\n\\t} else if (destination == Constants.NODE_A) {\\n\\t\\ttargets = '#node-c-message-to-a';\\n\\t\\ttranslateX = -275;\\n\\t} else if (destination == Constants.CLIENT_NODE) {\\n\\t\\ttargets = '#node-c-message-to-client';\\n\\t\\ttranslateX = -130;\\n\\t\\ttranslateY = 135;\\n\\t}\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: params.alternate?'alternate':'normal',\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function messageFromA(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination == Constants.NODE_B) {\\n\\t\\ttranslateX = 160;\\n\\t\\ttranslateY = -290;\\n\\t\\ttargets = '#node-a-message-to-b';\\n\\t} else if (destination === Constants.NODE_C) {\\n\\t\\ttranslateX = 275;\\n\\t\\ttargets = '#node-a-message-to-c';\\n\\t}\\n\\telse if (destination == Constants.CLIENT_NODE) {\\n\\t\\ttranslateX = 150;\\n\\t\\ttranslateY = 148;\\n\\t\\ttargets = '#node-a-message-to-client';\\n\\t}\\n\\telse {\\n\\t\\tconsole.warning('Unsupported destination: ' + destination);\\n\\t\\treturn;\\n\\t}\\n\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: (params.alternate?'alternate':'normal'),\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function messageFromB(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination == Constants.NODE_A) {\\n\\t\\ttranslateX = -160;\\n\\t\\ttranslateY = 290;\\n\\t\\ttargets = '#node-b-message-to-a';\\n\\t} else if (destination === Constants.NODE_C) {\\n\\t\\ttranslateX = 140;\\n\\t\\ttranslateY = 276;\\n\\t\\ttargets = '#node-b-message-to-c';\\n\\t}\\n\\telse {\\n\\t\\tconsole.warning('Unsupported destination: ' + destination);\\n\\t\\treturn;\\n\\t}\\n\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: (params.alternate?'alternate':'normal'),\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function getSetValueText(value) {\\n\\treturn \\\"Value: \\\" + value;\\n}\\n\\nexport function partitionNodeC() {\\n\\tvar nodeCPartition = document.getElementById('node-c-partition-wrap');\\n\\tshowElement(nodeCPartition);\\n}\\n\\nexport function startMyLeaseTimer(forNode, duration, percent){\\n\\tvar targetId = myLeaseTimerId(forNode);\\n\\treturn startLeaseTimer(targetId, duration, percent);\\n}\\nexport function startLeaderLeaseTimer(forNode, duration, percent){\\n\\tvar targetId = leaderLeaseTimerId(forNode);\\n\\treturn startLeaseTimer(targetId, duration, percent);\\n}\\n\\n/**\\n * Function that returns animation for a lease timer. This animation will run for\\n * a specific `duration` until it reaches the specified `percent` limit.\\n * @param {string} targetId String of html element id for this animation to run on\\n * @param {number} duration Milliseconds until animation finishes\\n * @param {number} percent  Target percentage to be remaining after animation is over, default is 0.\\n */\\nexport function startLeaseTimer(targetId, duration, percent = 0){\\n\\tvar timer = document.getElementById(targetId);\\n\\tshowElement(timer);\\n\\tvar innerRect = document.getElementById(targetId + '-inner');\\n\\tconst calculatedWidth = `${percent / 100.0 * 80}`;\\n\\tvar animation = anime({\\n\\t\\ttargets: innerRect,\\n\\t\\twidth: calculatedWidth,\\n\\t\\teasing: 'easeOutCubic',\\n\\t\\tduration: duration,\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function myLeaseTimerId(forNode) {\\n\\treturn constructTimerId(\\\"mlease-rect-\\\", forNode);\\n}\\n\\nexport function leaderLeaseTimerId(forNode) {\\n\\treturn constructTimerId(\\\"llease-rect\\\", forNode);\\n}\\n\\nfunction constructTimerId(prefix, forNode) {\\n\\tvar id = prefix;\\n\\tswitch(forNode) {\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\tid += \\\"node-c\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_B: {\\n\\t\\t\\tid += \\\"node-b\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\tid += \\\"node-a\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tconsole.error(\\\"Unrecognized Node: \\\" + forNode);\\n\\t\\t}\\n\\t}\\n\\treturn id;\\n}\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_UNSAFE_READ = \\\"ANIMATION_STATE_UNSAFE_READ\\\";\\nconst ANIMATION_STATE_LEADER_RECEIVED_MESSAGE_FROM_CLIENT = \\\"ANIMATION_STATE_LEADER_RECEIVED_MESSAGE_FROM_CLIENT\\\";\\nconst ANIMATION_STATE_LEADER_RECEIVED_ACKS_FROM_FOLLOWERS = \\\"ANIMATION_STATE_LEADER_RECEIVED_ACKS_FROM_FOLLOWERS\\\";\\nconst ANIMATION_STATE_NETWORK_PARTITIONED = \\\"ANIMATION_STATE_NETWORK_PARTITIONED\\\";\\nconst ANIMATION_STATE_NODE_C_PARTITIONED = \\\"ANIMATION_STATE_NODE_C_PARTITIONED\\\";\\nconst ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER = \\\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\\\";\\nconst ANIMATION_STATE_CLIENT_SET_OPERATION = 'ANIMATION_STATE_CLIENT_SET_OPERATION';\\nconst ANIMATION_STATE_CLIENT_READ_FROM_NODE_C = 'ANIMATION_STATE_CLIENT_READ_FROM_NODE_C';\\nconst ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER = \\\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\\\";\\nconst ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE = 'ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE';\\n\\nconst SET_VALUE1=\\\"V1\\\";\\nconst SET_VALUE2=\\\"V2\\\";\\nfunction setValueText(value) {\\n\\treturn HelperFunctions.getSetValueText(value);\\n}\\n\\nexport class ReadOperationAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      animationFinished: false,\\n      previousEnabled: true,\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t}\\n\\n\\tpause() {\\n\\t}\\n\\tresume() {\\n\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    const nodeCExtraText2 = document.getElementById('node-c-extra-text2'); \\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++) {\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n\\t\\t\\t\\t\\t// make Node C the Leader\\n\\t\\t\\t\\t\\tvar nodeC = document.getElementById('node-c-circle');\\n\\t\\t\\t\\t\\tnodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_UNSAFE_READ: {\\n\\t\\t\\t\\tthis.changeMainText('Unsafe to read from raft leader without majority heartbeats. This sequence explains why.', () => {\\n\\t\\t\\t\\t\\tthis.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NODE_C_PARTITIONED: {\\n\\t\\t\\t\\tthis.changeMainText('');\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Now imagine raft leader C gets\\\\n partitioned from followers\\\\n[but not from client]'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            HelperFunctions.partitionNodeC()\\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\\n        document.getElementById('node-c-message-text-alt').innerText = '';\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'This results in A and B\\\\n electing a new raft\\\\nleader, say A.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 1300,\\n          update: function() {\\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_SET_OPERATION: {\\n        /**\\n         *  Update: (monospaced) UPDATE T SET value = V2 WHERE key = k \\n         *  (Get rid of committed but leave uncommitted and change node\\n         *  subtext to k: V1, and highlight the value. \\n         *  After Node A sends msg to client, show Client: Update successful!\\n         */\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.introduceClient();\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'UPDATE T SET'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'value = V2 WHERE'\\n        }\\n        const clientContent3 = {\\n          index: 0,\\n          str: ' key = k'\\n        }\\n        \\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        const statusText3 = document.getElementById('client-query-message-text3');\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 400,\\n              update: function () {\\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                anime({\\n                  targets: clientContent3,\\n                  index: clientContent3.str.length,\\n                  easing: 'linear',\\n                  duration: 400,\\n                  update: function () {\\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                  },\\n                  complete: () => {   \\n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n                    animation.finished.then(() => {\\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\\n                      nodeAToBAnimation.finished.then(() => {\\n                        document.getElementById('client-query-message-text1').innerHTML = '';\\n                        document.getElementById('client-query-message-text2').innerHTML = '';\\n                        document.getElementById('client-query-message-text3').innerHTML = '';\\n                        HelperFunctions.hideElement(clientMessageBubble);\\n                        HelperFunctions.showElement(nodeAMessageBubble);\\n                        \\n                        // send commit confirmation back to B\\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\\n                        nodeAExtraText.innerHTML = '(k, V2)';\\n                        HelperFunctions.showElement(nodeAExtraHighlight);\\n                        HelperFunctions.hideElement(nodeAExtraText2);\\n\\n                        aToBAnim.finished.then(() => {\\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\\n                        });\\n\\n                        nodeAMessageStatus.innerHTML = '';\\n                        HelperFunctions.hideElement(nodeAMessageBubble);\\n\\n                        // notify client as well\\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\\n\\n                        messageToClientAnimation.finished.then(() => {\\n                          HelperFunctions.showElement(clientMessageBubble);\\n                          HelperFunctions.hideElement(clientQueryMessage);\\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\\n                          resolve({\\n                            animationState: this.animationState,\\n                            delay: 100,\\n                          });\\n                        });\\n                      });\\n                    })\\n                  }\\n                });\\n              }\\n            });\\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-a-text-highlight'));\\n        HelperFunctions.hideElement(document.getElementById('node-b-text-highlight'));\\n        document.getElementById('client-query-message-text1').innerHTML = ''\\n        document.getElementById('client-query-message-text2').innerHTML = ''\\n        document.getElementById('client-query-message-text3').innerHTML = ''\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        \\n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\\n        this.changeMainText('');\\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n\\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'SELECT value'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'FROM T WHERE key = k'\\n        }\\n\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                });\\n              }\\n            }); \\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'C thinks it is the raft leader.\\\\nWithout majority heartbeats,\\\\nC will respond with value = V1'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE, false);\\n            animation.finished.then(() => {\\n              HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\\n            });\\n            this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n            this.setState({ animationFinished: true });\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t}\\n\\t}\\n\\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n  \\n  onPreviousInternal(resolve, reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    const nodeCExtraText2 = document.getElementById('node-c-extra-text2'); \\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n    // MISC\\n    const partitionWrap = document.getElementById('node-c-partition-wrap');\\n\\n    switch(this.animationState) {\\n      case ANIMATION_STATE_UNSAFE_READ: {\\n        var nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        HelperFunctions.hideElement(nodeATextContainer);\\n        HelperFunctions.hideElement(nodeBTextContainer);\\n        HelperFunctions.hideElement(nodeCTextContainer);\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n        this.changeMainText('');\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_C_PARTITIONED: {\\n        var nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n        this.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          nodeC.classList.add('leader-node');\\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\\n        HelperFunctions.hideElement(partitionWrap);\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerText = '';\\n        this.changeMainText('Unsafe to read from raft leader without majority heartbeats. This sequence explains why.', () => {\\n          this.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SET_OPERATION: {\\n        var nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-node');\\n        HelperFunctions.hideElement(partitionWrap);\\n        nodeATermText.innerHTML = 'Term: 1';\\n        nodeBTermText.innerHTML = 'Term: 1';\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        nodeAMessageStatus.innerText = '';\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Now imagine raft leader C gets\\\\n partitioned from followers\\\\n[but not from client]'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            HelperFunctions.showElement(partitionWrap);\\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('client-node'));\\n        HelperFunctions.hideElement(document.getElementById('client-message-circle'));\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        nodeAExtraText.innerText = '(k, V1)';\\n        nodeBExtraText.innerText = '(k, V1)';\\n        HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 1\\\"});\\n        HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 1\\\"});\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'This results in A and B\\\\n electing a new raft\\\\nleader, say A.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 1300,\\n          update: function() {\\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\\n        this.changeMainText('');\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.introduceClient();\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'UPDATE T SET'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'value = V2 WHERE'\\n        }\\n        const clientContent3 = {\\n          index: 0,\\n          str: ' key = k'\\n        }\\n        \\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        const statusText3 = document.getElementById('client-query-message-text3');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        statusText3.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 400,\\n              update: function () {\\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                anime({\\n                  targets: clientContent3,\\n                  index: clientContent3.str.length,\\n                  easing: 'linear',\\n                  duration: 400,\\n                  update: function () {\\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                  },\\n                  complete: () => {   \\n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n                    animation.finished.then(() => {\\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\\n                      nodeAToBAnimation.finished.then(() => {\\n                        document.getElementById('client-query-message-text1').innerHTML = '';\\n                        document.getElementById('client-query-message-text2').innerHTML = '';\\n                        document.getElementById('client-query-message-text3').innerHTML = '';\\n                        HelperFunctions.hideElement(clientMessageBubble);\\n                        HelperFunctions.showElement(nodeAMessageBubble);\\n                        \\n                        // send commit confirmation back to B\\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\\n                        nodeAExtraText.innerHTML = '(k, V2)';\\n                        HelperFunctions.showElement(nodeAExtraHighlight);\\n                        HelperFunctions.hideElement(nodeAExtraText2);\\n\\n                        aToBAnim.finished.then(() => {\\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\\n                        });\\n\\n                        nodeAMessageStatus.innerHTML = '';\\n                        HelperFunctions.hideElement(nodeAMessageBubble);\\n\\n                        // notify client as well\\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\\n\\n                        messageToClientAnimation.finished.then(() => {\\n                          HelperFunctions.showElement(clientMessageBubble);\\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\\n                          resolve({\\n                            animationState: this.animationState,\\n                            delay: 100,\\n                          });\\n                        });\\n                      });\\n                    })\\n                  }\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\n\\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n        });\\n        break;\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.setState({ animationFinished: false });\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n\\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'SELECT value'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'FROM T WHERE key = k'\\n        }\\n\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                });\\n              }\\n            }); \\n          }\\n        });\\n        break;\\n      }\\n      default:\\n        console.error('Unrecognized state: ' + this.animationState);\\n    }\\n  }\\n\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n  }\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default ReadOperationAnimation;\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\nimport { SSL_OP_EPHEMERAL_RSA } from 'constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_EXPLAIN_PROTOCOL = 'ANIMATION_STATE_EXPLAIN_PROTOCOL';\\nconst ANIMATION_STATE_LEADER_ELECTION = 'ANIMATION_STATE_LEADER_ELECTION';\\nconst ANIMATION_STATE_NODE_DATA = 'ANIMATION_STATE_NODE_DATA';\\nconst ANIMATION_STATE_CLIENT_INTRODUCED = 'ANIMATION_STATE_CLIENT_INTRODUCED';\\nconst ANIMATION_STATE_PERFORMED_READ_ON_LEADER = \\\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\\\";\\nconst ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS = \\\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\\\";\\nconst ANIMATION_STATE_CLIENT_FINISH_OPERATION = 'ANIMATION_STATE_CLIENT_FINISH_OPERATION';\\n\\nconst SET_VALUE1=\\\"V1\\\";\\nconst SET_VALUE2=\\\"V2\\\";\\n\\nexport class RaftReadOperationAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      animationFinished: false,\\n      previousEnabled: true,\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t}\\n\\n\\tpause(){ }\\n\\tresume() {\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\t\\t\\t\\t// make Node C the Leader\\n\\t\\t\\t\\t// var nodeC = document.getElementById('node-c-circle');\\n\\t\\t\\t\\t// nodeC.classList.add('leader-node');\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tlet nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (let i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n        }\\n\\n        this.changeMainText('Lets say we have a 3-node raft group.');\\n        this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL;\\n\\n        resolve({\\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_EXPLAIN_PROTOCOL: {\\n\\t\\t\\t\\tthis.changeMainText('Nodes would have performed leader election..', () => {\\n          // Show each text container and then edit the text within them\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n\\n          nodeAExtraText.innerHTML = 'Voted For C';\\n          nodeBExtraText.innerHTML = 'Voted For C';\\n          nodeCExtraText.innerHTML = 'Voted For C';\\n        })\\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION;\\n        resolve({\\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_ELECTION: {\\n\\t\\t\\t\\tthis.changeMainText('Node C is the current raft leader,<br /> denoted by black border.', () => {\\n          nodeAExtraText.innerHTML = '';\\n          nodeBExtraText.innerHTML = '';\\n          nodeCExtraText.innerHTML = '';\\n          document.getElementById('node-c-circle').classList.add('leader-node');\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n        });\\n        this.animationState = ANIMATION_STATE_NODE_DATA;\\n        resolve({\\n          animationState: ANIMATION_STATE_NODE_DATA,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_DATA: {\\n\\t\\t\\t\\tthis.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n\\n          HelperFunctions.showElement(nodeAExtraHighlight);\\n          HelperFunctions.showElement(nodeBExtraHighlight);\\n          HelperFunctions.showElement(nodeCExtraHighlight);\\n        });\\n        this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\\n        resolve({\\n          animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\\n        this.changeMainText('');\\n\\n\\t\\t\\t\\tintroduceClientAnimation.finished.then(() => {\\n          HelperFunctions.hideElement(nodeAExtraHighlight);\\n          HelperFunctions.hideElement(nodeBExtraHighlight);\\n          HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n          HelperFunctions.showElement(document.getElementById('client-message'));\\n          const statusElem = document.getElementById('client-query-message');\\n          document.getElementById('client-query-message-text1');\\n          const contentLine1 = {\\n            index: 0,\\n            str: 'SELECT value'\\n          }\\n          const contentLine2 = {\\n            index: 0,\\n            str: 'FROM T WHERE key = k'\\n          }\\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(statusElem);\\n          anime({\\n            targets: contentLine1,\\n            index: contentLine1.str.length,\\n            easing: 'linear',\\n            duration: 600,\\n            update: function() {\\n              statusTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: contentLine2,\\n                index: contentLine2.str.length,\\n                easing: 'linear',\\n                duration: 900,\\n                update: function() {\\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n                },\\n                complete: () => HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false)\\n              });\\n            }\\n          });\\n\\n\\t\\t\\t\\t\\tthis.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\\n\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\\n\\t\\t\\t\\t// Leader contacts followers to obtain a consensus on current value\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = ''\\n\\t\\t\\t\\tconst statusElem = document.getElementById('node-c-message-status');\\n\\t\\t\\t\\tHelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n\\t\\t\\t\\tHelperFunctions.showElement(statusElem);\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Per raft protocol, leader should'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst contentLine2 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'obtain majority heartbeat.'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst leaderTextLine1 = document.getElementById('node-c-message-status-text1');\\n\\t\\t\\t\\tconst leaderTextLine2 = document.getElementById('node-c-message-status-text2')\\n\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\ttargets: contentLine1,\\n\\t\\t\\t\\t\\tindex: contentLine1.str.length,\\n\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\tduration: 800,\\n\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tcomplete: () => {\\n\\t\\t\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\t\\t\\ttargets: contentLine2,\\n\\t\\t\\t\\t\\t\\t\\tindex: contentLine2.str.length,\\n\\t\\t\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\t\\t\\tduration: 1040,\\n\\t\\t\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\t\\t\\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\\n            });\\n            \\n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 1000\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\\n\\n        receivedAckAnimation[0].finished.then(() => {\\n          // Once majority is obtained. The leader returns value back to the client\\n          document.getElementById('node-c-message-status-text1').textContent = 'Leader:';\\n          document.getElementById('node-c-message-status-text2').textContent = '';\\n          const leaderText1 = {\\n            index: 7,\\n            str: 'Majority heartbeat obtained,'\\n          }\\n          const leaderText2 = {\\n            index: 0,\\n            str: 'raft leader can serve read.'\\n          }\\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\\n          anime({\\n            targets: leaderText1,\\n            index: leaderText1.str.length,\\n            easing: 'linear',\\n            duration: 800,\\n            update: function() {\\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: leaderText2,\\n                index: leaderText2.str.length,\\n                easing: 'linear',\\n                duration: 1080,\\n                update: function() {\\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\\n                },\\n                complete: () => {\\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n                  animation.finished.then(() => {\\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\\n\\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\\n                    resolve({\\n                      animationState: this.animationState,\\n                      delay: 100\\n                    });\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        })\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\\n        this.changeMainText('<img src=\\\"./svg/warning-sign.svg\\\" width=\\\"40\\\"/> If nodes are in different regions, obtaining majority heartbeat is expensive. Query has high latency.');\\n        this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n        this.setState({ animationFinished: true });\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault: {\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t\\t\\treject('Unrecognized state: ' + this.animationState);\\n\\t\\t\\t}\\n\\t\\t}\\n  }\\n  \\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n  }\\n\\n  onPreviousInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n\\n    \\n\\t\\tswitch(this.animationState) {\\n\\n\\t\\t\\tcase ANIMATION_STATE_EXPLAIN_PROTOCOL: {\\n        // Undo phase\\n        this.changeMainText('');\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\n        resolve({\\n          animationState: Constants.ANIMATION_STATE_INITIAL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_ELECTION: {\\n        // Undo phase\\n        HelperFunctions.hideElement(nodeATextContainer);\\n        HelperFunctions.hideElement(nodeBTextContainer);\\n        HelperFunctions.hideElement(nodeCTextContainer);\\n        // Redo previous phase\\n        HelperFunctions.showElement(this.mainTextSect);\\n        this.changeMainText('Lets say we have a 3-node raft group.', () => { this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL });\\n\\n        resolve({\\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_DATA: {\\n        // Undo phase\\n        document.getElementById('node-c-circle').classList.remove('leader-node');\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n\\n        // Redo previous phase\\n        this.changeMainText('Nodes would have performed leader election..', () => {\\n          nodeAExtraText.innerHTML = 'Voted For C';\\n          nodeBExtraText.innerHTML = 'Voted For C';\\n          nodeCExtraText.innerHTML = 'Voted For C';\\n        })\\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION\\n        resolve({\\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\\n        // Undo phase\\n        document.getElementById('node-c-circle').classList.remove('leader-node');\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n        // Redo previous phase\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n\\t\\t\\t\\tthis.changeMainText('Node C is the current raft leader,<br /> denoted by black border.', () => {\\n          document.getElementById('node-c-circle').classList.add('leader-node');\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n        });\\n        this.animationState = ANIMATION_STATE_NODE_DATA;\\n        resolve({\\n          animationState: ANIMATION_STATE_NODE_DATA,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideClient();\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = '';\\n        this.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\\n          HelperFunctions.showElement(nodeAExtraHighlight);\\n          HelperFunctions.showElement(nodeBExtraHighlight);\\n          HelperFunctions.showElement(nodeCExtraHighlight);\\n          this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\\n          resolve({\\n            animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\\n            delay: 100,\\n          });\\n        })\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\\n        const statusElem = document.getElementById('node-c-message-status');\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n\\t\\t\\t\\tHelperFunctions.hideElement(statusElem);\\n\\t\\t\\t\\tdocument.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\\n        this.changeMainText('');\\n\\n\\t\\t\\t\\tintroduceClientAnimation.finished.then(() => {\\n          HelperFunctions.hideElement(nodeAExtraHighlight);\\n          HelperFunctions.hideElement(nodeBExtraHighlight);\\n          HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n          HelperFunctions.showElement(document.getElementById('client-message'));\\n          const statusElem = document.getElementById('client-query-message');\\n          document.getElementById('client-query-message-text1');\\n          const contentLine1 = {\\n            index: 0,\\n            str: 'SELECT value'\\n          }\\n          const contentLine2 = {\\n            index: 0,\\n            str: 'FROM T WHERE key = k'\\n          }\\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(statusElem);\\n          anime({\\n            targets: contentLine1,\\n            index: contentLine1.str.length,\\n            easing: 'linear',\\n            duration: 600,\\n            update: function() {\\n              statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: contentLine2,\\n                index: contentLine2.str.length,\\n                easing: 'linear',\\n                duration: 900,\\n                update: function() {\\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n                },\\n                complete: () => {\\n                  const anim = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                  anim.finished.then(() => {\\n                    this.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\\n                    resolve({\\n                      animationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\\n                      delay: 100,\\n                    });\\n                  })\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\\n        const leaderTextLine1 = document.getElementById('node-c-message-status-text1');\\n        const leaderTextLine2 = document.getElementById('node-c-message-status-text2');\\n        HelperFunctions.hideElement(document.getElementById('client-node-value'));\\n        leaderTextLine1.innerHTML = '';\\n        leaderTextLine2.innerHTML = '';\\n        \\n        const contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Per raft protocol, leader should'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst contentLine2 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'obtain majority heartbeat.'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\ttargets: contentLine1,\\n\\t\\t\\t\\t\\tindex: contentLine1.str.length,\\n\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\tduration: 800,\\n\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tcomplete: () => {\\n\\t\\t\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\t\\t\\ttargets: contentLine2,\\n\\t\\t\\t\\t\\t\\t\\tindex: contentLine2.str.length,\\n\\t\\t\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\t\\t\\tduration: 1040,\\n\\t\\t\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\t\\t\\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\\n            });\\n            \\n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n\\t\\t\\t\\t\\t}\\n        });\\n        break;\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-node-value'))\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        this.setState({ animationFinished: false });\\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\\n\\n        receivedAckAnimation[0].finished.then(() => {\\n          // Once majority is obtained. The leader returns value back to the client\\n          const statusElem = document.getElementById('node-c-message-status');\\n          HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n          HelperFunctions.showElement(statusElem);\\n          \\n          const leaderText1 = {\\n            index: 7,\\n            str: 'Majority heartbeat obtained,'\\n          }\\n          const leaderText2 = {\\n            index: 0,\\n            str: 'raft leader can serve read.'\\n          }\\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\\n          anime({\\n            targets: leaderText1,\\n            index: leaderText1.str.length,\\n            easing: 'linear',\\n            duration: 800,\\n            update: function() {\\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: leaderText2,\\n                index: leaderText2.str.length,\\n                easing: 'linear',\\n                duration: 1080,\\n                update: function() {\\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\\n                },\\n                complete: () => {\\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n                  animation.finished.then(() => {\\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\\n\\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\\n                    resolve({\\n                      animationState: this.animationState,\\n                      delay: 100\\n                    });\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      default: {\\n        console.error('Unrecognized state or unimplemented: ' + this.animationState);\\n        reject('Unrecognized state or unimplemented: ' + this.animationState);\\n      }\\n    }\\n  }\\n  \\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default RaftReadOperationAnimation;\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_LEADER_REPLICATES_LEASE = \\\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\\\";\\nconst ANIMATION_STATE_LEADER_READS_PROTOCOL = 'ANIMATION_STATE_LEADER_READS_PROTOCOL';\\nconst ANIMATION_STATE_START_LEADER_LEASE = 'ANIMATION_STATE_START_LEADER_LEASE';\\nconst ANIMATION_STATE_CLIENT_WROTE_TO_ORIGINAL_LEADER = \\\"ANIMATION_STATE_CLIENT_WROTE_TO_ORIGINAL_LEADER\\\";\\nconst ANIMATION_STATE_VALUE1_COMMITTED = \\\"ANIMATION_STATE_VALUE1_COMMITTED\\\";\\nconst ANIMATION_STATE_CLIENT_UPDATE_FAILS = 'ANIMATION_STATE_CLIENT_UPDATE_FAILS';\\nconst ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED = \\\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\\\";\\nconst ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED = \\\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\\\";\\nconst ANIMATION_STATE_NEW_LEADER_ELECTED = \\\"ANIMATION_STATE_NEW_LEADER_ELECTED\\\";\\nconst ANIMATION_STATE_LEADER_LEASE_DURATION = 'ANIMATION_STATE_LEADER_LEASE_DURATION';\\nconst ANIMATION_STATE_OLD_LEADER_STILL_READABLE = 'ANIMATION_STATE_OLD_LEADER_STILL_READABLE';\\nconst ANIMATION_STATE_OLD_LEASE_EXPIRES = 'ANIMATION_STATE_OLD_LEASE_EXPIRES';\\nconst ANIMATION_STATE_LEADER_LEASE_CONCLUSION = 'ANIMATION_STATE_LEADER_LEASE_CONCLUSION';\\nconst ANIMATION_STATE_TIMER_STARTED_ON_NEW_LEADER = \\\"ANIMATION_STATE_TIMER_STARTED_ON_NEW_LEADER\\\";\\nconst ANIMATION_STATE_POST_NEW_LEADER_VALUE2_COMMITTED = \\\"ANIMATION_STATE_POST_NEW_LEADER_VALUE2_COMMITTED\\\";\\nconst ANIMATION_STATE_POST_NEW_LEADER_LOG_ACK_RECEIVED_FROM_FOLLOWER = \\\"ANIMATION_STATE_POST_NEW_LEADER_LOG_ACK_RECEIVED_FROM_FOLLOWER\\\";\\nconst ANIMATION_STATE_NEW_LEADER_SENT_LEASES = \\\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\\\";\\n\\nconst SET_VALUE1=\\\"V1\\\";\\nconst SET_VALUE2=\\\"V2\\\";\\nconst ORIGINAL_LEADER_TIMER_DURATION = 16000;\\nconst NODE_A_TIMER_DURATION = 14000;\\nconst NODE_B_TIMER_DURATION = 30000;\\n\\n\\nexport class LeaderLeaseAnimation extends Component {\\n\\tconstructor(props) {\\n    super(props);\\n    this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      previousEnabled: true\\n\\t\\t}\\n\\t\\tthis.init();\\n\\t}\\n\\tinit() {\\n\\t\\tthis.nodeATimerAnimation = null;\\n\\t\\tthis.nodeBTimerAnimation = null;\\n\\t\\tthis.nodeCTimerAnimation = null;\\n\\t}\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t\\tthis.timersAreActive = false;\\n\\t}\\n\\n\\tpause() {\\n\\t\\tif (this.timersAreActive) {\\n\\t\\t\\tthis.pauseTimers();\\n\\t\\t}\\n\\t}\\n\\tresume() {\\n\\t\\tif (this.timersAreActive) {\\n\\t\\t\\tthis.resumeTimers();\\n\\t\\t}\\n\\t}\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n\\t\\t// Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    const nodeCExtraText2 = document.getElementById('node-c-extra-text2'); \\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          // make Node C  the leader\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n          HelperFunctions.showElement(nodeATermText);\\n          HelperFunctions.showElement(nodeBTermText);\\n          HelperFunctions.showElement(nodeCTermText);\\n          HelperFunctions.showElement(nodeAExtraText);\\n          HelperFunctions.showElement(nodeBExtraText);\\n          HelperFunctions.showElement(nodeCExtraText);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_READS_PROTOCOL: {\\n        this.changeMainText('Performing raft-protocol, leader-only reads safely using leader leases', () => {\\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_START_LEADER_LEASE: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeCMessageBubble);\\n        HelperFunctions.showElement(nodeCMessageStatus);\\n        const statusText1 = document.getElementById('node-c-message-status-text1');\\n        const statusText2 = document.getElementById('node-c-message-status-text2');\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Raft leader starts a'\\n        }\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'new lease timer for itself.'\\n        }\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                this.timersAreActive = true;\\n                // this.nodeCTimerAnimation = HelperFunctions.startLeaseTimer(Constants.NODE_C, ORIGINAL_LEADER_TIMER_DURATION);\\n                this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 3000, 90);\\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                  asyncAnimation: true,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\\n\\t\\t\\t\\t// this.changeMainText('Leader replicates a lease interval to followers', () => {\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        HelperFunctions.hideElement(nodeCMessageStatus);\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const textAlt = document.getElementById('node-c-message-text-alt');\\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Raft leader then replicates a\\\\nlease interval to followers. Note\\\\nthe lease timer on C has started\\\\nbefore replicating to A and B.'\\n        };\\n\\n        var nodeCTextAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2500,\\n          update: function() {\\n            textAlt.innerText = content.str.substr(0, content.index);\\n          }\\n\\t\\t\\t\\t});\\n        var nodeALeaseAnimation = anime({\\n          targets: leaseToA,\\n          translateX: -280,\\n          translateY: 0,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToA);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToA);\\n            leaseToA.style.transform = 'none';\\n          },\\n        });\\n\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 5000, 60);\\n\\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\\n        var nodeBLeaseAnimation = anime({\\n          targets: leaseToB,\\n          translateX: -150,\\n          translateY: -280,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToB);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToB);\\n            leaseToB.style.transform = 'none';\\n          },\\n        });\\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 3000, 85);\\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, 3000, 90);\\n\\n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 500,\\n            asyncAnimation: true\\n          });\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_LEASE_DURATION: {\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        this.changeMainText('Any new leader must wait out the existing Leader Lease duration before acquiring lease.', () => {\\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\\n          // partition original leader\\n\\t\\t\\t\\t\\tHelperFunctions.partitionNodeC();\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAContent = {\\n          index: 0,\\n          str: 'A wins new leader election\\\\n but cannot perform any\\\\noperations until Leader\\\\nLease on A runs out.'\\n        };\\n\\n        anime({\\n          targets: nodeAContent,\\n          index: nodeAContent.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\\n          },\\n          complete: () => {\\n            // elect Node A as new leader candidate\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-candidate-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        \\n        break;\\n      }\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n\\t\\t\\t\\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\\n          HelperFunctions.introduceClient();\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(clientMessageBackground);\\n          HelperFunctions.showElement(clientQueryMessage);\\n          const clientContent1 = {\\n            index: 0,\\n            str: 'UPDATE T SET'\\n          }\\n          const clientContent2 = {\\n            index: 0,\\n            str: 'value = V2 WHERE'\\n          }\\n          const clientContent3 = {\\n            index: 0,\\n            str: ' key = k'\\n          }\\n          \\n          const statusText1 = document.getElementById('client-query-message-text1');\\n          const statusText2 = document.getElementById('client-query-message-text2');\\n          const statusText3 = document.getElementById('client-query-message-text3');\\n          anime({\\n            targets: clientContent1,\\n            index: clientContent1.str.length,\\n            easing: 'linear',\\n            duration: 400,\\n            update: function() {\\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: clientContent2,\\n                index: clientContent2.str.length,\\n                easing: 'linear',\\n                duration: 400,\\n                update: function () {\\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n                },\\n                complete: () => {\\n                  anime({\\n                    targets: clientContent3,\\n                    index: clientContent3.str.length,\\n                    easing: 'linear',\\n                    duration: 400,\\n                    update: function () {\\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                    },\\n                    complete: () => {\\n                      var messageContrainerElement = document.getElementById('client-message');\\n                      var messageElement = document.getElementById('client-message-circle');\\n                      var messageTextElement = document.getElementById('client-message-text');\\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\\t{\\n                        onBegin: () => {\\n                          HelperFunctions.showElement(messageContrainerElement);\\n                          messageElement.classList.add('log-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        onChangeComplete: () => {\\n                          messageElement.classList.remove('log-message');\\n                          messageElement.classList.add('error-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\\n                          // messageTextElement\\n                        },\\n                        onComplete: () => {\\n                          messageElement.classList.remove('error-message');\\n                          HelperFunctions.hideElement(messageContrainerElement);\\n                          messageContrainerElement.style.transform = 'none';\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        alternate: true,\\n                      });\\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\\n                      resolve({\\n                        animationState: this.animationState,\\n                        delay: 100,\\n                      });\\n                    }\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        const clientMessageStatus = document.getElementById('client-message-status');\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n       break;\\n      }\\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\\n        const content = {\\n          index: 0,\\n          str: 'Leader Lease of C will run out\\\\nfirst [since it started first]. \\\\nC now steps down as leader.'\\n        };\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 6000, 25);\\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, 6000, 30);\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 6000);\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\\n          },\\n        });\\n        this.nodeCTimerAnimation.finished.then(() => {\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.remove('leader-node');\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n            asyncAnimation: true\\n          });\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NEW_LEADER_ELECTED: {\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAMessage = document.getElementById('node-a-message-status');\\n        const content = {\\n          index: 0,\\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\\n        };\\n\\n        var textAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 800,\\n          update: function() {\\n            nodeAMessage.textContent = content.str.substr(0, content.index);\\n          }\\n        });\\n\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 2000);\\n\\n        Promise.all([textAnimation, this.nodeATimerAnimation.finished]).then(() => {\\n          var nodeA = document.getElementById('node-a-circle');\\n          nodeA.classList.remove('leader-candidate-node');\\n          nodeA.classList.add('leader-node');\\n\\n          // hide Node A's leader lease timer\\n          HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\\n\\n          // and start its my lease timer\\n          this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, 5000, 50);\\n\\n          // then send leader lease message to B\\n          var leaseToB = document.getElementById('node-a-lease-to-node-b');\\n          var nodeBLeaseAnimation = anime({\\n            targets: leaseToB,\\n            translateX: 150,\\n            translateY: -280,\\n            easing: 'linear',\\n            duration: 1500,\\n            begin: () => {\\n              HelperFunctions.showElement(leaseToB);\\n            },\\n            complete: () => {\\n              HelperFunctions.hideElement(leaseToB);\\n              leaseToB.style.transform = 'none';\\n\\n              this.nodeBTimerAnimation.restart();\\n              this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\\n              resolve({\\n                animationState: this.animationState,\\n                delay: 100,\\n              });\\n            },\\n          });\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        const messageStatus = document.getElementById('client-message-status');\\n\\n        const content = {\\n          index: 0,\\n          str: 'From here on, client can issue reads/writes to the new leader.'\\n        }\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            messageStatus.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            // initiate a raft round\\n            \\n            // client message to A\\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n\\n            animation.finished.then(() => {\\n              // message with ack from A to B\\n              nodeAExtraText.innerHTML = '(k, V2)';\\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\\n\\n              messageToBAnimation.finished.then(() => {\\n                nodeBExtraText.innerHTML = '(k, V2)';\\n                HelperFunctions.hideElement(nodeAExtraText2);\\n                HelperFunctions.showElement(nodeAExtraHighlight);\\n                // confirmation message back to B and the client\\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, this.nodeBTimerAnimation);\\n\\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\\n                  HelperFunctions.hideElement(nodeBExtraText2);\\n                  nodeBExtraText.innerHTML = '(k, V2)';\\n                  HelperFunctions.showElement(nodeBExtraHighlight);\\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n                  this.stopTimers();\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                });\\n              });\\n            });\\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        this.changeMainText('Leader Leases ensure low latency reads even when nodes are across regions.', () => {\\n          this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n          this.stopTimers();\\n          this.setState({ animationFinished: true });\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        })\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tconsole.log('Animation finished. Nothing to do');\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n        console.error('Unrecognized state: ' + this.animationState);\\n        reject('Unrecognized state');\\n\\t\\t}\\n  }\\n  \\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonPreviousInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    const nodeCExtraText2 = document.getElementById('node-c-extra-text2'); \\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_READS_PROTOCOL: {\\n        HelperFunctions.hideElement(nodeATermText);\\n        HelperFunctions.hideElement(nodeBTermText);\\n        HelperFunctions.hideElement(nodeCTermText);\\n        HelperFunctions.hideElement(nodeAExtraText);\\n        HelperFunctions.hideElement(nodeBExtraText);\\n        HelperFunctions.hideElement(nodeCExtraText);\\n        var nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        this.changeMainText('')\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 1000,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_START_LEADER_LEASE: {\\n        // Undo phase\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeATermText);\\n        HelperFunctions.hideElement(nodeBTermText);\\n        HelperFunctions.hideElement(nodeCTermText);\\n        HelperFunctions.hideElement(nodeAExtraText);\\n        HelperFunctions.hideElement(nodeBExtraText);\\n        HelperFunctions.hideElement(nodeCExtraText);\\n        var nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n\\n        // Redo phase\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          // make Node C  the leader\\n          nodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n          HelperFunctions.showElement(nodeATermText);\\n          HelperFunctions.showElement(nodeBTermText);\\n          HelperFunctions.showElement(nodeCTermText);\\n          HelperFunctions.showElement(nodeAExtraText);\\n          HelperFunctions.showElement(nodeBExtraText);\\n          HelperFunctions.showElement(nodeCExtraText);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\\n        // Undo phase\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-c'));\\n\\n        // Redo phase\\n        this.changeMainText('Performing raft-protocol, leader-only reads safely using leader leases', () => {\\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_DURATION: {\\n        // Undo phase\\n        HelperFunctions.hideElement(document.getElementById('llease-rectnode-a'));\\n        HelperFunctions.hideElement(document.getElementById('llease-rectnode-b'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        // Redo phase\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeCMessageBubble);\\n        HelperFunctions.showElement(nodeCMessageStatus);\\n        const statusText1 = document.getElementById('node-c-message-status-text1');\\n        statusText1.innerHTML = '';\\n        const statusText2 = document.getElementById('node-c-message-status-text2');\\n        statusText2.innerHTML = '';\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Raft leader starts a'\\n        }\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'new lease timer for itself.'\\n        }\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                this.timersAreActive = true;\\n                // this.nodeCTimerAnimation = HelperFunctions.startLeaseTimer(Constants.NODE_C, ORIGINAL_LEADER_TIMER_DURATION);\\n                this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 3000, 90);\\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                  asyncAnimation: true,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\\n        this.changeMainText('');\\n        // this.changeMainText('Leader replicates a lease interval to followers', () => {\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        HelperFunctions.hideElement(nodeCMessageStatus);\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const textAlt = document.getElementById('node-c-message-text-alt');\\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\\n        const content = {\\n          index: 0,\\n          str: 'Raft leader then replicates a\\\\nlease interval to followers. Note\\\\nthe lease timer on C has started\\\\nbefore replicating to A and B.'\\n        };\\n\\n        var nodeCTextAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2500,\\n          update: function() {\\n            textAlt.innerText = content.str.substr(0, content.index);\\n          }\\n        });\\n        var nodeALeaseAnimation = anime({\\n          targets: leaseToA,\\n          translateX: -280,\\n          translateY: 0,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToA);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToA);\\n            leaseToA.style.transform = 'none';\\n          },\\n        });\\n\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 5000, 60);\\n\\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\\n        var nodeBLeaseAnimation = anime({\\n          targets: leaseToB,\\n          translateX: -150,\\n          translateY: -280,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToB);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToB);\\n            leaseToB.style.transform = 'none';\\n          },\\n        });\\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 3000, 85);\\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, 3000, 90);\\n\\n          \\n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n            asyncAnimation: true\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\\n        this.changeMainText('Any new leader must wait out existing Leader Lease duration before acquiring lease.', () => {\\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        var nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-candidate-node');\\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\\n          // partition original leader\\n\\t\\t\\t\\t\\tHelperFunctions.partitionNodeC();\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\\n        var nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-candidate-node');\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = '';\\n        document.getElementById('client-query-message-text3').innerHTML = '';\\n        HelperFunctions.hideElement(document.getElementById('client-node'));\\n\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAContent = {\\n          index: 0,\\n          str: 'A wins new leader election\\\\n but cannot perform any\\\\noperations until Leader\\\\nLease on A runs out.'\\n        };\\n\\n        anime({\\n          targets: nodeAContent,\\n          index: nodeAContent.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\\n          },\\n          complete: () => {\\n            // elect Node A as new leader candidate\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-candidate-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\\n\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n\\t\\t\\t\\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\\n          HelperFunctions.introduceClient();\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(clientMessageBackground);\\n          HelperFunctions.showElement(clientQueryMessage);\\n          const clientContent1 = {\\n            index: 0,\\n            str: 'UPDATE T SET'\\n          }\\n          const clientContent2 = {\\n            index: 0,\\n            str: 'value = V2 WHERE'\\n          }\\n          const clientContent3 = {\\n            index: 0,\\n            str: ' key = k'\\n          }\\n          \\n          const statusText1 = document.getElementById('client-query-message-text1');\\n          const statusText2 = document.getElementById('client-query-message-text2');\\n          const statusText3 = document.getElementById('client-query-message-text3');\\n          anime({\\n            targets: clientContent1,\\n            index: clientContent1.str.length,\\n            easing: 'linear',\\n            duration: 400,\\n            update: function() {\\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: clientContent2,\\n                index: clientContent2.str.length,\\n                easing: 'linear',\\n                duration: 400,\\n                update: function () {\\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n                },\\n                complete: () => {\\n                  anime({\\n                    targets: clientContent3,\\n                    index: clientContent3.str.length,\\n                    easing: 'linear',\\n                    duration: 400,\\n                    update: function () {\\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                    },\\n                    complete: () => {\\n                      var messageContrainerElement = document.getElementById('client-message');\\n                      var messageElement = document.getElementById('client-message-circle');\\n                      var messageTextElement = document.getElementById('client-message-text');\\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\\t{\\n                        onBegin: () => {\\n                          HelperFunctions.showElement(messageContrainerElement);\\n                          messageElement.classList.add('log-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        onChangeComplete: () => {\\n                          messageElement.classList.remove('log-message');\\n                          messageElement.classList.add('error-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\\n                          // messageTextElement\\n                        },\\n                        onComplete: () => {\\n                          messageElement.classList.remove('error-message');\\n                          HelperFunctions.hideElement(messageContrainerElement);\\n                          messageContrainerElement.style.transform = 'none';\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        alternate: true,\\n                      });\\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\\n                      resolve({\\n                        animationState: this.animationState,\\n                        delay: 100,\\n                      });\\n                    }\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        const clientMessageStatus = document.getElementById('client-message-status');\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\\n       \\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\\n        const content = {\\n          index: 0,\\n          str: 'Leader Lease of C will run out\\\\nfirst [since it started first]. \\\\nC now steps down as leader.'\\n        };\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 6000, 25);\\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, 6000, 30);\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, 6000);\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\\n          },\\n        });\\n        this.nodeCTimerAnimation.finished.then(() => {\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.remove('leader-node');\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n            asyncAnimation: true\\n          });\\n        });\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\\n\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAMessage = document.getElementById('node-a-message-status');\\n        const content = {\\n          index: 0,\\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\\n        };\\n\\n        var textAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 800,\\n          update: function() {\\n            nodeAMessage.textContent = content.str.substr(0, content.index);\\n          }\\n        });\\n\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, 2000);\\n\\n        Promise.all([textAnimation, this.nodeATimerAnimation.finished]).then(() => {\\n          var nodeA = document.getElementById('node-a-circle');\\n          nodeA.classList.remove('leader-candidate-node');\\n          nodeA.classList.add('leader-node');\\n\\n          // hide Node A's leader lease timer\\n          HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\\n\\n          // and start its my lease timer\\n          this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, 5000, 50);\\n\\n          // then send leader lease message to B\\n          var leaseToB = document.getElementById('node-a-lease-to-node-b');\\n          var nodeBLeaseAnimation = anime({\\n            targets: leaseToB,\\n            translateX: 150,\\n            translateY: -280,\\n            easing: 'linear',\\n            duration: 1500,\\n            begin: () => {\\n              HelperFunctions.showElement(leaseToB);\\n            },\\n            complete: () => {\\n              HelperFunctions.hideElement(leaseToB);\\n              leaseToB.style.transform = 'none';\\n\\n              this.nodeBTimerAnimation.restart();\\n              this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\\n              resolve({\\n                animationState: this.animationState,\\n                delay: 100,\\n              });\\n            },\\n          });\\n        });\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.setState({animationFinished: false});\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        const messageStatus = document.getElementById('client-message-status');\\n\\n        const content = {\\n          index: 0,\\n          str: 'From here on, client can issue reads/writes to the new leader.'\\n        }\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            messageStatus.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            // initiate a raft round\\n            \\n            // client message to A\\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n\\n            animation.finished.then(() => {\\n              // message with ack from A to B\\n              nodeAExtraText.innerHTML = '(k, V2)';\\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\\n\\n              messageToBAnimation.finished.then(() => {\\n                nodeBExtraText.innerHTML = '(k, V2)';\\n                HelperFunctions.hideElement(nodeAExtraText2);\\n                HelperFunctions.showElement(nodeAExtraHighlight);\\n                // confirmation message back to B and the client\\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, this.nodeBTimerAnimation);\\n\\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\\n                  HelperFunctions.hideElement(nodeBExtraText2);\\n                  nodeBExtraText.innerHTML = '(k, V2)';\\n                  HelperFunctions.showElement(nodeBExtraHighlight);\\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n                  this.stopTimers();\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                });\\n              });\\n            });\\n          }\\n        });\\n        this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100,\\n        });\\n      }\\n      default:\\n        console.error('Unrecognized state: ' + this.animationState);\\n        break;\\n    }\\n  }\\n\\n\\tchangeMainText(text, onComplete, delay) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete, delay);\\n\\t}\\n\\trestartTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.restart();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.restart();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.restart();\\n\\t\\t}\\n\\t}\\n\\tstopTimers() {\\n\\t\\tthis.timersAreActive = false;\\n\\t\\tthis.pauseTimers();\\n\\t}\\n\\tpauseTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.pause();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.pause();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.pause();\\n\\t\\t}\\n\\t}\\n\\tresumeTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.play();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.play();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.play();\\n\\t\\t}\\n\\t}\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\" >\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default LeaderLeaseAnimation;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport {Constants} from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst RUN_MODE_CONTINUOUS = \\\"CONTINOUS\\\";\\n\\nclass AnimationRunner extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.onPlayClicked = this.onPlayClicked.bind(this);\\n\\t\\tthis.onPreviousClicked = this.onPreviousClicked.bind(this);\\n\\t\\tthis.onRestartClicked = this.onRestartClicked.bind(this);\\n\\n\\t\\tthis.state = {\\n\\t\\t\\tanimationPlaying: false,\\n\\t\\t}\\n\\t}\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('main-text-sect');\\n\\t\\t// HelperFunctions.delayedNext(this,100);\\n\\t\\tsetTimeout(() => this.next(), 100);\\n\\t}\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n\\n\\tnext(){\\n\\t\\tthis.setState({ animationPlaying: true });\\n\\n\\t\\tvar promise = this.currentAnimation.onNext();\\n\\t\\tpromise.then(result => {\\n\\t\\t\\tconsole.log('Result: ' + JSON.stringify(result));\\n\\t\\t\\tthis.setState({ animationPlaying: false });\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (this.runMode == RUN_MODE_CONTINUOUS ) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.resume();\\n\\t\\t\\t\\t\\tthis.next();\\n\\t\\t\\t\\t} else if (!result.asyncAnimation) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.pause();\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\\n\\t\\t});\\n\\t}\\n\\n\\tprevious() {\\n\\t\\tthis.setState({ animationPlaying: true });\\n\\n\\t\\tvar promise = this.currentAnimation.onPrevious();\\n\\t\\tpromise.then( result => {\\n\\t\\t\\tconsole.log('Undo: ' + JSON.stringify(result));\\n\\t\\t\\tthis.setState({ animationPlaying: false });\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (this.runMode == RUN_MODE_CONTINUOUS ) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.resume();\\n\\t\\t\\t\\t\\tthis.next();\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tthis.currentAnimation.pause();\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\\n\\t\\t});\\n\\t}\\n\\n\\tonPlayClicked() {\\n\\t\\tthis.next();\\n\\t}\\n\\tonRestartClicked() {\\n\\t\\tthis.restart();\\n\\t}\\n\\tonPreviousClicked() {\\n\\t\\tthis.previous();\\n\\t}\\n\\n\\trestart() {\\n\\t\\twindow.location.reload();\\n\\t}\\n\\n\\trender() {\\n\\t\\t// In React, names starting with a capital letter will compile to the createComponent method\\n\\t\\t// (credit: https://medium.com/@Carmichaelize/dynamic-tag-names-in-react-and-jsx-17e366a684e9)\\n\\t\\t// This is done so that we can use animationToRun as a tag in the JSX below\\n\\t\\tconst Animation = this.props.animationToRun;\\n\\t\\tconst disableNext = this.state.animationPlaying || \\n\\t\\t\\t(this.currentAnimation && this.currentAnimation.state.animationFinished);\\n\\t\\tconst disablePrevious = this.state.animationPlaying ||\\n\\t\\t\\t(this.currentAnimation && !this.currentAnimation.state.previousEnabled) ||\\n\\t\\t\\t(this.currentAnimation && this.currentAnimation.animationState === Constants.ANIMATION_STATE_INITIAL);\\n\\t\\tconst isAnimationFinished = this.currentAnimation && this.currentAnimation.state.animationFinished;\\n\\t\\treturn(\\n\\t\\t\\t<div className=\\\"animation-runner\\\">\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\"></div>\\n\\t\\t\\t\\t<Animation ref={n => this.currentAnimation = n}></Animation>\\n\\t\\t\\t\\t<div className=\\\"control-btns\\\">\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-previous\\\" className=\\\"yb-btn\\\" disabled={disablePrevious} onClick={this.onPreviousClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-undo\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">Previous</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-next\\\" className=\\\"yb-btn\\\" disabled={disableNext} onClick={this.onPlayClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-play\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">\\n\\t\\t\\t\\t\\t\\t\\t{isAnimationFinished ? 'End' : 'Next' }\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-restart\\\" className=\\\"yb-btn\\\" onClick={this.onRestartClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-fast-backward\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">Restart</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default AnimationRunner;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport {Constants} from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst SET_VALUE1 = \\\"5\\\";\\nvar AnimationState = {\\n\\tINITIAL: \\\"INITIAL\\\",\\n\\tLEADER_ELECTION_NODE_TIMED_OUT: \\\"LEADER_ELECTION_NODE_TIMED_OUT\\\",\\n\\tLEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: \\\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\\\",\\n\\tLEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: \\\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\\\",\\n\\tLOG_REPLICATION_START: \\\"LOG_REPLICATION_START\\\",\\n\\tLOG_REPLICATION_INTRODUCE_CLIENT: \\\"LOG_REPLICATION_INTRODUCE_CLIENT\\\",\\n\\tLOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: \\\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\\\",\\n\\tLOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: \\\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\\\",\\n\\tLOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: \\\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\\\",\\n\\tLOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: \\\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\\\",\\n};\\n\\n\\nclass RaftWriteAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = AnimationState.INITIAL;\\n\\t\\tthis.state = {\\n\\t\\t\\tanimationFinished: false,\\n\\t\\t}\\n\\t}\\n\\n\\tpause() {\\n\\t}\\n\\tresume() {\\n\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase AnimationState.INITIAL: {\\n\\t\\t\\t\\tthis.changeMainText('Leader election starts ...');\\n\\n\\t\\t\\t\\t// initiate a timeout\\n\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\tthis.changeMainText('If there is no leader, a election timeout is triggered');\\n\\n\\t\\t\\t\\t\\t////////////////// animate Node A and B ////////////////////////\\n\\t\\t\\t\\t\\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\\n\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('animation-delay-3s');\\n\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\\n\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('animation-delay-2s');\\n\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\t////////////////// animate Node C ////////////////////////\\n\\t\\t\\t\\t\\t// get the specific node (i.e Node C) which would time out faster and eventually\\n\\t\\t\\t\\t\\t// become the leader\\n\\t\\t\\t\\t\\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\t\\tnodeCOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\t// need to wait for the animation on the faster node to end and then\\n\\t\\t\\t\\t\\t// execute the next step\\n\\t\\t\\t\\t\\tvar onNodeCAnimationEnd = () => {\\n\\t\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('pause-animation');\\n\\t\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('pause-animation');\\n\\t\\t\\t\\t\\t\\tnodeCOuterCircle.style.display = 'none';\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_NODE_TIMED_OUT;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tnodeCOuterCircle.addEventListener(\\\"webkitAnimationEnd\\\", onNodeCAnimationEnd,false);\\n\\t\\t\\t\\t\\tnodeCOuterCircle.addEventListener(\\\"animationend\\\", onNodeCAnimationEnd,false);\\n\\n\\t\\t\\t\\t}, Constants.DEFAULT_DELAY);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_NODE_TIMED_OUT: {\\n\\t\\t\\t\\tvar fasterTimeoutCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\tfasterTimeoutCircle.classList.add('leader-candidate-node');\\n\\n\\t\\t\\t\\tvar nodeCVoteText = document.getElementById('node-c-extra-text');\\n\\t\\t\\t\\tnodeCVoteText.classList.remove('visibility-hidden');\\n\\n\\t\\t\\t\\tthis.changeMainText('After election timeout the follower becomes a candidate. '\\n\\t\\t\\t\\t+ 'It starts a new election term and votes for itself', () => {\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: {\\n\\t\\t\\t\\t// send \\\"request vote\\\" to node B\\n\\t\\t\\t\\tvar messageToB = document.getElementById('node-c-message-to-b');\\n\\t\\t\\t\\tvar animation1 = HelperFunctions.messageFromC(Constants.NODE_B, {\\n\\t\\t\\t\\t\\tonBegin: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.add('vote-request-circle')\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonChangeComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.remove('vote-request-circle');\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.add('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.remove('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\talternate: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t// send \\\"request vote\\\" to node A\\n\\t\\t\\t\\tvar messageToA = document.getElementById('node-c-message-to-a');\\n\\t\\t\\t\\tvar animation2 = HelperFunctions.messageFromC(Constants.NODE_A, {\\n\\t\\t\\t\\t\\tonBegin: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.add('vote-request-circle')\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonChangeComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.remove('vote-request-circle');\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.add('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.remove('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\talternate: true,\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\t// wait for both animations to finish before proceeding\\n\\t\\t\\t\\tPromise.all([animation1.finished, animation2.finished]).then(() => {\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: {\\n\\t\\t\\t\\tthis.changeMainText('Once a candidate has majority of votes it becomes the leader');\\n\\n\\t\\t\\t\\t// show that follower nodes have voted for the leader (Node C)\\n\\t\\t\\t\\tvar nodeAVoteText = document.getElementById('node-a-extra-text');\\n\\t\\t\\t\\tnodeAVoteText.classList.remove('visibility-hidden');\\n\\t\\t\\t\\tvar nodeBVoteText = document.getElementById('node-b-extra-text');\\n\\t\\t\\t\\tnodeBVoteText.classList.remove('visibility-hidden');\\n\\n\\t\\t\\t\\tvar nodeCVoteText = document.getElementById('node-c-extra-text');\\n\\t\\t\\t\\tnodeCVoteText.textContent = 'Leader Node';\\n\\n\\t\\t\\t\\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\tnodeCOuterCircle.classList.remove('leader-candidate-node');\\n\\t\\t\\t\\tnodeCOuterCircle.classList.add('leader-node');\\n\\n\\t\\t\\t\\t// hide node A and B's outer circles\\n\\t\\t\\t\\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeAOuterCircle);\\n\\n\\t\\t\\t\\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeBOuterCircle);\\n\\n\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_START;\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_START: {\\n\\t\\t\\t\\tvar voteTexts = document.getElementsByClassName('node-extra-text');\\n\\t\\t\\t\\tfor (var i = 0; i < voteTexts.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(voteTexts[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.changeMainText('Log replication ...');\\n\\n\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT;\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT: {\\n\\t\\t\\t\\tthis.changeMainText('Clients always communicate with the leader.');\\n\\n\\t\\t\\t\\tvar introClientAnimation = HelperFunctions.introduceClient();\\n\\n\\t\\t\\t\\tintroClientAnimation.finished.then(() => {\\n\\t\\t\\t\\t\\tvar messageToCAnimation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false, false, HelperFunctions.getSetValueText(SET_VALUE1));\\n\\t\\t\\t\\t\\tmessageToCAnimation.finished.then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"The log entry is currently uncommitted, so it won't update the node's value. To commit the entry the node first replicates it to the follower nodes\\\", () => {\\n\\t\\t\\t\\t\\t// send log messages to follower nodes\\n\\t\\t\\t\\t\\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(true, HelperFunctions.getSetValueText(SET_VALUE1));\\n\\t\\t\\t\\t\\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\\n\\n\\t\\t\\t\\t\\t// wait for both animations to finish before proceeding\\n\\t\\t\\t\\t\\tPromise.all(animationPromises).then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"Once the leader receives acks from majority of follower nodes, it commits the value and sets it state to '5'\\\", () => {\\n\\t\\t\\t\\t\\t// since leader has received acks from both followers, mark entry as committed\\n\\t\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-c-extra-text',\\n\\t\\t\\t\\t\\t\\taddCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-c-main-text',\\n\\t\\t\\t\\t\\t\\ttext: \\\"5\\\",\\n\\t\\t\\t\\t\\t\\tshowElement: true,});\\n\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"The leader then notifies followers and the client that entry is committed\\\", () => {\\n\\t\\t\\t\\t\\t// notify followers that leader has committed the entries\\n\\t\\t\\t\\t\\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(false,HelperFunctions.getSetValueText(SET_VALUE1), true);\\n\\t\\t\\t\\t\\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\\n\\n\\t\\t\\t\\t\\t// and notify client as well\\n\\t\\t\\t\\t\\tHelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n\\n\\t\\t\\t\\t\\t//// follower message animation on finish\\n\\t\\t\\t\\t\\tPromise.all(animationPromises).then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: {\\n\\t\\t\\t\\t// commit entries for follower nodes\\n\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-a-main-text',\\n\\t\\t\\t\\t\\t\\ttext: SET_VALUE1,\\n\\t\\t\\t\\t\\t\\tshowElement: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\ttargetId: 'node-b-main-text',\\n\\t\\t\\t\\t\\ttext: SET_VALUE1,\\n\\t\\t\\t\\t\\tshowElement: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tthis.changeMainText(\\\"The cluster has now come to consensus about the system state\\\");\\n\\t\\t\\t\\tthis.animationState = Constants.ANIMATION_STATE_FINISHED;\\n\\t\\t\\t\\tthis.setState({ animationFinished: true });\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('main-text-sect');\\n\\t}\\n\\n  render() {\\n    return (\\n\\t    <div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t    </div>\\n\\t  );\\n  }\\n\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n}\\n\\nexport default RaftWriteAnimation;\\n\",\"import React, { Component } from 'react';\\nimport anime from 'animejs/lib/anime.es.js';\\n\\n\\nclass Timer extends Component {\\n\\t/*\\n\\t<svg width=\\\"100\\\" height=\\\"100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t<g id=\\\"timer\\\" transform=\\\"translate(10,10)\\\">\\n\\t\\t\\t\\t<circle id=\\\"face\\\" stroke=\\\"black\\\" stroke-width=\\\"3px\\\" cx=\\\"28\\\" cy=\\\"30\\\" r=\\\"30\\\" fill=\\\"transparent\\\"/>\\n\\t\\t\\t\\t<g id=\\\"hands\\\">\\n\\t\\t\\t\\t\\t<rect id=\\\"needle\\\" x=\\\"26\\\" y=\\\"4\\\" width=\\\"2\\\" height=\\\"29\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" stroke-width=\\\"2px\\\" fill=\\\"#333\\\" stroke=\\\"555\\\" />\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t</g>\\n\\t</svg>\\n*/\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.startTimer = this.startTimer.bind(this);\\n\\t}\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<svg width=\\\"100\\\" height=\\\"100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n\\t\\t\\t\\t\\t<g transform=\\\"translate(10,10)\\\">\\n\\t\\t\\t\\t\\t\\t<circle id={this.props.timerId} className=\\\"timer-face\\\"  strokeWidth=\\\"3px\\\" cx=\\\"28\\\" cy=\\\"30\\\" r=\\\"30\\\" fill=\\\"transparent\\\"/>\\n\\t\\t\\t\\t\\t</g>\\n\\t\\t\\t</svg>\\n\\t\\t)\\n\\t}\\n\\tstartTimer() {\\n\\t\\tvar timerFace = document.getElementById(this.props.timerId);\\n\\t\\ttimerFace.classList.add('timer-countdown-animation');\\n\\t}\\n}\\n\\nexport default Timer;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport {\\n  BrowserRouter as Router,\\n  Route,\\n  Link\\n} from 'react-router-dom';\\n\\nimport ReadFailureAnimation from './ReadFailureAnimation';\\nimport RaftReadOperationAnimation from './RaftReadOperationAnimation';\\nimport LeaderLeasesAnimation from './LeaderLeasesAnimation';\\nimport AnimationRunner from './AnimationRunner';\\nimport RaftWriteAnimation from './RaftWriteAnimation';\\n\\nimport {Constants} from './constants';\\nimport Test from './Test';\\n\\nclass App extends Component {\\n\\trender() {\\n    return (\\n\\t\\t\\t<Router>\\n\\t\\t    <div className=\\\"App\\\">\\n\\t\\t\\t\\t\\t<Route exact path='/' component={Home}></Route>\\n\\n\\t\\t\\t\\t\\t<Route exact path='/raft-write-operation' render={(props) => <AnimationRunner {...props} animationToRun={RaftWriteAnimation}/> }></Route>\\n\\n          <Route exact path='/why-raft-read-fails-without-quorum' render={(props) => <AnimationRunner {...props} animationToRun={ReadFailureAnimation}/> }></Route>\\n\\n\\t\\t\\t\\t\\t<Route exact path='/raft-read-with-leader-leases' render={(props) => <AnimationRunner {...props} animationToRun={LeaderLeasesAnimation}/> }></Route>\\n\\n\\t\\t\\t\\t\\t<Route exact path='/read-operation-in-raft' render={(props) => <AnimationRunner {...props} animationToRun={RaftReadOperationAnimation}/> }></Route>\\n\\t\\t    </div>\\n\\t\\t\\t</Router>\\n    );\\n  }\\n}\\n\\nclass Home extends Component {\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<ul>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/raft-write-operation\\\">Raft write operation</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/why-raft-read-fails-without-quorum\\\">Why raft read failes without quorum</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/read-operation-in-raft\\\">Read operation in raft</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/raft-read-with-leader-leases\\\">Raft read with leader leases</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</ul>\\n\\t\\t\\t</div>\\n\\t\\t);\\n\\t}\\n}\\n\\n\\nexport default App;\\n\",\"import React, { Component } from 'react';\\n\\nimport Timer from './svg/Timer';\\nimport HorizontalTimer from './svg/HorizontalTimer';\\n\\n\\nclass Test extends Component {\\n\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\t// this.timer = React.createRef();\\n\\t}\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t{/*<Timer timerId={\\\"timer-1\\\"} ref={ t => this.timer = t}/>*/}\\n\\t\\t\\t\\t<HorizontalTimer uid=\\\"1\\\" ref={ t => this.timer = t}/>\\n\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n\\tcomponentDidMount() {\\n\\n\\t\\t// anime({\\n  \\t// \\ttargets: '#horizontal-timer-rect',\\n  \\t// \\twidth: '0%', // -> from '28px' to '100%',\\n  \\t// \\teasing: 'easeInOutQuad',\\n\\t\\t// });\\n\\t\\t// debugger;\\n\\t\\tthis.timer.startTimer();\\n\\t}\\n}\\nexport default Test;\\n\",\"// This optional code is used to register a service worker.\\n// register() is not called by default.\\n\\n// This lets the app load faster on subsequent visits in production, and gives\\n// it offline capabilities. However, it also means that developers (and users)\\n// will only see deployed updates on subsequent visits to a page, after all the\\n// existing tabs open on the page have been closed, since previously cached\\n// resources are updated in the background.\\n\\n// To learn more about the benefits of this model and instructions on how to\\n// opt-in, read http://bit.ly/CRA-PWA\\n\\nconst isLocalhost = Boolean(\\n  window.location.hostname === 'localhost' ||\\n    // [::1] is the IPv6 localhost address.\\n    window.location.hostname === '[::1]' ||\\n    // 127.0.0.1/8 is considered localhost for IPv4.\\n    window.location.hostname.match(\\n      /^127(?:\\\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\\n    )\\n);\\n\\nexport function register(config) {\\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\\n    // The URL constructor is available in all browsers that support SW.\\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\\n    if (publicUrl.origin !== window.location.origin) {\\n      // Our service worker won't work if PUBLIC_URL is on a different origin\\n      // from what our page is served on. This might happen if a CDN is used to\\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\\n      return;\\n    }\\n\\n    window.addEventListener('load', () => {\\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\\n\\n      if (isLocalhost) {\\n        // This is running on localhost. Let's check if a service worker still exists or not.\\n        checkValidServiceWorker(swUrl, config);\\n\\n        // Add some additional logging to localhost, pointing developers to the\\n        // service worker/PWA documentation.\\n        navigator.serviceWorker.ready.then(() => {\\n          console.log(\\n            'This web app is being served cache-first by a service ' +\\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\\n          );\\n        });\\n      } else {\\n        // Is not localhost. Just register service worker\\n        registerValidSW(swUrl, config);\\n      }\\n    });\\n  }\\n}\\n\\nfunction registerValidSW(swUrl, config) {\\n  navigator.serviceWorker\\n    .register(swUrl)\\n    .then(registration => {\\n      registration.onupdatefound = () => {\\n        const installingWorker = registration.installing;\\n        if (installingWorker == null) {\\n          return;\\n        }\\n        installingWorker.onstatechange = () => {\\n          if (installingWorker.state === 'installed') {\\n            if (navigator.serviceWorker.controller) {\\n              // At this point, the updated precached content has been fetched,\\n              // but the previous service worker will still serve the older\\n              // content until all client tabs are closed.\\n              console.log(\\n                'New content is available and will be used when all ' +\\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\\n              );\\n\\n              // Execute callback\\n              if (config && config.onUpdate) {\\n                config.onUpdate(registration);\\n              }\\n            } else {\\n              // At this point, everything has been precached.\\n              // It's the perfect time to display a\\n              // \\\"Content is cached for offline use.\\\" message.\\n              console.log('Content is cached for offline use.');\\n\\n              // Execute callback\\n              if (config && config.onSuccess) {\\n                config.onSuccess(registration);\\n              }\\n            }\\n          }\\n        };\\n      };\\n    })\\n    .catch(error => {\\n      console.error('Error during service worker registration:', error);\\n    });\\n}\\n\\nfunction checkValidServiceWorker(swUrl, config) {\\n  // Check if the service worker can be found. If it can't reload the page.\\n  fetch(swUrl)\\n    .then(response => {\\n      // Ensure service worker exists, and that we really are getting a JS file.\\n      const contentType = response.headers.get('content-type');\\n      if (\\n        response.status === 404 ||\\n        (contentType != null && contentType.indexOf('javascript') === -1)\\n      ) {\\n        // No service worker found. Probably a different app. Reload the page.\\n        navigator.serviceWorker.ready.then(registration => {\\n          registration.unregister().then(() => {\\n            window.location.reload();\\n          });\\n        });\\n      } else {\\n        // Service worker found. Proceed as normal.\\n        registerValidSW(swUrl, config);\\n      }\\n    })\\n    .catch(() => {\\n      console.log(\\n        'No internet connection found. App is running in offline mode.'\\n      );\\n    });\\n}\\n\\nexport function unregister() {\\n  if ('serviceWorker' in navigator) {\\n    navigator.serviceWorker.ready.then(registration => {\\n      registration.unregister();\\n    });\\n  }\\n}\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n\\n// If you want your app to work offline and load faster, you can change\\n// unregister() to register() below. Note this comes with some pitfalls.\\n// Learn more about service workers: http://bit.ly/CRA-PWA\\nserviceWorker.unregister();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});var a={DEFAULT_DELAY:2e3,NODE_A:\"NODE_A\",NODE_B:\"NODE_B\",NODE_C:\"NODE_C\",CLIENT_NODE:\"CLIENT_NODE\",ANIMATION_STATE_INITIAL:\"ANIMATION_STATE_INITIAL\",ANIMATION_STATE_FINISHED:\"ANIMATION_STATE_FINISHED\",COMMITTED:\"(committed)\",UNCOMMITTED:\"(uncommitted)\"}},11:function(e,t,n){\"use strict\";var a=n(4),i=n(5),s=n(8),o=n(6),d=n(7),r=n(0),l=n.n(r),m=function(e){function t(e){return Object(a.a)(this,t),Object(s.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){return l.a.createElement(\"svg\",{width:\"100\",height:\"100\",xmlns:\"http://www.w3.org/2000/svg\"},l.a.createElement(\"g\",{id:\"analog-clock\",transform:\"translate(10,10)\"},l.a.createElement(\"circle\",{id:\"face\",stroke:\"black\",strokeWidth:\"3px\",cx:\"10\",cy:\"20\",r:\"10\",fill:\"transparent\"}),l.a.createElement(\"g\",{id:\"hands\"},l.a.createElement(\"rect\",{id:\"hour\",x:\"9\",y:\"12\",width:\"2\",height:\"10\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"555\"}),l.a.createElement(\"rect\",{id:\"min\",x:\"9\",y:\"20\",width:\"9\",height:\"2\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"555\"}))))}}]),t}(r.Component),c=n(13),E=n(1),u=n(16),g={mainText:{x:186,y:559},clientMessage:{x:186,y:478}},T={base:{x:42,y:324},messageToB:{x:48,y:324},messageToClient:{x:48,y:324},leaseTimer:{x:-6,y:432}},h={base:{x:320,y:324},messageToB:{x:352,y:324},messageToA:{x:352,y:324},messageToClient:{x:352,y:324},partitionText1:{x:240,y:254},partitionText2:{x:240,y:269}},I={base:{x:168,y:42},messageToA:{x:158,y:42},messageToC:{x:200,y:42}},A=function(e){function t(){return Object(a.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){var e=g.clientMessage.x,t=g.clientMessage.y,n=T.base.x,a=T.base.y,i=I.base.x,s=I.base.y,o=h.base.x,d=h.base.y;return l.a.createElement(\"svg\",{height:\"500\",width:\"720\"},l.a.createElement(\"defs\",null,l.a.createElement(m,null)),l.a.createElement(\"foreignObject\",{x:30,y:160,width:\"400\",height:\"300\"},l.a.createElement(\"div\",{id:\"center-message-text\",style:{fontFamily:\"Verdana\",fontSize:\"1em\",padding:\"30px\"}})),l.a.createElement(\"g\",null,l.a.createElement(\"text\",{id:\"center-message-rect\",className:\"visibility-hidden\",x:e,y:170,fontFamily:\"Verdana\",fontSize:\"1em\"},l.a.createElement(\"tspan\",{id:\"center-message-text1\",x:50,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"center-message-text2\",x:50,dy:\"1.2em\"}))),l.a.createElement(\"circle\",{id:\"node-c-message-to-b\",className:\"node-small-circle\",cx:h.messageToB.x,cy:h.messageToB.y}),l.a.createElement(\"circle\",{id:\"node-c-message-to-a\",className:\"node-small-circle\",cx:h.messageToA.x,cy:h.messageToB.y}),l.a.createElement(\"circle\",{id:\"node-c-message-to-client\",className:\"node-small-circle visibility-hidden\",cx:h.messageToClient.x,cy:h.messageToClient.y}),l.a.createElement(\"g\",{id:\"node-c-partition-wrap\",className:\"visibility-hidden\"},l.a.createElement(\"path\",{d:\"M250,360a83,75,0,1,1,190,-15\",id:\"node-c-partition\",className:\"node-partition\"}),l.a.createElement(\"text\",{fill:\"black\"},l.a.createElement(\"tspan\",{x:h.partitionText1.x,y:h.partitionText1.y},\"Partitioned\"),l.a.createElement(\"tspan\",{x:h.partitionText2.x,y:h.partitionText2.y},\"from A & B\"))),l.a.createElement(\"g\",null,l.a.createElement(\"rect\",{id:\"client-message-status-bg\",className:\"visibility-hidden\",x:e-92,y:t-152,fill:\"white\",width:\"210\",height:\"76\"}),l.a.createElement(\"text\",{id:\"client-query-message\",x:e-90,y:t-148,className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{id:\"client-query-message-anchor\",x:e-80,dy:\"1.2em\"},\"Query: \"),l.a.createElement(\"tspan\",{id:\"client-query-message-text1\",dx:5,className:\"code-block\"}),l.a.createElement(\"tspan\",{id:\"client-query-message-text2\",x:e-83,dy:\"1.2em\",className:\"code-block\"}),l.a.createElement(\"tspan\",{id:\"client-query-message-text3\",x:e-83,dy:\"1.2em\",className:\"code-block\"})),l.a.createElement(\"foreignObject\",{x:e-85,y:t-148,width:\"200\",height:\"70\"},l.a.createElement(\"div\",{id:\"client-message-status\"})),l.a.createElement(\"path\",{id:\"client-message-bubble\",className:\"visibility-hidden\",d:\"M\".concat(e+3,\",\").concat(t-50,\" l0,-26 l-90,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l200,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-90,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}})),l.a.createElement(\"g\",{id:\"client-message\",className:\"visibility-hidden\"},l.a.createElement(\"circle\",{id:\"client-message-circle\",className:\"client-message\",cx:e,cy:t}),l.a.createElement(\"text\",{id:\"client-message-text\",x:e-18,y:t+24})),l.a.createElement(\"circle\",{id:\"node-b-small-circle\",className:\"node-small-circle\",cx:i+24,cy:s+12}),l.a.createElement(\"circle\",{id:\"node-a-message-to-b\",className:\"node-small-circle visibility-hidden\",cx:T.messageToB.x,cy:T.messageToB.y}),l.a.createElement(\"circle\",{id:\"node-a-message-to-c\",className:\"node-small-circle visibility-hidden\",cx:T.messageToB.x,cy:T.messageToB.y}),l.a.createElement(\"circle\",{id:\"node-a-message-to-client\",className:\"node-small-circle visibility-hidden\",cx:T.messageToClient.x,cy:T.messageToClient.y}),l.a.createElement(\"g\",{id:\"node-c-wrap\"},l.a.createElement(\"circle\",{id:\"node-c-outer-circle\",className:\"node-outer-circle\",cx:o+32,cy:d,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),l.a.createElement(\"circle\",{id:\"node-c-circle\",cx:o+32,cy:d,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),l.a.createElement(\"text\",{id:\"node-c-main-text\",x:o+30,y:d+6,className:\"node-text\",fill:\"black\"},\"Node C\"),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.myLeaseTimerId(E.a.NODE_C),x:o-48,y:d+118,label:\"My Lease\"}),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.leaderLeaseTimerId(E.a.NODE_C),x:o-48,y:d+118,label:\"Leader Lease\"})),l.a.createElement(\"g\",null,l.a.createElement(\"rect\",{id:\"node-c-text-highlight\",className:\"visibility-hidden\",x:o+5,y:d+62,width:\"55\",height:\"24\",fill:\"yellow\"}),l.a.createElement(\"text\",{id:\"node-c-term-text-rect\",x:o+10,y:d+40,fill:\"black\",className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{id:\"node-c-term-text\",x:o+10,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-c-extra-text\",className:\"node-extra-text\",x:o+10,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-c-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),l.a.createElement(\"foreignObject\",{x:o-15,y:d-174,width:\"235\",height:\"80\"},l.a.createElement(\"div\",{id:\"node-c-message-text-alt\"})),l.a.createElement(\"text\",{id:\"node-c-message-status\",x:o-10,y:d-130,className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{id:\"node-c-message-status-text1\",x:o-10,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-c-message-status-text2\",x:o-10,dy:\"1.2em\"})),l.a.createElement(\"path\",{id:\"node-c-message-bubble\",className:\"visibility-hidden\",d:\"M\".concat(o+40,\",\").concat(o-40,\" l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l215,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-140,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),l.a.createElement(\"path\",{id:\"node-c-message-bubble-alt\",className:\"visibility-hidden\",d:\"M\".concat(o+45,\",\").concat(o-50,\" l15,-40 l-80,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l235,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-135,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),l.a.createElement(\"g\",{id:\"node-a-wrap\"},l.a.createElement(\"circle\",{id:\"node-a-outer-circle\",className:\"node-outer-circle\",cx:n,cy:a,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),l.a.createElement(\"circle\",{id:\"node-a-circle\",cx:n,cy:a,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),l.a.createElement(\"text\",{id:\"node-a-main-text\",x:n,y:a+6,className:\"node-text\"},\"Node A\"),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.myLeaseTimerId(E.a.NODE_A),x:T.leaseTimer.x-24,y:T.leaseTimer.y+12,label:\"My Lease\"}),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.leaderLeaseTimerId(E.a.NODE_A),x:T.leaseTimer.x-24,y:T.leaseTimer.y+12,label:\"Leader Lease\"})),l.a.createElement(\"g\",null,l.a.createElement(\"rect\",{id:\"node-a-term-highlight\",className:\"visibility-hidden\",x:n-30,y:a+41,width:\"63\",height:\"24\",fill:\"yellow\"}),l.a.createElement(\"rect\",{id:\"node-a-text-highlight\",className:\"visibility-hidden\",x:n-30,y:a+62,width:\"55\",height:\"24\",fill:\"yellow\"}),l.a.createElement(\"text\",{id:\"node-a-term-text-rect\",x:n,y:a+40,fill:\"black\",className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{id:\"node-a-term-text\",x:n-24,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-a-extra-text\",className:\"node-extra-text\",x:n-24,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-a-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),l.a.createElement(\"circle\",{id:\"node-b-message-to-a\",className:\"node-small-circle visibility-hidden\",cx:I.messageToA.x,cy:I.messageToA.y}),l.a.createElement(\"circle\",{id:\"node-b-message-to-c\",className:\"node-small-circle visibility-visible log-message\",cx:I.messageToC.x,cy:I.messageToC.y}),l.a.createElement(\"g\",{id:\"node-b-wrap\"},l.a.createElement(\"circle\",{id:\"node-b-circle\",cx:i+24,cy:s,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),l.a.createElement(\"circle\",{id:\"node-b-outer-circle\",className:\"node-outer-circle\",cx:i+24,cy:s,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),l.a.createElement(\"text\",{id:\"node-b-main-text\",x:i+24,y:s+6,className:\"node-text\"},\"Node B\"),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.myLeaseTimerId(E.a.NODE_B),x:i-54,y:s+115,label:\"My Lease\"}),l.a.createElement(c.a,{className:\"visibility-hidden\",uid:u.leaderLeaseTimerId(E.a.NODE_B),x:i-54,y:s+115,label:\"Leader Lease\"})),l.a.createElement(\"g\",null,l.a.createElement(\"rect\",{id:\"node-b-term-highlight\",className:\"visibility-hidden\",x:i-6,y:s+45,width:\"63\",height:\"24\",fill:\"yellow\"}),l.a.createElement(\"rect\",{id:\"node-b-text-highlight\",className:\"visibility-hidden\",x:i-6,y:s+65,width:\"55\",height:\"24\",fill:\"yellow\"}),l.a.createElement(\"text\",{id:\"node-b-term-text-rect\",x:i,y:s+43,fill:\"black\",className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{id:\"node-b-term-text\",x:i,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-b-extra-text\",className:\"node-extra-text\",x:i,dy:\"1.2em\"}),l.a.createElement(\"tspan\",{id:\"node-b-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),l.a.createElement(\"rect\",{id:\"node-a-message-status-bg\",className:\"visibility-hidden\",x:n-40,y:a-167,fill:\"white\",width:\"207\",height:\"100\"}),l.a.createElement(\"foreignObject\",{x:n-32,y:a-155,width:\"200\",height:\"80\"},l.a.createElement(\"div\",{id:\"node-a-message-status\"})),l.a.createElement(\"path\",{id:\"node-a-message-bubble\",className:\"visibility-hidden\",d:\"M62,284 l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-90 c0,0 0,-5 5,-5 l196,0 c0,0 5,0 5,5 l0,90 c0,0 0,5 -5,5 l-126,0 z\",style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),l.a.createElement(\"g\",{id:\"client-node\",className:\"visibility-visible\"},l.a.createElement(\"circle\",{className:\"client-node\",cx:186,cy:550}),l.a.createElement(\"text\",{id:\"client-node-main-text\",x:186,y:559,className:\"client-node-text\"},\"Client\"),l.a.createElement(\"text\",{id:\"client-node-value\",x:226,y:559}),l.a.createElement(\"text\",{id:\"client-node-value-alt\",x:226,y:559,className:\"visibility-hidden\"},l.a.createElement(\"tspan\",{fill:\"red\",x:226,fontSize:\"1.5em\"},\"\\xd7\"),l.a.createElement(\"tspan\",{dx:\"4px\"},\"Value: V1\"),l.a.createElement(\"tspan\",{fill:\"red\",x:226,dy:\"1.2em\"},\"Expected value = V2\"))),l.a.createElement(\"g\",{id:\"node-c-lease-to-node-a\",className:\"visibility-hidden\"},l.a.createElement(\"use\",{href:\"#analog-clock\",x:o+6,y:d-36})),l.a.createElement(\"g\",{id:\"node-c-lease-to-node-b\",className:\"visibility-hidden\"},l.a.createElement(\"use\",{href:\"#analog-clock\",x:o+24,y:d-36})),l.a.createElement(\"g\",{id:\"node-a-lease-to-node-b\",className:\"visibility-hidden\"},l.a.createElement(\"use\",{href:\"#analog-clock\",x:n,y:a-36})))}}]),t}(r.Component);t.a=A},13:function(e,t,n){\"use strict\";var a=n(4),i=n(5),s=n(8),o=n(6),d=n(7),r=n(0),l=n.n(r),m=(n(2),function(e){function t(e){return Object(a.a)(this,t),Object(s.a)(this,Object(o.a)(t).call(this,e))}return Object(d.a)(t,e),Object(i.a)(t,[{key:\"render\",value:function(){return l.a.createElement(\"g\",{transform:\"translate(10,10)\",className:this.props.className,id:this.props.uid},l.a.createElement(\"text\",{x:this.props.x+36,y:this.props.y-4,fill:\"black\"},this.props.label),l.a.createElement(\"rect\",{id:this.props.uid+\"-inner\",x:this.props.x+32,y:this.props.y,width:\"80\",height:\"6\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"#555\"}),l.a.createElement(\"rect\",{id:this.props.uid+\"-outer\",x:this.props.x+32,y:this.props.y,width:\"80\",height:\"7\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"2px\",fill:\"transparent\",stroke:\"black\"}),\"}\")}},{key:\"startTimer\",value:function(){}}]),t}(r.Component));t.a=m},15:function(e,t,n){},16:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"setSVGText\",function(){return s}),n.d(t,\"showElement\",function(){return o}),n.d(t,\"hideElement\",function(){return d}),n.d(t,\"delayedNext\",function(){return r}),n.d(t,\"setTextWithAnimation\",function(){return l}),n.d(t,\"introduceClient\",function(){return m}),n.d(t,\"hideClient\",function(){return c}),n.d(t,\"messageFromClient\",function(){return E}),n.d(t,\"sendLogMessage\",function(){return u}),n.d(t,\"logMessageFromLeaderToFollowers\",function(){return g}),n.d(t,\"logMessageAckFromFollowersToLeader\",function(){return T}),n.d(t,\"getFinishPromises\",function(){return h}),n.d(t,\"messageFromC\",function(){return I}),n.d(t,\"messageFromA\",function(){return A}),n.d(t,\"messageFromB\",function(){return x}),n.d(t,\"getSetValueText\",function(){return _}),n.d(t,\"partitionNodeC\",function(){return y}),n.d(t,\"startMyLeaseTimer\",function(){return N}),n.d(t,\"startLeaderLeaseTimer\",function(){return L}),n.d(t,\"startLeaseTimer\",function(){return O}),n.d(t,\"myLeaseTimerId\",function(){return b}),n.d(t,\"leaderLeaseTimerId\",function(){return S});var a=n(2),i=n(1);n(11);function s(e){var t=document.getElementById(e.targetId);e.text&&(t.textContent=e.text),e.addCSSClass&&t.classList.add(e.addCSSClass),e.removeCSSClass&&t.classList.remove(e.removeCSSClass),e.showElement&&o(t)}function o(e){e.classList.remove(\"visibility-hidden\"),e.classList.add(\"visibility-visible\")}function d(e){e.classList.remove(\"visibility-visible\"),e.classList.add(\"visibility-hidden\")}function r(e,t){t||(t=i.a.DEFAULT_DELAY),setTimeout(function(){return e.next()},t)}function l(e,t,n,i){e.innerHTML=t;var s={opacityIn:[0,1],scaleIn:[.2,1],scaleOut:3,durationIn:2e3,durationOut:2e3};s.delay=i||500,Object(a.a)({targets:e,opacity:s.opacityIn,scale:s.scaleIn,duration:s.durationIn,complete:n,delay:s.delay})}function m(e){var t=document.getElementById(\"client-node\");return o(t),e&&s({targetId:\"client-node-value\",text:e}),Object(a.a)({targets:t,translateY:-84})}function c(){d(document.getElementById(\"client-node\")),d(document.getElementById(\"client-message-circle\"))}function E(e,t){var n=document.getElementById(\"client-message\"),s=0,o=0;switch(e){case i.a.NODE_C:s=140,o=-140;break;case i.a.NODE_A:s=-160,o=-156;break;default:return void console.log(\"messageFromClient: Unrecognized destination: \"+e)}return Object(a.a)({targets:n,translateX:s,translateY:o,easing:\"linear\",duration:800,begin:t.onBegin,complete:t.onComplete,changeComplete:t.onChangeComplete,direction:t.alternate?\"alternate\":\"normal\"})}function u(e,t,n,a,d,r,l,m,c){console.log(\"FromNode: \"+e+\" toNode: \"+t+\" returnAck: \"+n+\" value: \"+d+\" commitValue: \"+r);var u=null,g=null,T=null,h=null,_=null,y=null,N=null;switch(e){case i.a.NODE_A:u=A,h=\"node-a-extra-text\",N=\"node-a-extra-text2\",t==i.a.NODE_B?(g=document.getElementById(\"node-a-message-to-b\"),T=\"node-b-extra-text\",y=\"node-b-extra-text2\"):t==i.a.NODE_C?(g=document.getElementById(\"node-a-message-to-c\"),T=\"node-c-extra-text\",y=\"node-c-extra-text2\"):t==i.a.CLIENT_NODE&&(g=document.getElementById(\"node-a-message-to-client\"));break;case i.a.NODE_B:u=x,h=\"node-b-extra-text\",N=\"node-b-extra-text2\",t==i.a.NODE_A?(g=document.getElementById(\"node-b-message-to-a\"),T=\"node-a-extra-text\",y=\"node-a-extra-text2\"):t==i.a.NODE_C&&(g=document.getElementById(\"node-b-message-to-c\"),T=\"node-c-extra-text\",y=\"node-c-extra-text2\");break;case i.a.NODE_C:u=I,h=\"node-c-extra-text\",N=\"node-c-extra-text2\",t==i.a.NODE_A?(g=document.getElementById(\"node-c-message-to-a\"),T=\"node-a-extra-text\",y=\"node-a-extra-text2\"):t==i.a.NODE_B?(g=document.getElementById(\"node-c-message-to-b\"),T=\"node-b-extra-text\",y=\"node-b-extra-text2\"):t==i.a.CLIENT_NODE&&(g=document.getElementById(\"node-c-message-to-client\"));break;case i.a.CLIENT_NODE:u=E,g=document.getElementById(\"client-message-circle\"),_=document.getElementById(\"client-message\"),t==i.a.NODE_A?(T=\"node-a-extra-text\",y=\"node-a-extra-text2\"):t==i.a.NODE_B?(T=\"node-b-extra-text\",y=\"node-b-extra-text2\"):t==i.a.NODE_C&&(T=\"node-c-extra-text\",y=\"node-c-extra-text2\");break;default:throw new Error(\"Unrecognized fromNode: \"+e)}return u(t,{delay:l,destinationTimerAnimation:m,onBegin:function(e){o(g),a?(g.classList.remove(\"log-message\"),g.classList.add(\"log-message-ack\")):(g.classList.add(\"log-message\"),g.classList.remove(\"log-message-ack\"))},onChangeComplete:function(e){console.log(\"In onChangeComplete. messageElement: \"+g),m&&(console.log(\"Will restart timer animation\"),m.restart()),n&&(g.classList.remove(\"log-message\"),g.classList.add(\"log-message-ack\"));var t=null;if(d&&T){var a=\"\",o=\"\";r?(a=\"set-text-committed\",o=\"set-text-uncommitted\",t=i.a.COMMITTED):(a=\"set-text-uncommitted\",o=\"set-text-committed\",t=i.a.UNCOMMITTED),console.log(\"additionalText: \"+t+\"additionalTextElementID: \"+y),null!=t&&y&&s({targetId:y,text:t,addCSSClass:a,removeCSSClass:o,showElement:!r})}},onComplete:function(e){n&&(g.classList.remove(\"log-message-ack\"),d&&h&&s({targetId:h,addCSSClass:\"set-text-committed\"}),d&&N&&s({targetId:N,text:i.a.COMMITTED,addCSSClass:\"set-text-committed\"})),c&&c.restart(),g.style.transform=\"none\",_&&(_.style.transform=\"none\")},alternate:n})}function g(e,t,n,a,s,o,d){return[u(i.a.NODE_C,i.a.NODE_A,e,!1,t,n,a,s,d),u(i.a.NODE_C,i.a.NODE_B,e,!1,t,n,a,o,d)]}function T(e,t,n,a,s,o){return[u(i.a.NODE_A,i.a.NODE_C,!1,!0,e,t,n,a,o),u(i.a.NODE_B,i.a.NODE_C,!1,!0,e,t,n,s,o)]}function h(e){var t=[];return e.forEach(function(e){t.push(e.finished)}),t}function I(e,t){var n=0,s=0,o=\"\";return e==i.a.NODE_B?(n=-140,s=-276,o=\"#node-c-message-to-b\"):e==i.a.NODE_A?(o=\"#node-c-message-to-a\",n=-275):e==i.a.CLIENT_NODE&&(o=\"#node-c-message-to-client\",n=-130,s=135),Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function A(e,t){var n=0,s=0,o=\"\";if(e==i.a.NODE_B)n=160,s=-290,o=\"#node-a-message-to-b\";else if(e===i.a.NODE_C)n=275,o=\"#node-a-message-to-c\";else{if(e!=i.a.CLIENT_NODE)return void console.warning(\"Unsupported destination: \"+e);n=150,s=148,o=\"#node-a-message-to-client\"}return Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function x(e,t){var n=0,s=0,o=\"\";if(e==i.a.NODE_A)n=-160,s=290,o=\"#node-b-message-to-a\";else{if(e!==i.a.NODE_C)return void console.warning(\"Unsupported destination: \"+e);n=140,s=276,o=\"#node-b-message-to-c\"}return Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function _(e){return\"Value: \"+e}function y(){o(document.getElementById(\"node-c-partition-wrap\"))}function N(e,t,n){return O(b(e),t,n)}function L(e,t,n){return O(S(e),t,n)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(document.getElementById(e));var i=document.getElementById(e+\"-inner\"),s=\"\".concat(n/100*80);return Object(a.a)({targets:i,width:s,easing:\"easeOutCubic\",duration:t})}function b(e){return f(\"mlease-rect-\",e)}function S(e){return f(\"llease-rect\",e)}function f(e,t){var n=e;switch(t){case i.a.NODE_C:n+=\"node-c\";break;case i.a.NODE_B:n+=\"node-b\";break;case i.a.NODE_A:n+=\"node-a\";break;default:console.error(\"Unrecognized Node: \"+t)}return n}},21:function(e,t,n){e.exports=n(32)},27:function(e,t,n){},32:function(e,t,n){\"use strict\";n.r(t);var a=n(0),i=n.n(a),s=n(19),o=n.n(s),d=(n(27),n(4)),r=n(5),l=n(8),m=n(6),c=n(7),E=(n(15),n(2)),u=n(11),g=n(36),T=n(35),h=n(34),I=n(1),A=n(16);var x=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=I.a.ANIMATION_STATE_INITIAL,n.state={animationFinished:!1,previousEnabled:!0},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\")}},{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),u=document.getElementById(\"node-b-extra-text\"),g=document.getElementById(\"node-c-extra-text\"),T=document.getElementById(\"node-a-text-highlight\"),h=(document.getElementById(\"node-b-text-highlight\"),document.getElementById(\"node-c-text-highlight\"),document.getElementById(\"node-a-extra-text2\")),x=(document.getElementById(\"node-b-extra-text2\"),document.getElementById(\"node-c-extra-text2\"),document.getElementById(\"node-a-message-bubble\")),_=document.getElementById(\"node-a-message-status\"),y=document.getElementById(\"client-message-bubble\"),N=document.getElementById(\"client-query-message\"),L=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case I.a.ANIMATION_STATE_INITIAL:for(var O=document.getElementsByClassName(\"node-outer-circle\"),b=0;b<O.length;b++)A.hideElement(O[b]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),A.showElement(a),A.showElement(i),A.showElement(s),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",g.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_UNSAFE_READ\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_UNSAFE_READ\":this.changeMainText(\"Unsafe to read from raft leader without majority heartbeats. This sequence explains why.\",function(){n.animationState=\"ANIMATION_STATE_NODE_C_PARTITIONED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_NODE_C_PARTITIONED\":this.changeMainText(\"\");var S=document.getElementById(\"node-c-message-text-alt\");A.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var f={index:0,str:\"Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]\"};Object(E.a)({targets:f,index:f.str.length,easing:\"linear\",duration:1500,update:function(){S.innerText=f.str.substr(0,f.index)},complete:function(){A.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\":document.getElementById(\"node-c-message-text-alt\").innerText=\"\",A.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),A.showElement(x);var M={index:0,str:\"This results in A and B\\n electing a new raft\\nleader, say A.\"};Object(E.a)({targets:M,index:M.str.length,easing:\"linear\",duration:1300,update:function(){_.innerHTML=M.str.substr(0,M.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-node\"),A.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),A.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),A.showElement(l),A.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_SET_OPERATION\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_SET_OPERATION\":_.innerHTML=\"\",A.hideElement(x),A.hideElement(l),A.hideElement(m),A.introduceClient();var C={index:0,str:\"UPDATE T SET\"},D={index:0,str:\"value = V2 WHERE\"},B={index:0,str:\" key = k\"},v=document.getElementById(\"client-query-message-text1\"),p=document.getElementById(\"client-query-message-text2\"),R=document.getElementById(\"client-query-message-text3\");A.showElement(y),A.showElement(L),A.showElement(N),Object(E.a)({targets:C,index:C.str.length,easing:\"linear\",duration:400,update:function(){v.textContent=C.str.substr(0,C.index)},complete:function(){Object(E.a)({targets:D,index:D.str.length,easing:\"linear\",duration:400,update:function(){p.textContent=D.str.substr(0,D.index)},complete:function(){Object(E.a)({targets:B,index:B.str.length,easing:\"linear\",duration:400,update:function(){R.textContent=B.str.substr(0,B.index)},complete:function(){A.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){A.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!0,!1,\"(k, V2)\").finished.then(function(){document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",A.hideElement(y),A.showElement(x);var t=A.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!1,!1,\"\",!0,600);c.innerHTML=\"(k, V2)\",A.showElement(T),A.hideElement(h),t.finished.then(function(){A.showElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"node-b-extra-text\").innerHTML=\"(k, V2)\",A.hideElement(document.getElementById(\"node-b-extra-text2\"))}),_.innerHTML=\"\",A.hideElement(x),A.sendLogMessage(I.a.NODE_A,I.a.CLIENT_NODE).finished.then(function(){A.showElement(y),A.hideElement(N),document.getElementById(\"client-message-status\").textContent=\"Update successful!\",n.animationState=\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\",e({animationState:n.animationState,delay:100})})})})}})}})}});break;case\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\":_.innerHTML=\"\",A.hideElement(x),A.hideElement(document.getElementById(\"node-a-text-highlight\")),A.hideElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",A.hideElement(y),A.hideElement(N),this.changeMainText(\"Now the client queries C. This should return value = V2\",function(){n.animationState=\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\":this.changeMainText(\"\");var k=document.getElementById(\"client-query-message-text1\"),w=document.getElementById(\"client-query-message-text2\");k.innerHTML=\"\",w.innerHTML=\"\",A.showElement(y),A.showElement(L),A.showElement(N),A.hideElement(document.getElementById(\"node-c-extra-text2\"));var H={index:0,str:\"SELECT value\"},j={index:0,str:\"FROM T WHERE key = k\"};Object(E.a)({targets:H,index:H.str.length,easing:\"linear\",duration:400,update:function(){k.innerHTML=H.str.substr(0,H.index)},complete:function(){Object(E.a)({targets:j,index:j.str.length,easing:\"linear\",duration:600,update:function(){w.innerHTML=j.str.substr(0,j.index)},complete:function(){A.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_C,!1);n.animationState=\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\",e({animationState:n.animationState,delay:100})}})}});break;case\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\":A.hideElement(y),A.hideElement(L),A.hideElement(N);var P=document.getElementById(\"node-c-message-text-alt\");A.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var V={index:0,str:\"C thinks it is the raft leader.\\nWithout majority heartbeats,\\nC will respond with value = V1\"};Object(E.a)({targets:V,index:V.str.length,easing:\"linear\",duration:1500,update:function(){P.innerText=V.str.substr(0,V.index)},complete:function(){A.sendLogMessage(I.a.NODE_C,I.a.CLIENT_NODE,!1).finished.then(function(){A.showElement(document.getElementById(\"client-node-value-alt\"))}),n.animationState=I.a.ANIMATION_STATE_FINISHED,n.setState({animationFinished:!0}),e({animationState:n.animationState,delay:100})}});break;case I.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),u=document.getElementById(\"node-b-extra-text\"),g=document.getElementById(\"node-c-extra-text\"),T=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),x=(document.getElementById(\"node-c-text-highlight\"),document.getElementById(\"node-a-extra-text2\")),_=(document.getElementById(\"node-b-extra-text2\"),document.getElementById(\"node-c-extra-text2\"),document.getElementById(\"node-a-message-bubble\")),y=document.getElementById(\"node-a-message-status\"),N=document.getElementById(\"client-message-bubble\"),L=document.getElementById(\"client-query-message\"),O=document.getElementById(\"client-message-status-bg\"),b=document.getElementById(\"node-c-partition-wrap\");switch(this.animationState){case\"ANIMATION_STATE_UNSAFE_READ\":(S=document.getElementById(\"node-c-circle\")).classList.remove(\"leader-node\"),A.hideElement(a),A.hideElement(i),A.hideElement(s),o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",c.innerHTML=\"\",u.innerHTML=\"\",g.innerHTML=\"\",this.changeMainText(\"\"),this.animationState=I.a.ANIMATION_STATE_INITIAL,e({animationState:this.animationState,delay:100});break;case\"ANIMATION_STATE_NODE_C_PARTITIONED\":var S;(S=document.getElementById(\"node-c-circle\")).classList.remove(\"leader-node\"),o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",c.innerHTML=\"\",u.innerHTML=\"\",g.innerHTML=\"\",this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",g.innerHTML=\"(k, V1)\",S.classList.add(\"leader-node\"),n.animationState=\"ANIMATION_STATE_UNSAFE_READ\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\":A.hideElement(b),A.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerText=\"\",this.changeMainText(\"Unsafe to read from raft leader without majority heartbeats. This sequence explains why.\",function(){n.animationState=\"ANIMATION_STATE_NODE_C_PARTITIONED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_CLIENT_SET_OPERATION\":document.getElementById(\"node-a-circle\").classList.remove(\"leader-node\"),A.hideElement(b),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",A.hideElement(l),A.hideElement(m),A.hideElement(document.getElementById(\"node-a-message-bubble\")),y.innerText=\"\";var f=document.getElementById(\"node-c-message-text-alt\");A.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var M={index:0,str:\"Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]\"};Object(E.a)({targets:M,index:M.str.length,easing:\"linear\",duration:1500,update:function(){f.innerText=M.str.substr(0,M.index)},complete:function(){A.showElement(b),n.animationState=\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\":A.hideElement(N),A.hideElement(document.getElementById(\"client-node\")),A.hideElement(document.getElementById(\"client-message-circle\")),document.getElementById(\"client-message-status\").innerHTML=\"\",A.hideElement(T),A.hideElement(h),c.innerText=\"(k, V1)\",u.innerText=\"(k, V1)\",A.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 1\"}),A.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 1\"}),A.showElement(_);var C={index:0,str:\"This results in A and B\\n electing a new raft\\nleader, say A.\"};Object(E.a)({targets:C,index:C.str.length,easing:\"linear\",duration:1300,update:function(){y.innerHTML=C.str.substr(0,C.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-node\"),A.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),A.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),A.showElement(l),A.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_SET_OPERATION\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\":this.changeMainText(\"\"),y.innerHTML=\"\",A.hideElement(_),A.hideElement(l),A.hideElement(m),A.introduceClient();var D={index:0,str:\"UPDATE T SET\"},B={index:0,str:\"value = V2 WHERE\"},v={index:0,str:\" key = k\"},p=document.getElementById(\"client-query-message-text1\"),R=document.getElementById(\"client-query-message-text2\"),k=document.getElementById(\"client-query-message-text3\");p.innerHTML=\"\",R.innerHTML=\"\",k.innerHTML=\"\",A.showElement(N),A.showElement(O),A.showElement(L),Object(E.a)({targets:D,index:D.str.length,easing:\"linear\",duration:400,update:function(){p.textContent=D.str.substr(0,D.index)},complete:function(){Object(E.a)({targets:B,index:B.str.length,easing:\"linear\",duration:400,update:function(){R.textContent=B.str.substr(0,B.index)},complete:function(){Object(E.a)({targets:v,index:v.str.length,easing:\"linear\",duration:400,update:function(){k.textContent=v.str.substr(0,v.index)},complete:function(){A.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){A.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!0,!1,\"(k, V2)\").finished.then(function(){document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",A.hideElement(N),A.showElement(_);var t=A.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!1,!1,\"\",!0,600);c.innerHTML=\"(k, V2)\",A.showElement(T),A.hideElement(x),t.finished.then(function(){A.showElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"node-b-extra-text\").innerHTML=\"(k, V2)\",A.hideElement(document.getElementById(\"node-b-extra-text2\"))}),y.innerHTML=\"\",A.hideElement(_),A.sendLogMessage(I.a.NODE_A,I.a.CLIENT_NODE).finished.then(function(){A.showElement(N),document.getElementById(\"client-message-status\").textContent=\"Update successful!\",n.animationState=\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\",e({animationState:n.animationState,delay:100})})})})}})}})}});break;case\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\":A.hideElement(O),A.hideElement(L),A.hideElement(N),this.changeMainText(\"Now the client queries C. This should return value = V2\",function(){n.animationState=\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\",e({animationState:n.animationState,delay:100})});break;case I.a.ANIMATION_STATE_FINISHED:this.setState({animationFinished:!1}),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",A.hideElement(document.getElementById(\"client-node-value-alt\")),A.hideElement(document.getElementById(\"node-c-message-bubble-alt\"));var w=document.getElementById(\"client-query-message-text1\"),H=document.getElementById(\"client-query-message-text2\");w.innerHTML=\"\",H.innerHTML=\"\",A.showElement(N),A.showElement(O),A.showElement(L),A.hideElement(document.getElementById(\"node-c-extra-text2\"));var j={index:0,str:\"SELECT value\"},P={index:0,str:\"FROM T WHERE key = k\"};Object(E.a)({targets:j,index:j.str.length,easing:\"linear\",duration:400,update:function(){w.innerHTML=j.str.substr(0,j.index)},complete:function(){Object(E.a)({targets:P,index:P.str.length,easing:\"linear\",duration:600,update:function(){H.innerHTML=P.str.substr(0,P.index)},complete:function(){A.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_C,!1);n.animationState=\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\",e({animationState:n.animationState,delay:100})}})}});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t){A.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(u.a,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}}]),t}(a.Component),_=(n(28),n(16)),y=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=I.a.ANIMATION_STATE_INITIAL,n.state={animationFinished:!1,previousEnabled:!0},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\")}},{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-extra-text\"),m=document.getElementById(\"node-b-extra-text\"),c=document.getElementById(\"node-c-extra-text\"),u=document.getElementById(\"node-a-text-highlight\"),g=document.getElementById(\"node-b-text-highlight\"),T=document.getElementById(\"node-c-text-highlight\"),h=document.getElementById(\"client-message-bubble\");switch(this.animationState){case I.a.ANIMATION_STATE_INITIAL:for(var A=document.getElementsByClassName(\"node-outer-circle\"),x=0;x<A.length;x++)_.hideElement(A[x]);this.changeMainText(\"Let\\u2019s say we have a 3-node raft group.\"),this.animationState=\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",e({animationState:\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",delay:100});break;case\"ANIMATION_STATE_EXPLAIN_PROTOCOL\":this.changeMainText(\"Nodes would have performed leader election..\",function(){_.showElement(a),_.showElement(i),_.showElement(s),l.innerHTML=\"Voted For C\",m.innerHTML=\"Voted For C\",c.innerHTML=\"Voted For C\"}),this.animationState=\"ANIMATION_STATE_LEADER_ELECTION\",e({animationState:\"ANIMATION_STATE_LEADER_ELECTION\",delay:100});break;case\"ANIMATION_STATE_LEADER_ELECTION\":this.changeMainText(\"Node C is the current raft leader,<br /> denoted by black border.\",function(){l.innerHTML=\"\",m.innerHTML=\"\",c.innerHTML=\"\",document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\"}),this.animationState=\"ANIMATION_STATE_NODE_DATA\",e({animationState:\"ANIMATION_STATE_NODE_DATA\",delay:100});break;case\"ANIMATION_STATE_NODE_DATA\":this.changeMainText(\"Assume all nodes have data: <br />(key,value) = (k, V1)\",function(){l.innerHTML=\"(k, V1)\",m.innerHTML=\"(k, V1)\",c.innerHTML=\"(k, V1)\",_.showElement(u),_.showElement(g),_.showElement(T)}),this.animationState=\"ANIMATION_STATE_CLIENT_INTRODUCED\",e({animationState:\"ANIMATION_STATE_CLIENT_INTRODUCED\",delay:100});break;case\"ANIMATION_STATE_CLIENT_INTRODUCED\":var y=_.introduceClient(\"\");this.changeMainText(\"\"),y.finished.then(function(){_.hideElement(u),_.hideElement(g),_.hideElement(T),_.showElement(document.getElementById(\"client-message\"));var t=document.getElementById(\"client-query-message\");document.getElementById(\"client-query-message-text1\");var a={index:0,str:\"SELECT value\"},i={index:0,str:\"FROM T WHERE key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\");_.showElement(h),_.showElement(t),Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:600,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){Object(E.a)({targets:i,index:i.str.length,easing:\"linear\",duration:900,update:function(){o.innerHTML=i.str.substr(0,i.index)},complete:function(){return _.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_C,!1)}})}}),n.animationState=\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",e({animationState:\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",delay:100})});break;case\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\":_.hideElement(document.getElementById(\"client-query-message\")),_.hideElement(h),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\";var N=document.getElementById(\"node-c-message-status\");_.showElement(document.getElementById(\"node-c-message-bubble\")),_.showElement(N);var L={index:0,str:\"Per raft protocol, leader should\"},O={index:0,str:\"obtain majority heartbeat.\"},b=document.getElementById(\"node-c-message-status-text1\"),S=document.getElementById(\"node-c-message-status-text2\");Object(E.a)({targets:L,index:L.str.length,easing:\"linear\",duration:800,update:function(){b.textContent=L.str.substr(0,L.index)},complete:function(){Object(E.a)({targets:O,index:O.str.length,easing:\"linear\",duration:1040,update:function(){S.textContent=O.str.substr(0,O.index)},complete:function(){return _.logMessageFromLeaderToFollowers(!1)}}),n.animationState=\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\"}}),e({animationState:this.animationState,delay:1e3});break;case\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\":_.logMessageAckFromFollowersToLeader()[0].finished.then(function(){document.getElementById(\"node-c-message-status-text1\").textContent=\"Leader:\",document.getElementById(\"node-c-message-status-text2\").textContent=\"\";var t={index:7,str:\"Majority heartbeat obtained,\"},a={index:0,str:\"raft leader can serve read.\"},i=document.getElementById(\"node-c-message-status-text1\"),s=document.getElementById(\"node-c-message-status-text2\");Object(E.a)({targets:t,index:t.str.length,easing:\"linear\",duration:800,update:function(){i.textContent=t.str.substr(0,t.index)},complete:function(){Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:1080,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){_.sendLogMessage(I.a.NODE_C,I.a.CLIENT_NODE).finished.then(function(){_.setSVGText({targetId:\"client-node-value\",text:\"value: \".concat(\"V1\"),showElement:!0}),n.animationState=\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\",e({animationState:n.animationState,delay:100})})}})}})});break;case\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\":_.hideElement(document.getElementById(\"node-c-message-bubble\")),_.hideElement(document.getElementById(\"node-c-message-status\")),this.changeMainText('<img src=\"./svg/warning-sign.svg\" width=\"40\"/> If nodes are in different regions, obtaining majority heartbeat is expensive. Query has high latency.'),this.animationState=I.a.ANIMATION_STATE_FINISHED,this.setState({animationFinished:!0}),e({animationState:this.animationState,delay:100});break;case I.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState),t(\"Unrecognized state: \"+this.animationState)}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-extra-text\"),m=document.getElementById(\"node-b-extra-text\"),c=document.getElementById(\"node-c-extra-text\"),u=document.getElementById(\"node-a-text-highlight\"),g=document.getElementById(\"node-b-text-highlight\"),T=document.getElementById(\"node-c-text-highlight\"),h=document.getElementById(\"client-message-bubble\");switch(this.animationState){case\"ANIMATION_STATE_EXPLAIN_PROTOCOL\":this.changeMainText(\"\"),this.animationState=I.a.ANIMATION_STATE_INITIAL,e({animationState:I.a.ANIMATION_STATE_INITIAL,delay:100});break;case\"ANIMATION_STATE_LEADER_ELECTION\":_.hideElement(a),_.hideElement(i),_.hideElement(s),_.showElement(this.mainTextSect),this.changeMainText(\"Let\\u2019s say we have a 3-node raft group.\",function(){n.animationState=\"ANIMATION_STATE_EXPLAIN_PROTOCOL\"}),e({animationState:\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",delay:100});break;case\"ANIMATION_STATE_NODE_DATA\":document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",this.changeMainText(\"Nodes would have performed leader election..\",function(){l.innerHTML=\"Voted For C\",m.innerHTML=\"Voted For C\",c.innerHTML=\"Voted For C\"}),this.animationState=\"ANIMATION_STATE_LEADER_ELECTION\",e({animationState:\"ANIMATION_STATE_LEADER_ELECTION\",delay:100});break;case\"ANIMATION_STATE_CLIENT_INTRODUCED\":document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),_.hideElement(u),_.hideElement(g),_.hideElement(T),l.innerHTML=\"\",m.innerHTML=\"\",c.innerHTML=\"\",this.changeMainText(\"Node C is the current raft leader,<br /> denoted by black border.\",function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\"}),this.animationState=\"ANIMATION_STATE_NODE_DATA\",e({animationState:\"ANIMATION_STATE_NODE_DATA\",delay:100});break;case\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\":_.hideElement(document.getElementById(\"client-query-message\")),_.hideElement(h),_.hideClient(),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",this.changeMainText(\"Assume all nodes have data: <br />(key,value) = (k, V1)\",function(){_.showElement(u),_.showElement(g),_.showElement(T),n.animationState=\"ANIMATION_STATE_CLIENT_INTRODUCED\",e({animationState:\"ANIMATION_STATE_CLIENT_INTRODUCED\",delay:100})});break;case\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\":var A=document.getElementById(\"node-c-message-status\");_.hideElement(document.getElementById(\"node-c-message-bubble\")),_.hideElement(A),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\";var x=_.introduceClient(\"\");this.changeMainText(\"\"),x.finished.then(function(){_.hideElement(u),_.hideElement(g),_.hideElement(T),_.showElement(document.getElementById(\"client-message\"));var t=document.getElementById(\"client-query-message\");document.getElementById(\"client-query-message-text1\");var a={index:0,str:\"SELECT value\"},i={index:0,str:\"FROM T WHERE key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\");_.showElement(h),_.showElement(t),Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:600,update:function(){s.innerHTML=a.str.substr(0,a.index)},complete:function(){Object(E.a)({targets:i,index:i.str.length,easing:\"linear\",duration:900,update:function(){o.innerHTML=i.str.substr(0,i.index)},complete:function(){_.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_C,!1).finished.then(function(){n.animationState=\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",e({animationState:\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",delay:100})})}})}})});break;case\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\":var y=document.getElementById(\"node-c-message-status-text1\"),N=document.getElementById(\"node-c-message-status-text2\");_.hideElement(document.getElementById(\"client-node-value\")),y.innerHTML=\"\",N.innerHTML=\"\";var L={index:0,str:\"Per raft protocol, leader should\"},O={index:0,str:\"obtain majority heartbeat.\"};Object(E.a)({targets:L,index:L.str.length,easing:\"linear\",duration:800,update:function(){y.textContent=L.str.substr(0,L.index)},complete:function(){Object(E.a)({targets:O,index:O.str.length,easing:\"linear\",duration:1040,update:function(){N.textContent=O.str.substr(0,O.index)},complete:function(){return _.logMessageFromLeaderToFollowers(!1)}}),n.animationState=\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\",e({animationState:n.animationState,delay:100})}});break;case I.a.ANIMATION_STATE_FINISHED:this.changeMainText(\"\"),_.hideElement(document.getElementById(\"client-node-value\")),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",this.setState({animationFinished:!1}),_.logMessageAckFromFollowersToLeader()[0].finished.then(function(){var t=document.getElementById(\"node-c-message-status\");_.showElement(document.getElementById(\"node-c-message-bubble\")),_.showElement(t);var a={index:7,str:\"Majority heartbeat obtained,\"},i={index:0,str:\"raft leader can serve read.\"},s=document.getElementById(\"node-c-message-status-text1\"),o=document.getElementById(\"node-c-message-status-text2\");Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:800,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){Object(E.a)({targets:i,index:i.str.length,easing:\"linear\",duration:1080,update:function(){o.textContent=i.str.substr(0,i.index)},complete:function(){_.sendLogMessage(I.a.NODE_C,I.a.CLIENT_NODE).finished.then(function(){_.setSVGText({targetId:\"client-node-value\",text:\"value: \".concat(\"V1\"),showElement:!0}),n.animationState=\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\",e({animationState:n.animationState,delay:100})})}})}})});break;default:console.error(\"Unrecognized state or unimplemented: \"+this.animationState),t(\"Unrecognized state or unimplemented: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t){_.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(u.a,null)))}}]),t}(a.Component),N=n(16),L=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=I.a.ANIMATION_STATE_INITIAL,n.state={previousEnabled:!0},n.init(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"init\",value:function(){this.nodeATimerAnimation=null,this.nodeBTimerAnimation=null,this.nodeCTimerAnimation=null}},{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\"),this.timersAreActive=!1}},{key:\"pause\",value:function(){this.timersAreActive&&this.pauseTimers()}},{key:\"resume\",value:function(){this.timersAreActive&&this.resumeTimers()}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),u=document.getElementById(\"node-b-extra-text\"),g=document.getElementById(\"node-c-extra-text\"),T=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),A=(document.getElementById(\"node-c-text-highlight\"),document.getElementById(\"node-a-extra-text2\")),x=document.getElementById(\"node-b-extra-text2\"),_=(document.getElementById(\"node-c-extra-text2\"),document.getElementById(\"node-a-message-bubble\")),y=document.getElementById(\"node-a-message-status\"),L=document.getElementById(\"node-c-message-bubble\"),O=document.getElementById(\"node-c-message-status\"),b=document.getElementById(\"client-message-bubble\"),S=document.getElementById(\"client-query-message\"),f=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case I.a.ANIMATION_STATE_INITIAL:for(var M=document.getElementsByClassName(\"node-outer-circle\"),C=0;C<M.length;C++)N.hideElement(M[C]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),N.showElement(a),N.showElement(i),N.showElement(s),N.showElement(o),N.showElement(d),N.showElement(r),N.showElement(c),N.showElement(u),N.showElement(g),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",g.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_LEADER_READS_PROTOCOL\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_READS_PROTOCOL\":this.changeMainText(\"Performing raft-protocol, leader-only reads safely using leader leases\",function(){n.animationState=\"ANIMATION_STATE_START_LEADER_LEASE\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_START_LEADER_LEASE\":this.changeMainText(\"\"),N.showElement(L),N.showElement(O);var D=document.getElementById(\"node-c-message-status-text1\"),B=document.getElementById(\"node-c-message-status-text2\"),v={index:0,str:\"Raft leader starts a\"},p={index:0,str:\"new lease timer for itself.\"};Object(E.a)({targets:v,index:v.str.length,easing:\"linear\",duration:600,update:function(){D.textContent=v.str.substr(0,v.index)},complete:function(){Object(E.a)({targets:p,index:p.str.length,easing:\"linear\",duration:600,update:function(){B.textContent=p.str.substr(0,p.index)},complete:function(){n.timersAreActive=!0,n.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,3e3,90),n.animationState=\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})}})}});break;case\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\":N.hideElement(L),N.hideElement(O),N.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var R=document.getElementById(\"node-c-message-text-alt\"),k=document.getElementById(\"node-c-lease-to-node-a\"),w={index:0,str:\"Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.\"},H=Object(E.a)({targets:w,index:w.str.length,easing:\"linear\",duration:2500,update:function(){R.innerText=w.str.substr(0,w.index)}}),j=Object(E.a)({targets:k,translateX:-280,translateY:0,easing:\"linear\",duration:1500,begin:function(){N.showElement(k)},complete:function(){N.hideElement(k),k.style.transform=\"none\"}});this.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,5e3,60);var P=document.getElementById(\"node-c-lease-to-node-b\"),V=Object(E.a)({targets:P,translateX:-150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){N.showElement(P)},complete:function(){N.hideElement(P),P.style.transform=\"none\"}});Promise.all([H.finished,j.finished,V.finished,this.nodeCTimerAnimation]).then(function(){n.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,3e3,85),n.nodeBTimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_B,3e3,90),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_DURATION\",e({animationState:n.animationState,delay:500,asyncAnimation:!0})});break;case\"ANIMATION_STATE_LEADER_LEASE_DURATION\":N.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",this.changeMainText(\"Any new leader must wait out the existing Leader Lease duration before acquiring lease.\",function(){n.animationState=\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\":this.changeMainText(\"Now suppose the original leader gets network partitioned\",function(){N.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\":this.changeMainText(\"\"),N.showElement(_),N.showElement(document.getElementById(\"node-a-message-status-bg\"));var F={index:0,str:\"A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.\"};Object(E.a)({targets:F,index:F.str.length,easing:\"linear\",duration:1500,update:function(){y.innerText=F.str.substr(0,F.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-candidate-node\"),N.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),N.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),N.showElement(l),N.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\":N.hideElement(_),N.hideElement(document.getElementById(\"node-a-message-status-bg\")),y.innerHTML=\"\",N.hideElement(l),N.hideElement(m),this.changeMainText(\"If client tries to write to A, operation is rejected..\",function(){N.introduceClient(),N.showElement(b),N.showElement(f),N.showElement(S);var t={index:0,str:\"UPDATE T SET\"},a={index:0,str:\"value = V2 WHERE\"},i={index:0,str:\" key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\"),d=document.getElementById(\"client-query-message-text3\");Object(E.a)({targets:t,index:t.str.length,easing:\"linear\",duration:400,update:function(){s.textContent=t.str.substr(0,t.index)},complete:function(){Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:400,update:function(){o.textContent=a.str.substr(0,a.index)},complete:function(){Object(E.a)({targets:i,index:i.str.length,easing:\"linear\",duration:400,update:function(){d.textContent=i.str.substr(0,i.index)},complete:function(){var t=document.getElementById(\"client-message\"),a=document.getElementById(\"client-message-circle\");document.getElementById(\"client-message-text\");N.messageFromClient(I.a.NODE_A,{onBegin:function(){N.showElement(t),a.classList.add(\"log-message\"),N.setSVGText({targetId:\"client-message-text\",text:\"\"})},onChangeComplete:function(){a.classList.remove(\"log-message\"),a.classList.add(\"error-message\"),N.setSVGText({targetId:\"client-message-text\",text:\"Rejected\"})},onComplete:function(){a.classList.remove(\"error-message\"),N.hideElement(t),t.style.transform=\"none\",N.setSVGText({targetId:\"client-message-text\",text:\"\"})},alternate:!0}),n.animationState=\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\",e({animationState:n.animationState,delay:100})}})}})}})});break;case\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\":this.changeMainText(\"\"),N.hideElement(document.getElementById(\"client-query-message\"));var U=document.getElementById(\"client-message-status\"),q={index:0,str:\"Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.\"};Object(E.a)({targets:q,index:q.str.length,easing:\"linear\",duration:2e3,update:function(){U.textContent=q.str.substr(0,q.index)},complete:function(){n.animationState=\"ANIMATION_STATE_OLD_LEASE_EXPIRES\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_OLD_LEASE_EXPIRES\":N.hideElement(b),document.getElementById(\"client-message-status\").innerHTML=\"\",N.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var G=document.getElementById(\"node-c-message-text-alt\"),W={index:0,str:\"Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.\"};this.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,6e3,25),this.nodeBTimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_B,6e3,30),this.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,6e3),Object(E.a)({targets:W,index:W.str.length,easing:\"linear\",duration:2e3,update:function(){G.textContent=W.str.substr(0,W.index)}}),this.nodeCTimerAnimation.finished.then(function(){document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),n.animationState=\"ANIMATION_STATE_NEW_LEADER_ELECTED\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})});break;case\"ANIMATION_STATE_NEW_LEADER_ELECTED\":N.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",N.showElement(document.getElementById(\"node-a-message-bubble\")),N.showElement(document.getElementById(\"node-a-message-status-bg\"));var Y=document.getElementById(\"node-a-message-status\"),z={index:0,str:\"Once Leader Lease on A expires, it becomes raft leader.\"},X=Object(E.a)({targets:z,index:z.str.length,easing:\"linear\",duration:800,update:function(){Y.textContent=z.str.substr(0,z.index)}});this.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,2e3),Promise.all([X,this.nodeATimerAnimation.finished]).then(function(){var t=document.getElementById(\"node-a-circle\");t.classList.remove(\"leader-candidate-node\"),t.classList.add(\"leader-node\"),N.hideElement(document.getElementById(N.leaderLeaseTimerId(I.a.NODE_A))),n.nodeATimerAnimation=N.startMyLeaseTimer(I.a.NODE_A,5e3,50);var a=document.getElementById(\"node-a-lease-to-node-b\");Object(E.a)({targets:a,translateX:150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){N.showElement(a)},complete:function(){N.hideElement(a),a.style.transform=\"none\",n.nodeBTimerAnimation.restart(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\",e({animationState:n.animationState,delay:100})}})});break;case\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\":N.hideElement(document.getElementById(\"node-a-message-bubble\")),N.hideElement(document.getElementById(\"node-a-message-status-bg\")),document.getElementById(\"node-a-message-status\").innerHTML=\"\",N.showElement(b);var J=document.getElementById(\"client-message-status\"),Q={index:0,str:\"From here on, client can issue reads/writes to the new leader.\"};Object(E.a)({targets:Q,index:Q.str.length,easing:\"linear\",duration:2e3,update:function(){J.textContent=Q.str.substr(0,Q.index)},complete:function(){N.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){c.innerHTML=\"(k, V2)\",N.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!0,!1,\"(k, V2)\",!1,0,n.nodeBTimerAnimation,n.nodeATimerAnimation).finished.then(function(){u.innerHTML=\"(k, V2)\",N.hideElement(A),N.showElement(T);var t=N.sendLogMessage(I.a.NODE_A,I.a.CLIENT_NODE,!1,!1,\"\",!0),a=N.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!1,!1,\"\",!0,300,n.nodeBTimerAnimation);Promise.all([t.finished,a.finished]).then(function(){N.hideElement(x),u.innerHTML=\"(k, V2)\",N.showElement(h),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",n.stopTimers(),e({animationState:n.animationState,delay:100})})})})}});break;case\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\":N.hideElement(T),N.hideElement(h),N.hideElement(b),N.hideElement(f),document.getElementById(\"client-message-status\").innerHTML=\"\",this.changeMainText(\"Leader Leases ensure low latency reads even when nodes are across regions.\",function(){n.animationState=I.a.ANIMATION_STATE_FINISHED,n.stopTimers(),n.setState({animationFinished:!0}),e({animationState:n.animationState,delay:100})});break;case I.a.ANIMATION_STATE_FINISHED:console.log(\"Animation finished. Nothing to do\"),e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState),t(\"Unrecognized state\")}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),u=document.getElementById(\"node-b-extra-text\"),g=document.getElementById(\"node-c-extra-text\"),T=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),A=(document.getElementById(\"node-c-text-highlight\"),document.getElementById(\"node-a-extra-text2\")),x=document.getElementById(\"node-b-extra-text2\"),_=(document.getElementById(\"node-c-extra-text2\"),document.getElementById(\"node-a-message-bubble\")),y=document.getElementById(\"node-a-message-status\"),L=document.getElementById(\"node-c-message-bubble\"),O=document.getElementById(\"node-c-message-status\"),b=document.getElementById(\"client-message-bubble\"),S=document.getElementById(\"client-query-message\"),f=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case\"ANIMATION_STATE_LEADER_READS_PROTOCOL\":N.hideElement(o),N.hideElement(d),N.hideElement(r),N.hideElement(c),N.hideElement(u),N.hideElement(g),(M=document.getElementById(\"node-c-circle\")).classList.remove(\"leader-node\"),this.changeMainText(\"\"),this.animationState=I.a.ANIMATION_STATE_INITIAL,e({animationState:this.animationState,delay:1e3});break;case\"ANIMATION_STATE_START_LEADER_LEASE\":var M;N.hideElement(o),N.hideElement(d),N.hideElement(r),N.hideElement(c),N.hideElement(u),N.hideElement(g),(M=document.getElementById(\"node-c-circle\")).classList.remove(\"leader-node\");for(var C=document.getElementsByClassName(\"node-outer-circle\"),D=0;D<C.length;D++)N.hideElement(C[D]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){M.classList.add(\"leader-node\"),N.showElement(a),N.showElement(i),N.showElement(s),N.showElement(o),N.showElement(d),N.showElement(r),N.showElement(c),N.showElement(u),N.showElement(g),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",g.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_LEADER_READS_PROTOCOL\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\":N.hideElement(L),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",N.hideElement(document.getElementById(\"mlease-rect-node-c\")),this.changeMainText(\"Performing raft-protocol, leader-only reads safely using leader leases\",function(){n.animationState=\"ANIMATION_STATE_START_LEADER_LEASE\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_LEASE_DURATION\":N.hideElement(document.getElementById(\"llease-rectnode-a\")),N.hideElement(document.getElementById(\"llease-rectnode-b\")),N.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",this.changeMainText(\"\"),N.showElement(L),N.showElement(O);var B=document.getElementById(\"node-c-message-status-text1\");B.innerHTML=\"\";var v=document.getElementById(\"node-c-message-status-text2\");v.innerHTML=\"\";var p={index:0,str:\"Raft leader starts a\"},R={index:0,str:\"new lease timer for itself.\"};Object(E.a)({targets:p,index:p.str.length,easing:\"linear\",duration:600,update:function(){B.textContent=p.str.substr(0,p.index)},complete:function(){Object(E.a)({targets:R,index:R.str.length,easing:\"linear\",duration:600,update:function(){v.textContent=R.str.substr(0,R.index)},complete:function(){n.timersAreActive=!0,n.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,3e3,90),n.animationState=\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})}})}});break;case\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\":this.changeMainText(\"\"),N.hideElement(L),N.hideElement(O),N.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var k=document.getElementById(\"node-c-message-text-alt\"),w=document.getElementById(\"node-c-lease-to-node-a\"),H={index:0,str:\"Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.\"},j=Object(E.a)({targets:H,index:H.str.length,easing:\"linear\",duration:2500,update:function(){k.innerText=H.str.substr(0,H.index)}}),P=Object(E.a)({targets:w,translateX:-280,translateY:0,easing:\"linear\",duration:1500,begin:function(){N.showElement(w)},complete:function(){N.hideElement(w),w.style.transform=\"none\"}});this.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,5e3,60);var V=document.getElementById(\"node-c-lease-to-node-b\"),F=Object(E.a)({targets:V,translateX:-150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){N.showElement(V)},complete:function(){N.hideElement(V),V.style.transform=\"none\"}});Promise.all([j.finished,P.finished,F.finished,this.nodeCTimerAnimation]).then(function(){n.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,3e3,85),n.nodeBTimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_B,3e3,90),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_DURATION\",e({animationState:n.animationState,delay:1e3,asyncAnimation:!0})});break;case\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\":this.changeMainText(\"\"),N.hideElement(document.getElementById(\"node-c-partition-wrap\")),this.changeMainText(\"Any new leader must wait out existing Leader Lease duration before acquiring lease.\",function(){n.animationState=\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\":N.hideElement(l),N.hideElement(m),N.hideElement(_),N.hideElement(document.getElementById(\"node-c-partition-wrap\")),N.hideElement(document.getElementById(\"node-a-message-status-bg\")),document.getElementById(\"node-a-message-status\").innerHTML=\"\",document.getElementById(\"node-a-circle\").classList.remove(\"leader-candidate-node\"),this.changeMainText(\"Now suppose the original leader gets network partitioned\",function(){N.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\":document.getElementById(\"node-a-circle\").classList.remove(\"leader-candidate-node\"),N.hideElement(b),N.hideElement(S),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",N.hideElement(document.getElementById(\"client-node\")),this.changeMainText(\"\"),N.showElement(_),N.showElement(document.getElementById(\"node-a-message-status-bg\"));var U={index:0,str:\"A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.\"};Object(E.a)({targets:U,index:U.str.length,easing:\"linear\",duration:1500,update:function(){y.innerText=U.str.substr(0,U.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-candidate-node\"),N.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),N.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),N.showElement(l),N.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_OLD_LEASE_EXPIRES\":N.hideElement(_),N.hideElement(document.getElementById(\"node-a-message-status-bg\")),y.innerHTML=\"\",N.hideElement(l),N.hideElement(m),this.changeMainText(\"If client tries to write to A, operation is rejected..\",function(){N.introduceClient(),N.showElement(b),N.showElement(f),N.showElement(S);var t={index:0,str:\"UPDATE T SET\"},a={index:0,str:\"value = V2 WHERE\"},i={index:0,str:\" key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\"),d=document.getElementById(\"client-query-message-text3\");Object(E.a)({targets:t,index:t.str.length,easing:\"linear\",duration:400,update:function(){s.textContent=t.str.substr(0,t.index)},complete:function(){Object(E.a)({targets:a,index:a.str.length,easing:\"linear\",duration:400,update:function(){o.textContent=a.str.substr(0,a.index)},complete:function(){Object(E.a)({targets:i,index:i.str.length,easing:\"linear\",duration:400,update:function(){d.textContent=i.str.substr(0,i.index)},complete:function(){var t=document.getElementById(\"client-message\"),a=document.getElementById(\"client-message-circle\");document.getElementById(\"client-message-text\");N.messageFromClient(I.a.NODE_A,{onBegin:function(){N.showElement(t),a.classList.add(\"log-message\"),N.setSVGText({targetId:\"client-message-text\",text:\"\"})},onChangeComplete:function(){a.classList.remove(\"log-message\"),a.classList.add(\"error-message\"),N.setSVGText({targetId:\"client-message-text\",text:\"Rejected\"})},onComplete:function(){a.classList.remove(\"error-message\"),N.hideElement(t),t.style.transform=\"none\",N.setSVGText({targetId:\"client-message-text\",text:\"\"})},alternate:!0}),n.animationState=\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\",e({animationState:n.animationState,delay:100})}})}})}})});break;case\"ANIMATION_STATE_NEW_LEADER_ELECTED\":this.changeMainText(\"\"),N.hideElement(document.getElementById(\"client-query-message\"));var q=document.getElementById(\"client-message-status\"),G={index:0,str:\"Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.\"};Object(E.a)({targets:G,index:G.str.length,easing:\"linear\",duration:2e3,update:function(){q.textContent=G.str.substr(0,G.index)},complete:function(){n.animationState=\"ANIMATION_STATE_OLD_LEASE_EXPIRES\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\":N.hideElement(b),document.getElementById(\"client-message-status\").innerHTML=\"\",N.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var W=document.getElementById(\"node-c-message-text-alt\"),Y={index:0,str:\"Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.\"};this.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,6e3,25),this.nodeBTimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_B,6e3,30),this.nodeCTimerAnimation=N.startMyLeaseTimer(I.a.NODE_C,6e3),Object(E.a)({targets:Y,index:Y.str.length,easing:\"linear\",duration:2e3,update:function(){W.textContent=Y.str.substr(0,Y.index)}}),this.nodeCTimerAnimation.finished.then(function(){document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),n.animationState=\"ANIMATION_STATE_NEW_LEADER_ELECTED\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})});case\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\":N.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",N.showElement(document.getElementById(\"node-a-message-bubble\")),N.showElement(document.getElementById(\"node-a-message-status-bg\"));var z=document.getElementById(\"node-a-message-status\"),X={index:0,str:\"Once Leader Lease on A expires, it becomes raft leader.\"},J=Object(E.a)({targets:X,index:X.str.length,easing:\"linear\",duration:800,update:function(){z.textContent=X.str.substr(0,X.index)}});this.nodeATimerAnimation=N.startLeaderLeaseTimer(I.a.NODE_A,2e3),Promise.all([J,this.nodeATimerAnimation.finished]).then(function(){var t=document.getElementById(\"node-a-circle\");t.classList.remove(\"leader-candidate-node\"),t.classList.add(\"leader-node\"),N.hideElement(document.getElementById(N.leaderLeaseTimerId(I.a.NODE_A))),n.nodeATimerAnimation=N.startMyLeaseTimer(I.a.NODE_A,5e3,50);var a=document.getElementById(\"node-a-lease-to-node-b\");Object(E.a)({targets:a,translateX:150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){N.showElement(a)},complete:function(){N.hideElement(a),a.style.transform=\"none\",n.nodeBTimerAnimation.restart(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\",e({animationState:n.animationState,delay:100})}})});case I.a.ANIMATION_STATE_FINISHED:this.setState({animationFinished:!1}),N.hideElement(document.getElementById(\"node-a-message-bubble\")),N.hideElement(document.getElementById(\"node-a-message-status-bg\")),document.getElementById(\"node-a-message-status\").innerHTML=\"\",N.showElement(b);var Q=document.getElementById(\"client-message-status\"),K={index:0,str:\"From here on, client can issue reads/writes to the new leader.\"};Object(E.a)({targets:K,index:K.str.length,easing:\"linear\",duration:2e3,update:function(){Q.textContent=K.str.substr(0,K.index)},complete:function(){N.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){c.innerHTML=\"(k, V2)\",N.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!0,!1,\"(k, V2)\",!1,0,n.nodeBTimerAnimation,n.nodeATimerAnimation).finished.then(function(){u.innerHTML=\"(k, V2)\",N.hideElement(A),N.showElement(T);var t=N.sendLogMessage(I.a.NODE_A,I.a.CLIENT_NODE,!1,!1,\"\",!0),a=N.sendLogMessage(I.a.NODE_A,I.a.NODE_B,!1,!1,\"\",!0,300,n.nodeBTimerAnimation);Promise.all([t.finished,a.finished]).then(function(){N.hideElement(x),u.innerHTML=\"(k, V2)\",N.showElement(h),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",n.stopTimers(),e({animationState:n.animationState,delay:100})})})})}}),this.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",e({animationState:this.animationState,delay:100});default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t,n){N.setTextWithAnimation(this.mainTextSect,e,t,n)}},{key:\"restartTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.restart(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.restart(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.restart()}},{key:\"stopTimers\",value:function(){this.timersAreActive=!1,this.pauseTimers()}},{key:\"pauseTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.pause(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.pause(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.pause()}},{key:\"resumeTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.play(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.play(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.play()}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(u.a,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}}]),t}(a.Component),O=n(14),b=n(16),S=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onPlayClicked=n.onPlayClicked.bind(Object(O.a)(n)),n.onPreviousClicked=n.onPreviousClicked.bind(Object(O.a)(n)),n.onRestartClicked=n.onRestartClicked.bind(Object(O.a)(n)),n.state={animationPlaying:!1},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;this.mainTextSect=document.getElementById(\"main-text-sect\"),setTimeout(function(){return e.next()},100)}},{key:\"changeMainText\",value:function(e,t){b.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"next\",value:function(){var e=this;this.setState({animationPlaying:!0}),this.currentAnimation.onNext().then(function(t){console.log(\"Result: \"+JSON.stringify(t)),e.setState({animationPlaying:!1}),setTimeout(function(){\"CONTINOUS\"==e.runMode?(e.currentAnimation.resume(),e.next()):t.asyncAnimation||e.currentAnimation.pause()},t.delay?t.delay:I.a.DEFAULT_DELAY)})}},{key:\"previous\",value:function(){var e=this;this.setState({animationPlaying:!0}),this.currentAnimation.onPrevious().then(function(t){console.log(\"Undo: \"+JSON.stringify(t)),e.setState({animationPlaying:!1}),setTimeout(function(){\"CONTINOUS\"==e.runMode?(e.currentAnimation.resume(),e.next()):e.currentAnimation.pause()},t.delay?t.delay:I.a.DEFAULT_DELAY)})}},{key:\"onPlayClicked\",value:function(){this.next()}},{key:\"onRestartClicked\",value:function(){this.restart()}},{key:\"onPreviousClicked\",value:function(){this.previous()}},{key:\"restart\",value:function(){window.location.reload()}},{key:\"render\",value:function(){var e=this,t=this.props.animationToRun,n=this.state.animationPlaying||this.currentAnimation&&this.currentAnimation.state.animationFinished,a=this.state.animationPlaying||this.currentAnimation&&!this.currentAnimation.state.previousEnabled||this.currentAnimation&&this.currentAnimation.animationState===I.a.ANIMATION_STATE_INITIAL,s=this.currentAnimation&&this.currentAnimation.state.animationFinished;return i.a.createElement(\"div\",{className:\"animation-runner\"},i.a.createElement(\"div\",{id:\"main-text-sect\"}),i.a.createElement(t,{ref:function(t){return e.currentAnimation=t}}),i.a.createElement(\"div\",{className:\"control-btns\"},i.a.createElement(\"button\",{id:\"animation-ctrl-previous\",className:\"yb-btn\",disabled:a,onClick:this.onPreviousClicked},i.a.createElement(\"i\",{className:\"fas fa-undo\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},\"Previous\")),i.a.createElement(\"button\",{id:\"animation-ctrl-next\",className:\"yb-btn\",disabled:n,onClick:this.onPlayClicked},i.a.createElement(\"i\",{className:\"fas fa-play\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},s?\"End\":\"Next\")),i.a.createElement(\"button\",{id:\"animation-ctrl-restart\",className:\"yb-btn\",onClick:this.onRestartClicked},i.a.createElement(\"i\",{className:\"fas fa-fast-backward\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},\"Restart\"))))}}]),t}(a.Component),f=n(16),M={INITIAL:\"INITIAL\",LEADER_ELECTION_NODE_TIMED_OUT:\"LEADER_ELECTION_NODE_TIMED_OUT\",LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF:\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\",LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES:\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\",LOG_REPLICATION_START:\"LOG_REPLICATION_START\",LOG_REPLICATION_INTRODUCE_CLIENT:\"LOG_REPLICATION_INTRODUCE_CLIENT\",LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER:\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\",LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS:\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\",LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY:\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\",LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER:\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\"},C=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=M.INITIAL,n.state={animationFinished:!1},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this;switch(this.animationState){case M.INITIAL:this.changeMainText(\"Leader election starts ...\"),setTimeout(function(){n.changeMainText(\"If there is no leader, a election timeout is triggered\");var t=document.getElementById(\"node-a-outer-circle\");t.classList.add(\"animation-delay-3s\"),t.classList.add(\"animate-circle-stroke\");var a=document.getElementById(\"node-b-outer-circle\");a.classList.add(\"animation-delay-2s\"),a.classList.add(\"animate-circle-stroke\");var i=document.getElementById(\"node-c-outer-circle\");i.classList.add(\"animate-circle-stroke\");var s=function(){t.classList.add(\"pause-animation\"),a.classList.add(\"pause-animation\"),i.style.display=\"none\",n.animationState=M.LEADER_ELECTION_NODE_TIMED_OUT,e({animationState:n.animationState,delay:100})};i.addEventListener(\"webkitAnimationEnd\",s,!1),i.addEventListener(\"animationend\",s,!1)},I.a.DEFAULT_DELAY);break;case M.LEADER_ELECTION_NODE_TIMED_OUT:document.getElementById(\"node-c-outer-circle\").classList.add(\"leader-candidate-node\"),document.getElementById(\"node-c-extra-text\").classList.remove(\"visibility-hidden\"),this.changeMainText(\"After election timeout the follower becomes a candidate. It starts a new election term and votes for itself\",function(){n.animationState=M.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF,e({animationState:n.animationState,delay:2e3})});break;case M.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF:var a=document.getElementById(\"node-c-message-to-b\"),i=f.messageFromC(I.a.NODE_B,{onBegin:function(e){a.classList.add(\"vote-request-circle\")},onChangeComplete:function(e){a.classList.remove(\"vote-request-circle\"),a.classList.add(\"vote-ack-circle\")},onComplete:function(e){a.classList.remove(\"vote-ack-circle\")},alternate:!0}),s=document.getElementById(\"node-c-message-to-a\"),o=f.messageFromC(I.a.NODE_A,{onBegin:function(e){s.classList.add(\"vote-request-circle\")},onChangeComplete:function(e){s.classList.remove(\"vote-request-circle\"),s.classList.add(\"vote-ack-circle\")},onComplete:function(e){s.classList.remove(\"vote-ack-circle\")},alternate:!0});Promise.all([i.finished,o.finished]).then(function(){n.animationState=M.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES,e({animationState:n.animationState,delay:1e3})});break;case M.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES:this.changeMainText(\"Once a candidate has majority of votes it becomes the leader\"),document.getElementById(\"node-a-extra-text\").classList.remove(\"visibility-hidden\"),document.getElementById(\"node-b-extra-text\").classList.remove(\"visibility-hidden\"),document.getElementById(\"node-c-extra-text\").textContent=\"Leader Node\";var d=document.getElementById(\"node-c-outer-circle\");d.classList.remove(\"leader-candidate-node\"),d.classList.add(\"leader-node\");var r=document.getElementById(\"node-a-outer-circle\");f.hideElement(r);var l=document.getElementById(\"node-b-outer-circle\");f.hideElement(l),this.animationState=M.LOG_REPLICATION_START,e({animationState:this.animationState,delay:2e3});break;case M.LOG_REPLICATION_START:for(var m=document.getElementsByClassName(\"node-extra-text\"),c=0;c<m.length;c++)f.hideElement(m[c]);this.changeMainText(\"Log replication ...\"),this.animationState=M.LOG_REPLICATION_INTRODUCE_CLIENT,e({animationState:this.animationState,delay:2e3});break;case M.LOG_REPLICATION_INTRODUCE_CLIENT:this.changeMainText(\"Clients always communicate with the leader.\"),f.introduceClient().finished.then(function(){f.sendLogMessage(I.a.CLIENT_NODE,I.a.NODE_C,!1,!1,f.getSetValueText(\"5\")).finished.then(function(){n.animationState=M.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER,e({animationState:n.animationState,delay:1e3})})});break;case M.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER:this.changeMainText(\"The log entry is currently uncommitted, so it won't update the node's value. To commit the entry the node first replicates it to the follower nodes\",function(){var t=f.logMessageFromLeaderToFollowers(!0,f.getSetValueText(\"5\")),a=f.getFinishPromises(t);Promise.all(a).then(function(){n.animationState=M.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS,e({animationState:n.animationState,delay:100})})});break;case M.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS:this.changeMainText(\"Once the leader receives acks from majority of follower nodes, it commits the value and sets it state to '5'\",function(){f.setSVGText({targetId:\"node-c-extra-text\",addCSSClass:\"set-text-committed\"}),f.setSVGText({targetId:\"node-c-main-text\",text:\"5\",showElement:!0}),n.animationState=M.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY,e({animationState:n.animationState,delay:1e3})});break;case M.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY:this.changeMainText(\"The leader then notifies followers and the client that entry is committed\",function(){var t=f.logMessageFromLeaderToFollowers(!1,f.getSetValueText(\"5\"),!0),a=f.getFinishPromises(t);f.sendLogMessage(I.a.NODE_C,I.a.CLIENT_NODE),Promise.all(a).then(function(){n.animationState=M.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER,e({animationState:n.animationState,delay:100})})});break;case M.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER:f.setSVGText({targetId:\"node-a-main-text\",text:\"5\",showElement:!0}),f.setSVGText({targetId:\"node-b-main-text\",text:\"5\",showElement:!0}),this.changeMainText(\"The cluster has now come to consensus about the system state\"),this.animationState=I.a.ANIMATION_STATE_FINISHED,this.setState({animationFinished:!0}),e({animationState:this.animationState,delay:100});break;case I.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"main-text-sect\")}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(u.a,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}},{key:\"changeMainText\",value:function(e,t){f.setTextWithAnimation(this.mainTextSect,e,t)}}]),t}(a.Component),D=(a.Component,n(13)),B=(a.Component,function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){return i.a.createElement(g.a,null,i.a.createElement(\"div\",{className:\"App\"},i.a.createElement(T.a,{exact:!0,path:\"/\",component:v}),i.a.createElement(T.a,{exact:!0,path:\"/raft-write-operation\",render:function(e){return i.a.createElement(S,Object.assign({},e,{animationToRun:C}))}}),i.a.createElement(T.a,{exact:!0,path:\"/why-raft-read-fails-without-quorum\",render:function(e){return i.a.createElement(S,Object.assign({},e,{animationToRun:x}))}}),i.a.createElement(T.a,{exact:!0,path:\"/raft-read-with-leader-leases\",render:function(e){return i.a.createElement(S,Object.assign({},e,{animationToRun:L}))}}),i.a.createElement(T.a,{exact:!0,path:\"/read-operation-in-raft\",render:function(e){return i.a.createElement(S,Object.assign({},e,{animationToRun:y}))}})))}}]),t}(a.Component)),v=function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"ul\",null,i.a.createElement(\"li\",null,i.a.createElement(h.a,{to:\"/raft-write-operation\"},\"Raft write operation\")),i.a.createElement(\"li\",null,i.a.createElement(h.a,{to:\"/why-raft-read-fails-without-quorum\"},\"Why raft read failes without quorum\")),i.a.createElement(\"li\",null,i.a.createElement(h.a,{to:\"/read-operation-in-raft\"},\"Read operation in raft\")),i.a.createElement(\"li\",null,i.a.createElement(h.a,{to:\"/raft-read-with-leader-leases\"},\"Raft read with leader leases\"))))}}]),t}(a.Component),p=B;Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(p,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);","extractedComments":[]}