{"map":"{\"version\":3,\"sources\":[\"/Users/andrew/code/yb-architecture/animations/src/constants.js\",\"/Users/andrew/code/yb-architecture/animations/src/HelperFunctions.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/SmallClock.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/HorizontalTimer.js\",\"/Users/andrew/code/yb-architecture/animations/src/svg/MainDiagram.js\",\"/Users/andrew/code/yb-architecture/animations/src/ReadFailureAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/RaftReadOperationAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/LeaderLeasesAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/AnimationRunner.js\",\"/Users/andrew/code/yb-architecture/animations/src/RaftWriteAnimation.js\",\"/Users/andrew/code/yb-architecture/animations/src/App.js\",\"/Users/andrew/code/yb-architecture/animations/src/serviceWorker.js\",\"/Users/andrew/code/yb-architecture/animations/src/index.js\"],\"names\":[\"__webpack_require__\",\"d\",\"__webpack_exports__\",\"Constants\",\"DEFAULT_DELAY\",\"NODE_A\",\"NODE_B\",\"NODE_C\",\"CLIENT_NODE\",\"ANIMATION_STATE_INITIAL\",\"ANIMATION_STATE_FINISHED\",\"COMMITTED\",\"UNCOMMITTED\",\"r\",\"setSVGText\",\"showElement\",\"hideElement\",\"delayedNext\",\"setTextWithAnimation\",\"introduceClient\",\"hideClient\",\"messageFromClient\",\"sendLogMessage\",\"logMessageFromLeaderToFollowers\",\"logMessageAckFromFollowersToLeader\",\"getFinishPromises\",\"messageFromC\",\"messageFromA\",\"messageFromB\",\"getSetValueText\",\"partitionNodeC\",\"startMyLeaseTimer\",\"startLeaderLeaseTimer\",\"startLeaseTimer\",\"myLeaseTimerId\",\"leaderLeaseTimerId\",\"animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__\",\"_constants__WEBPACK_IMPORTED_MODULE_1__\",\"params\",\"target\",\"document\",\"getElementById\",\"targetId\",\"text\",\"textContent\",\"addCSSClass\",\"classList\",\"add\",\"removeCSSClass\",\"remove\",\"element\",\"animation\",\"delay\",\"setTimeout\",\"next\",\"textSect\",\"onComplete\",\"innerHTML\",\"ml4\",\"anime\",\"targets\",\"opacity\",\"opacityIn\",\"scale\",\"scaleIn\",\"duration\",\"durationIn\",\"complete\",\"clientTextValue\",\"clientNode\",\"translateY\",\"destination\",\"messageElement\",\"translateX\",\"console\",\"log\",\"easing\",\"begin\",\"onBegin\",\"changeComplete\",\"onChangeComplete\",\"direction\",\"alternate\",\"fromNode\",\"toNode\",\"returnAck\",\"isAck\",\"value\",\"commitValue\",\"destinationTimerAnimation\",\"srcTimerAnimation\",\"method\",\"textElementId\",\"sourceNodeTextElementId\",\"messageContrainer\",\"additionalTextElementID\",\"sourceNodeAdditionalTextElementId\",\"Error\",\"anim\",\"restart\",\"additionalText\",\"style\",\"transform\",\"withAck\",\"nodeATimerAnimation\",\"nodeBTimerAnimation\",\"nodeCTimerAnimation\",\"animations\",\"animationPromises\",\"forEach\",\"currentAnimation\",\"push\",\"finished\",\"warning\",\"forNode\",\"config\",\"targetPercent\",\"startPercent\",\"disableAutoPlay\",\"arguments\",\"length\",\"undefined\",\"innerRect\",\"startWidth\",\"targetWidth\",\"width\",\"autoplay\",\"constructTimerId\",\"prefix\",\"id\",\"error\",\"SmallClock\",\"react_default\",\"a\",\"createElement\",\"height\",\"xmlns\",\"stroke\",\"strokeWidth\",\"cx\",\"cy\",\"fill\",\"x\",\"y\",\"rx\",\"ry\",\"HorizontalTimer\",\"className\",\"this\",\"props\",\"uid\",\"label\",\"Component\",\"HelperFunctions\",\"require\",\"clientNodePositions\",\"mainText\",\"clientNodeYPos\",\"clientMessage\",\"nodeAPositions\",\"base\",\"messageToB\",\"nodeABaseXPos\",\"messageToClient\",\"leaseTimer\",\"nodeABaseYPos\",\"nodeCPositions\",\"nodeCBaseXPos\",\"messageToA\",\"partitionText1\",\"nodeCBaseYPos\",\"partitionText2\",\"nodeBPositions\",\"nodeBBaseXPos\",\"messageToC\",\"MainDiagram\",\"clientX\",\"clientY\",\"nodeAX\",\"nodeAY\",\"nodeBX\",\"nodeBY\",\"nodeCX\",\"nodeCY\",\"svg_SmallClock\",\"fontFamily\",\"fontSize\",\"padding\",\"dy\",\"dx\",\"concat\",\"fillOpacity\",\"href\",\"svg_HorizontalTimer\",\"clientNodeXPos\",\"ReadOperationAnimation\",\"_Component\",\"_this\",\"Object\",\"classCallCheck\",\"possibleConstructorReturn\",\"getPrototypeOf\",\"call\",\"animationState\",\"state\",\"animationFinished\",\"previousEnabled\",\"inherits\",\"createClass\",\"key\",\"mainTextSect\",\"_this2\",\"Promise\",\"resolve\",\"reject\",\"onNextInternal\",\"_this3\",\"nodeATextContainer\",\"nodeBTextContainer\",\"nodeCTextContainer\",\"nodeATermText\",\"nodeBTermText\",\"nodeCTermText\",\"nodeATermHighlight\",\"nodeBTermHighlight\",\"nodeAExtraText\",\"nodeBExtraText\",\"nodeCExtraText\",\"nodeAExtraHighlight\",\"nodeAExtraText2\",\"nodeAMessageBubble\",\"nodeAMessageStatus\",\"clientMessageBubble\",\"clientQueryMessage\",\"clientMessageBackground\",\"nodeOuterCircles\",\"getElementsByClassName\",\"i\",\"changeMainText\",\"nodeCText\",\"contentLine1\",\"index\",\"str\",\"update\",\"innerText\",\"substr\",\"altBubbleText\",\"content\",\"clientContent1\",\"clientContent2\",\"clientContent3\",\"statusText1\",\"statusText2\",\"statusText3\",\"then\",\"aToBAnim\",\"setState\",\"_this4\",\"onPreviousInternal\",\"_this5\",\"nodeBExtraHighlight\",\"partitionWrap\",\"nodeC\",\"svg_MainDiagram\",\"RaftReadOperationAnimation\",\"nodeCExtraHighlight\",\"contentLine2\",\"statusTextLine1\",\"statusTextLine2\",\"introduceClientAnimation\",\"statusElem\",\"leaderTextLine1\",\"leaderTextLine2\",\"leaderText1\",\"leaderText2\",\"ltxt1\",\"ltxt2\",\"warningSVG\",\"LeaderLeaseAnimation\",\"init\",\"timersAreActive\",\"pauseTimers\",\"resumeTimers\",\"nodeBExtraText2\",\"nodeCMessageBubble\",\"nodeCMessageStatus\",\"clientMessageStatus\",\"play\",\"asyncAnimation\",\"seek\",\"textAlt\",\"leaseToA\",\"nodeCTextAnimation\",\"nodeALeaseAnimation\",\"leaseToB\",\"nodeBLeaseAnimation\",\"all\",\"nodeAContent\",\"messageContrainerElement\",\"nodeCTextAlt\",\"nodeAMessage\",\"nodeA\",\"messageStatus\",\"confirmToClientAnimation\",\"confirmToBAnimation\",\"stopTimers\",\"pause\",\"AnimationRunner\",\"onPlayClicked\",\"bind\",\"assertThisInitialized\",\"onPreviousClicked\",\"onRestartClicked\",\"animationPlaying\",\"onNext\",\"result\",\"JSON\",\"stringify\",\"runMode\",\"resume\",\"onPrevious\",\"previous\",\"window\",\"location\",\"reload\",\"Animation\",\"animationToRun\",\"disableNext\",\"disablePrevious\",\"isAnimationFinished\",\"ref\",\"n\",\"disabled\",\"onClick\",\"aria-hidden\",\"AnimationState\",\"INITIAL\",\"LEADER_ELECTION_NODE_TIMED_OUT\",\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\",\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\",\"LOG_REPLICATION_START\",\"LOG_REPLICATION_INTRODUCE_CLIENT\",\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\",\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\",\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\",\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\",\"RaftWriteAnimation\",\"nodeAOuterCircle\",\"nodeBOuterCircle\",\"nodeCOuterCircle\",\"onNodeCAnimationEnd\",\"display\",\"addEventListener\",\"animation1\",\"animation2\",\"voteTexts\",\"App\",\"BrowserRouter\",\"Route\",\"exact\",\"path\",\"component\",\"Home\",\"render\",\"src_AnimationRunner\",\"assign\",\"ReadFailureAnimation\",\"LeaderLeasesAnimation\",\"Link\",\"to\",\"class\",\"Boolean\",\"hostname\",\"match\",\"ReactDOM\",\"src_App_0\",\"navigator\",\"serviceWorker\",\"ready\",\"registration\",\"unregister\"],\"mappings\":\"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\",\"sourcesContent\":[\"export var Constants = {\\n\\tDEFAULT_DELAY: 2000,\\n\\tNODE_A: \\\"NODE_A\\\",\\n\\tNODE_B: \\\"NODE_B\\\",\\n\\tNODE_C: \\\"NODE_C\\\",\\n\\tCLIENT_NODE: \\\"CLIENT_NODE\\\",\\n\\tANIMATION_STATE_INITIAL: 'ANIMATION_STATE_INITIAL',\\n\\tANIMATION_STATE_FINISHED: \\\"ANIMATION_STATE_FINISHED\\\",\\n\\tCOMMITTED: \\\"(committed)\\\",\\n\\tUNCOMMITTED: \\\"(uncommitted)\\\",\\n}\\n\",\"import anime from 'animejs/lib/anime.es.js';\\n\\nimport {Constants} from './constants';\\n\\n// Set text content of a SVG text element\\n// params:{\\n//\\ttargetId:\\n//\\ttext:\\n//\\taddCSSClass:\\n//\\tshowElement:\\n//}\\nexport function setSVGText(params) {\\n\\tvar target = document.getElementById(params.targetId);\\n\\tif (params.text) {\\n\\t\\ttarget.textContent = params.text;\\n\\t}\\n\\tif (params.addCSSClass) {\\n\\t\\ttarget.classList.add(params.addCSSClass);\\n\\t}\\n\\tif (params.removeCSSClass) {\\n\\t\\ttarget.classList.remove(params.removeCSSClass);\\n\\t}\\n\\tif (params.showElement) {\\n\\t\\tshowElement(target);\\n\\t}\\n}\\n\\nexport function showElement(element) {\\n\\telement.classList.remove('visibility-hidden');\\n\\telement.classList.add('visibility-visible');\\n}\\n\\nexport function hideElement(element){\\n\\telement.classList.remove('visibility-visible');\\n\\telement.classList.add('visibility-hidden');\\n}\\n\\nexport function delayedNext(animation, delay) {\\n\\tif (!delay) {\\n\\t\\tdelay = Constants.DEFAULT_DELAY;\\n\\t}\\n\\tsetTimeout(() => animation.next(), delay);\\n}\\n\\nexport function setTextWithAnimation(textSect, text, onComplete, delay) {\\n\\ttextSect.innerHTML=text;\\n\\n\\tvar ml4 = {};\\n\\tml4.opacityIn = [0,1];\\n\\tml4.scaleIn = [0.2, 1];\\n\\tml4.scaleOut = 3;\\n\\tml4.durationIn = 2000;\\n\\tml4.durationOut = 2000;\\n\\tml4.delay = (delay?delay:500);\\n\\n\\tanime({\\n\\t\\ttargets: textSect,\\n\\t\\topacity: ml4.opacityIn,\\n\\t\\tscale: ml4.scaleIn,\\n\\t\\tduration: ml4.durationIn,\\n\\t\\tcomplete: onComplete,\\n\\t\\tdelay: ml4.delay,\\n\\t});\\n}\\n///////////////////////////////////////////////////////////////\\n//Animation Helpers. TODO: Maybe they should go in AnimationHelper module?\\n//////////////////////////////////////////////////////////////\\n\\nexport function introduceClient(clientTextValue) {\\n\\tvar clientNode = document.getElementById(\\\"client-node\\\");\\n\\tshowElement(clientNode);\\n\\tif (clientTextValue) {\\n\\t\\tsetSVGText({targetId: \\\"client-node-value\\\", text: clientTextValue})\\n\\t}\\n\\tvar animation = anime({\\n\\t\\ttargets: clientNode,\\n\\t\\ttranslateY: -84\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function hideClient() {\\n\\tvar clientNode = document.getElementById(\\\"client-node\\\");\\n\\thideElement(clientNode);\\n\\thideElement(document.getElementById('client-message-circle'));\\n}\\n\\n\\nexport function messageFromClient(destination, params) {\\n\\tvar messageElement = document.getElementById('client-message');\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\n\\tswitch (destination) {\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\ttranslateX = 140;\\n\\t\\t\\ttranslateY = -140;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\ttranslateX = -160;\\n\\t\\t\\ttranslateY = -156;\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tconsole.log('messageFromClient: Unrecognized destination: ' + destination);\\n\\t\\t\\treturn;\\n\\t\\t}\\n\\t}\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: messageElement,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 800,\\n\\t\\tbegin: params.onBegin,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tdirection: params.alternate?'alternate':'normal',\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function sendLogMessage(fromNode, toNode, returnAck, isAck, value, commitValue, delay, destinationTimerAnimation, srcTimerAnimation) {\\n\\tconsole.log('FromNode: ' + fromNode + \\\" toNode: \\\" + toNode + \\\" returnAck: \\\" + returnAck + \\\" value: \\\" + value + \\\" commitValue: \\\" + commitValue);\\n\\tvar method = null;\\n\\tvar messageElement = null;\\n\\tvar textElementId = null;\\n\\tvar sourceNodeTextElementId = null;\\n\\tvar messageContrainer = null;\\n\\tvar additionalTextElementID = null;\\n\\tvar sourceNodeAdditionalTextElementId = null;\\n\\n\\tswitch(fromNode) {\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\tmethod = messageFromA;\\n\\t\\t\\tsourceNodeTextElementId = 'node-a-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-a-extra-text2';\\n\\n\\t\\t\\tif(toNode === Constants.NODE_B) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-b');\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.NODE_C) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-c');\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.CLIENT_NODE) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-a-message-to-client');\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_B: {\\n\\t\\t\\tmethod = messageFromB;\\n\\t\\t\\tsourceNodeTextElementId = 'node-b-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-b-extra-text2';\\n\\n\\t\\t\\tif(toNode === Constants.NODE_A) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-b-message-to-a');\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.NODE_C) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-b-message-to-c');\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\tmethod = messageFromC;\\n\\t\\t\\tsourceNodeTextElementId = 'node-c-extra-text';\\n\\t\\t\\tsourceNodeAdditionalTextElementId = 'node-c-extra-text2';\\n\\n\\t\\t\\tif (toNode === Constants.NODE_A) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-a');\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.NODE_B) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-b');\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.CLIENT_NODE) {\\n\\t\\t\\t\\tmessageElement = document.getElementById('node-c-message-to-client');\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.CLIENT_NODE: {\\n\\t\\t\\tmethod = messageFromClient;\\n\\t\\t\\tmessageElement = document.getElementById('client-message-circle');\\n\\t\\t\\tmessageContrainer = document.getElementById('client-message');\\n\\n\\t\\t\\tif (toNode === Constants.NODE_A) {\\n\\t\\t\\t\\ttextElementId = 'node-a-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-a-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.NODE_B) {\\n\\t\\t\\t\\ttextElementId = 'node-b-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-b-extra-text2';\\n\\t\\t\\t} else if (toNode === Constants.NODE_C) {\\n\\t\\t\\t\\ttextElementId = 'node-c-extra-text';\\n\\t\\t\\t\\tadditionalTextElementID = 'node-c-extra-text2';\\n\\t\\t\\t}\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tthrow new Error('Unrecognized fromNode: ' + fromNode);\\n\\t\\t}\\n\\t}\\n\\n\\tvar animation = method(toNode,{\\n\\t\\t\\tdelay: delay,\\n\\t\\t\\tdestinationTimerAnimation: destinationTimerAnimation,\\n\\t\\t\\tonBegin: anim => {\\n\\t\\t\\t\\tshowElement(messageElement);\\n\\t\\t\\t\\tif (isAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message-ack');\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message-ack');\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\tonChangeComplete: anim => {\\n\\t\\t\\t\\tconsole.log('In onChangeComplete. messageElement: ' + messageElement);\\n\\t\\t\\t\\tif (destinationTimerAnimation) {\\n\\t\\t\\t\\t\\tconsole.log('Will restart timer animation');\\n\\t\\t\\t\\t\\tdestinationTimerAnimation.restart();\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tif (returnAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message');\\n\\t\\t\\t\\t\\tmessageElement.classList.add('log-message-ack');\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tvar additionalText = null;\\n\\t\\t\\t\\tif (value && textElementId){\\n\\t\\t\\t\\t\\tvar addCSSClass = \\\"\\\";\\n\\t\\t\\t\\t\\tvar removeCSSClass = \\\"\\\";\\n\\n\\t\\t\\t\\t\\tif (commitValue) {\\n\\t\\t\\t\\t\\t\\taddCSSClass = \\\"set-text-committed\\\";\\n\\t\\t\\t\\t\\t\\tremoveCSSClass = \\\"set-text-uncommitted\\\";\\n\\t\\t\\t\\t\\t\\tadditionalText = Constants.COMMITTED;\\n\\t\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\t\\taddCSSClass = \\\"set-text-uncommitted\\\";\\n\\t\\t\\t\\t\\t\\tremoveCSSClass = \\\"set-text-committed\\\";\\n\\t\\t\\t\\t\\t\\tadditionalText = Constants.UNCOMMITTED;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t// setSVGText({\\n\\t\\t\\t\\t\\t// \\ttargetId: textElementId,\\n\\t\\t\\t\\t\\t// \\ttext: value,\\n\\t\\t\\t\\t\\t// \\taddCSSClass: addCSSClass,\\n\\t\\t\\t\\t\\t// \\tremoveCSSClass:removeCSSClass,\\n\\t\\t\\t\\t\\t// \\tshowElement: !commitValue,\\n\\t\\t\\t\\t\\t// });\\n\\n\\t\\t\\t\\t\\tconsole.log('additionalText: ' + additionalText + 'additionalTextElementID: ' + additionalTextElementID);\\n\\t\\t\\t\\t\\tif (additionalText != null && additionalTextElementID) {\\n\\t\\t\\t\\t\\t\\tsetSVGText({\\n\\t\\t\\t\\t\\t\\t\\ttargetId: additionalTextElementID,\\n\\t\\t\\t\\t\\t\\t\\ttext: additionalText,\\n\\t\\t\\t\\t\\t\\t\\taddCSSClass: addCSSClass,\\n\\t\\t\\t\\t\\t\\t\\tremoveCSSClass:removeCSSClass,\\n\\t\\t\\t\\t\\t\\t\\tshowElement: !commitValue,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t},\\n\\t\\t\\tonComplete: anim => {\\n\\t\\t\\t\\tif (returnAck) {\\n\\t\\t\\t\\t\\tmessageElement.classList.remove('log-message-ack');\\n\\t\\t\\t\\t\\t// we got the ack back so uncommitted text should be shown as committed now\\n\\t\\t\\t\\t\\tif (value && sourceNodeTextElementId) {\\n\\t\\t\\t\\t\\t\\tsetSVGText({targetId: sourceNodeTextElementId, addCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tif (value && sourceNodeAdditionalTextElementId){\\n\\t\\t\\t\\t\\t\\tsetSVGText({targetId: sourceNodeAdditionalTextElementId, text: Constants.COMMITTED, addCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tif (srcTimerAnimation) {\\n\\t\\t\\t\\t\\tsrcTimerAnimation.restart();\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tmessageElement.style.transform = 'none';\\n\\t\\t\\t\\tif (messageContrainer) {\\n\\t\\t\\t\\t\\tmessageContrainer.style.transform = 'none';\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\talternate: returnAck,\\n\\t\\t});\\n\\treturn animation;\\n}\\n\\nexport function logMessageFromLeaderToFollowers(withAck, value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\\n\\tvar nodeAAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_A, withAck, false, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\\n\\tvar nodeBAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_B, withAck, false, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\\n\\n\\treturn [nodeAAnimation,nodeBAnimation];\\n}\\nexport function logMessageAckFromFollowersToLeader(value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\\n\\tvar nodeAAnimation = sendLogMessage(Constants.NODE_A,Constants.NODE_C, false, true, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\\n\\tvar nodeBAnimation = sendLogMessage(Constants.NODE_B,Constants.NODE_C, false, true, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\\n\\n\\treturn [nodeAAnimation,nodeBAnimation];\\n}\\nexport function getFinishPromises(animations) {\\n\\tvar animationPromises = [];\\n\\tanimations.forEach(currentAnimation => {\\n\\t\\tanimationPromises.push(currentAnimation.finished);\\n\\t});\\n\\treturn animationPromises;\\n}\\n\\nexport function messageFromC(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination === Constants.NODE_B) {\\n\\t\\ttranslateX = -140;\\n\\t\\ttranslateY = -276;\\n\\t\\ttargets = '#node-c-message-to-b';\\n\\t} else if (destination === Constants.NODE_A) {\\n\\t\\ttargets = '#node-c-message-to-a';\\n\\t\\ttranslateX = -275;\\n\\t} else if (destination === Constants.CLIENT_NODE) {\\n\\t\\ttargets = '#node-c-message-to-client';\\n\\t\\ttranslateX = -130;\\n\\t\\ttranslateY = 135;\\n\\t}\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: params.alternate?'alternate':'normal',\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function messageFromA(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination === Constants.NODE_B) {\\n\\t\\ttranslateX = 160;\\n\\t\\ttranslateY = -290;\\n\\t\\ttargets = '#node-a-message-to-b';\\n\\t} else if (destination === Constants.NODE_C) {\\n\\t\\ttranslateX = 275;\\n\\t\\ttargets = '#node-a-message-to-c';\\n\\t}\\n\\telse if (destination === Constants.CLIENT_NODE) {\\n\\t\\ttranslateX = 150;\\n\\t\\ttranslateY = 148;\\n\\t\\ttargets = '#node-a-message-to-client';\\n\\t}\\n\\telse {\\n\\t\\tconsole.warning('Unsupported destination: ' + destination);\\n\\t\\treturn;\\n\\t}\\n\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: (params.alternate?'alternate':'normal'),\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function messageFromB(destination, params) {\\n\\tvar translateX = 0;\\n\\tvar translateY = 0;\\n\\tvar targets = \\\"\\\";\\n\\tif (destination === Constants.NODE_A) {\\n\\t\\ttranslateX = -160;\\n\\t\\ttranslateY = 290;\\n\\t\\ttargets = '#node-b-message-to-a';\\n\\t} else if (destination === Constants.NODE_C) {\\n\\t\\ttranslateX = 140;\\n\\t\\ttranslateY = 276;\\n\\t\\ttargets = '#node-b-message-to-c';\\n\\t}\\n\\telse {\\n\\t\\tconsole.warning('Unsupported destination: ' + destination);\\n\\t\\treturn;\\n\\t}\\n\\n\\n\\tvar animation = anime({\\n\\t\\ttargets: targets,\\n\\t\\ttranslateX: translateX,\\n\\t\\ttranslateY: translateY,\\n\\t\\teasing: 'linear',\\n\\t\\tduration: 1000,\\n\\t\\tdirection: (params.alternate?'alternate':'normal'),\\n\\t\\tbegin: params.onBegin,\\n\\t\\tchangeComplete: params.onChangeComplete,\\n\\t\\tcomplete: params.onComplete,\\n\\t\\tdelay: params.delay?params.delay:0\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function getSetValueText(value) {\\n\\treturn \\\"Value: \\\" + value;\\n}\\n\\nexport function partitionNodeC() {\\n\\tvar nodeCPartition = document.getElementById('node-c-partition-wrap');\\n\\tshowElement(nodeCPartition);\\n}\\n\\n/**\\n * Calls `startLeaseTimer` for a leader node's 'My Lease' timer.\\n * @param {*} forNode \\n * @param {Object} config \\n * @param {number} config.duration Duration of animation in milliseconds\\n * @param {number} config.targetPercent Percentage of timer at end of animation\\n * @param {number} config.startPercent Percentage of timer at start of animation\\n * @param {boolean} config.disableAutoPlay Whether to set autoplay for animation\\n */\\nexport function startMyLeaseTimer(forNode, config){\\n\\tvar targetId = myLeaseTimerId(forNode);\\n\\tconst { duration, targetPercent, startPercent, disableAutoPlay } = config;\\n\\treturn startLeaseTimer(targetId, duration, targetPercent, startPercent, disableAutoPlay);\\n}\\n/**\\n * Calls `startLeaseTimer` for a follower node's 'Leader Lease' timer.\\n * @param {*} forNode \\n * @param {Object} config \\n * @param {number} config.duration Duration of animation in milliseconds\\n * @param {number} config.targetPercent Percentage of timer at end of animation\\n * @param {number} config.startPercent Percentage of timer at start of animation\\n * @param {boolean} config.disableAutoPlay Whether to set autoplay for animation\\n */\\nexport function startLeaderLeaseTimer(forNode, config){\\n\\tvar targetId = leaderLeaseTimerId(forNode);\\n\\tconst { duration, targetPercent, startPercent, disableAutoPlay } = config;\\n\\treturn startLeaseTimer(targetId, duration, targetPercent, startPercent, disableAutoPlay);\\n}\\n\\n/**\\n * Function that returns animation for a lease timer. This animation will run for\\n * a specific `duration` until it reaches the specified `percent` limit.\\n * @param {string} targetId String of html element id for this animation to run on\\n * @param {number} duration Milliseconds until animation finishes\\n * @param {number} targetPercent  Target percentage to be remaining after animation is over, default is 0.\\n * @param {number} startPercentage From what percentage to start animation from\\n * @param {boolean} disableAutoPlay Sets whether the animation should autoplay, most times should be true but\\n * sometimes you need to disable it.\\n */\\nexport function startLeaseTimer(targetId, duration, targetPercent = 0, startPercent = 100, disableAutoPlay){\\n\\tvar timer = document.getElementById(targetId);\\n\\tshowElement(timer);\\n\\tvar innerRect = document.getElementById(targetId + '-inner');\\n\\tconst startWidth = startPercent / 100.0 * 80;\\n\\tconst targetWidth = targetPercent / 100.0 * 80;\\n\\tvar animation = anime({\\n\\t\\ttargets: innerRect,\\n\\t\\twidth: [startWidth, targetWidth], // calculatedWidth,\\n\\t\\teasing: 'easeOutCubic',\\n\\t\\tduration: duration,\\n\\t\\tautoplay: !disableAutoPlay,\\n\\t});\\n\\treturn animation;\\n}\\n\\nexport function myLeaseTimerId(forNode) {\\n\\treturn constructTimerId(\\\"mlease-rect-\\\", forNode);\\n}\\n\\nexport function leaderLeaseTimerId(forNode) {\\n\\treturn constructTimerId(\\\"llease-rect\\\", forNode);\\n}\\n\\nfunction constructTimerId(prefix, forNode) {\\n\\tvar id = prefix;\\n\\tswitch(forNode) {\\n\\t\\tcase Constants.NODE_C: {\\n\\t\\t\\tid += \\\"node-c\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_B: {\\n\\t\\t\\tid += \\\"node-b\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tcase Constants.NODE_A: {\\n\\t\\t\\tid += \\\"node-a\\\";\\n\\t\\t\\tbreak;\\n\\t\\t}\\n\\t\\tdefault: {\\n\\t\\t\\tconsole.error(\\\"Unrecognized Node: \\\" + forNode);\\n\\t\\t}\\n\\t}\\n\\treturn id;\\n}\\n\",\"import React from 'react';\\n\\nconst SmallClock = () => {\\n  return (\\n    <svg width=\\\"100\\\" height=\\\"100\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n        <g id=\\\"analog-clock\\\" transform=\\\"translate(10,10)\\\">\\n          <circle id=\\\"face\\\" stroke=\\\"black\\\" strokeWidth=\\\"3px\\\" cx=\\\"10\\\" cy=\\\"20\\\" r=\\\"10\\\" fill=\\\"transparent\\\"/>\\n          <g id=\\\"hands\\\">\\n            <rect id=\\\"hour\\\" x=\\\"9\\\" y=\\\"12\\\" width=\\\"2\\\" height=\\\"10\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"555\\\" />\\n            <rect id=\\\"min\\\" x=\\\"9\\\" y=\\\"20\\\" width=\\\"9\\\" height=\\\"2\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"555\\\" />\\n          </g>\\n        </g>\\n    </svg>\\n  )\\n}\\n\\nexport default SmallClock;\\n\",\"import React, { Component } from 'react';\\n\\nclass HorizontalTimer extends Component {\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<g transform=\\\"translate(10,10)\\\" className={this.props.className} id={this.props.uid}>\\n\\t\\t\\t\\t<text x={this.props.x + 36} y={this.props.y - 4} fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t{this.props.label}\\n\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t<rect id={this.props.uid + '-inner'} x={this.props.x + 32} y={this.props.y} width=\\\"80\\\" height=\\\"6\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"1px\\\" fill=\\\"#333\\\" stroke=\\\"#555\\\" />\\n\\t\\t\\t\\t<rect id={this.props.uid + '-outer'} x={this.props.x + 32} y={this.props.y} width=\\\"80\\\" height=\\\"7\\\" rx=\\\"2.5\\\" ry=\\\"2.55\\\" strokeWidth=\\\"2px\\\" fill=\\\"transparent\\\" stroke=\\\"black\\\" />}\\n\\t\\t\\t</g>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default HorizontalTimer;\\n\",\"import React, { Component } from 'react';\\n\\nimport SmallClock from './SmallClock';\\nimport HorizontalTimer from './HorizontalTimer';\\nimport {Constants} from '../constants';\\n\\nvar HelperFunctions = require('../HelperFunctions');\\n\\n\\n// starting position of nodes\\nconst nodeABaseXPos = 42;\\nconst nodeABaseYPos = 324;\\n\\nconst nodeCBaseXPos = 320;\\nconst nodeCBaseYPos = 324;\\n\\nconst nodeBBaseXPos = 168;\\nconst nodeBBaseYPos = 42;\\n\\nconst clientNodeXPos = 186;\\nconst clientNodeYPos = 550;\\n\\nexport const clientNodePositions = {\\n\\tmainText: {\\n\\t\\tx: clientNodeXPos,\\n\\t\\ty: clientNodeYPos + 9\\n\\t},\\n\\tclientMessage: {\\n\\t\\tx: clientNodeXPos,\\n\\t\\ty: clientNodeYPos - 72\\n\\t},\\n}\\n\\nexport const nodeAPositions = {\\n\\tbase: {\\n\\t\\tx: nodeABaseXPos,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tmessageToB: {\\n\\t\\tx: nodeABaseXPos + 6,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tmessageToClient: {\\n\\t\\tx: nodeABaseXPos + 6,\\n\\t\\ty: nodeABaseYPos\\n\\t},\\n\\tleaseTimer: {\\n\\t\\tx: nodeABaseXPos - 48,\\n\\t\\ty: nodeABaseYPos + 95\\n\\t}\\n}\\n\\nexport const nodeCPositions = {\\n\\tbase: {\\n\\t\\tx: nodeCBaseXPos,\\n\\t\\ty: nodeCBaseYPos\\n\\t},\\n\\tmessageToB: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tmessageToA: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tmessageToClient: {\\n\\t\\tx:nodeCBaseXPos+32 ,\\n\\t\\ty:nodeCBaseYPos\\n\\t},\\n\\tpartitionText1: {\\n\\t\\tx: nodeCBaseXPos - 80,\\n\\t\\ty: nodeCBaseYPos - 70\\n\\t},\\n\\tpartitionText2: {\\n\\t\\tx: nodeCBaseXPos - 80,\\n\\t\\ty: nodeCBaseYPos - 55\\n\\t}\\n}\\n\\nexport const nodeBPositions = {\\n\\tbase: {\\n\\t\\tx: nodeBBaseXPos,\\n\\t\\ty: nodeBBaseYPos\\n  },\\n  messageToA: {\\n\\t\\tx: nodeBBaseXPos - 10,\\n\\t\\ty: nodeBBaseYPos\\n\\t},\\n\\tmessageToC: {\\n\\t\\tx: nodeBBaseXPos + 32,\\n\\t\\ty: nodeBBaseYPos\\n\\t},\\n}\\n\\nclass MainDiagram extends Component {\\n\\n\\trender() {\\n\\t\\t// Initialize variables for each node location\\n\\t\\t// These are numbers so we can't destructure..\\n\\t\\tconst clientX = clientNodePositions.clientMessage.x;\\n\\t\\tconst clientY = clientNodePositions.clientMessage.y;\\n\\t\\tconst nodeAX = nodeAPositions.base.x;\\n\\t\\tconst nodeAY = nodeAPositions.base.y;\\n\\t\\tconst nodeBX = nodeBPositions.base.x;\\n\\t\\tconst nodeBY = nodeBPositions.base.y;\\n\\t\\tconst nodeCX = nodeCPositions.base.x;\\n\\t\\tconst nodeCY = nodeCPositions.base.y;\\n\\n\\t\\treturn (\\n\\t\\t\\t<svg height=\\\"500\\\" width=\\\"720\\\">\\n\\t\\t\\t\\t{/* reusable analog clock */}\\n\\t\\t\\t\\t<defs>\\n\\t\\t\\t\\t\\t<SmallClock/>\\n\\t\\t\\t\\t</defs>\\n\\n\\t\\t\\t\\t{/* Center text area */}\\n\\t\\t\\t\\t<foreignObject x={30} y={160} width=\\\"400\\\" height=\\\"300\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"center-message-text\\\" style={{fontFamily: 'Verdana', fontSize: '1em', padding: '30px'}}></div>\\n\\t\\t\\t\\t</foreignObject>\\n\\t\\t\\t\\t<g>\\n\\t\\t\\t\\t\\t<text id=\\\"center-message-rect\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={clientX} y={170} fontFamily=\\\"Verdana\\\" fontSize=\\\"1em\\\">\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"center-message-text1\\\" x={50} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"center-message-text2\\\" x={50} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t{/* smaller circles */}\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-b\\\" className=\\\"node-small-circle\\\" cx={nodeCPositions.messageToB.x} cy={nodeCPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-a\\\" className=\\\"node-small-circle\\\" cx={nodeCPositions.messageToA.x} cy={nodeCPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-c-message-to-client\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeCPositions.messageToClient.x} cy={nodeCPositions.messageToClient.y} />\\n\\n\\t\\t\\t\\t{/* partition around C */}\\n\\t\\t\\t\\t<g id=\\\"node-c-partition-wrap\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<path d=\\\"M250,360a83,75,0,1,1,190,-15\\\" id=\\\"node-c-partition\\\" className=\\\"node-partition\\\"/>\\n\\t\\t\\t\\t\\t<text fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t\\t<tspan x={nodeCPositions.partitionText1.x} y={nodeCPositions.partitionText1.y}>Partitioned</tspan>\\n\\t\\t\\t\\t\\t\\t<tspan x={nodeCPositions.partitionText2.x} y={nodeCPositions.partitionText2.y}>from A & B</tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t<g>\\n\\t\\t\\t\\t\\t{/* Node A text with white background */}\\n\\t\\t\\t\\t\\t<rect id=\\\"client-message-status-bg\\\" className=\\\"visibility-hidden\\\" x={clientX - 92} y={clientY - 152} fill=\\\"white\\\" width=\\\"210\\\" height=\\\"76\\\"></rect>\\n\\t\\t\\t\\t\\t<text id=\\\"client-query-message\\\" x={clientX - 90} y={clientY - 148} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-anchor\\\" x={clientX - 80} dy=\\\"1.2em\\\">Query: </tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text1\\\" dx={5} className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text2\\\" x={clientX - 83} dy=\\\"1.2em\\\" className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"client-query-message-text3\\\" x={clientX - 83} dy=\\\"1.2em\\\" className=\\\"code-block\\\"></tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<foreignObject x={clientX - 85} y={clientY - 148} width=\\\"200\\\" height=\\\"70\\\">\\n\\t\\t\\t\\t\\t\\t<div id=\\\"client-message-status\\\"></div>\\n\\t\\t\\t\\t\\t</foreignObject>\\n\\n\\t\\t\\t\\t\\t<path id=\\\"client-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\td={`M${clientX + 3},${clientY - 50} l0,-26 l-90,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l200,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-90,0 z`}\\n\\t\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t<g id=\\\"client-message\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"client-message-circle\\\" className=\\\"client-message\\\" cx={clientX} cy={clientY}/>\\n\\t\\t\\t\\t\\t<text id=\\\"client-message-text\\\" x={clientX - 18} y={clientY + 24}>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\t\\t\\t\\t<image href=\\\"./warning-sign.jpg\\\" width=\\\"200\\\" x=\\\"0\\\" y=\\\"0\\\" />\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t<circle id=\\\"node-b-small-circle\\\" className=\\\"node-small-circle\\\" cx={nodeBX + 24} cy={nodeBY + 12} />\\n\\n\\t\\t\\t\\t<circle id=\\\"node-a-message-to-b\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\\n        \\t\\t<circle id=\\\"node-a-message-to-c\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\\n\\t\\t\\t\\t<circle id=\\\"node-a-message-to-client\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeAPositions.messageToClient.x} cy={nodeAPositions.messageToClient.y} />\\n\\n\\t\\t\\t\\t{/* node C */}\\n\\n\\t\\t\\t\\t{/* main and outer circles */}\\n\\t\\t\\t\\t<g id=\\\"node-c-wrap\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"node-c-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeCX + 32} cy={nodeCY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t\\t\\t<circle id=\\\"node-c-circle\\\" cx={nodeCX + 32} cy={nodeCY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t\\t\\t<text id=\\\"node-c-main-text\\\" x={nodeCX + 30} y={nodeCY + 6} className=\\\"node-text\\\" fill=\\\"black\\\">\\n\\t\\t\\t\\t\\t\\tNode C\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 93}\\n\\t\\t\\t\\t\\tlabel={\\\"My Lease\\\"}/>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 93}\\n\\t\\t\\t\\t\\tlabel={\\\"Leader Lease\\\"}/>\\n\\t\\t\\t\\t</g>\\n\\n\\t\\t\\t\\t<g>\\n\\t\\t\\t\\t\\t<rect id=\\\"node-c-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={nodeCX + 5} y={nodeCY + 62} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n\\t\\t\\t\\t\\t<text id=\\\"node-c-term-text-rect\\\" x={nodeCX + 10} y={nodeCY + 40} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"node-c-term-text\\\" x={nodeCX + 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"node-c-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeCX + 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t\\t<tspan id=\\\"node-c-extra-text2\\\" className=\\\"node-extra-text2\\\" dx=\\\"0.5em\\\" ></tspan>\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t</g>\\n\\n        \\t\\t{/* Node C bubble text area */}\\n\\t\\t\\t\\t<foreignObject x={nodeCX - 15} y={nodeCY - 174} width=\\\"235\\\" height=\\\"80\\\">\\n\\t\\t\\t\\t\\t<div id=\\\"node-c-message-text-alt\\\"></div>\\n\\t\\t\\t\\t</foreignObject>\\n\\t\\t\\t\\t<text id=\\\"node-c-message-status\\\" x={nodeCX - 10} y={nodeCY - 130} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-message-status-text1\\\" x={nodeCX - 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t\\t<tspan id=\\\"node-c-message-status-text2\\\" x={nodeCX - 10} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t<path id=\\\"node-c-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\td={`M${nodeCX + 40},${nodeCX - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l215,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-140,0 z`}\\n\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n        \\t\\t<path id=\\\"node-c-message-bubble-alt\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\td={`M${nodeCX + 45},${nodeCX - 50} l15,-40 l-80,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l235,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-135,0 z`}\\n\\t\\t\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\n\\t\\t\\t\\t{/* node A */}\\n\\n\\t\\t\\t\\t{/* main and outer circles */}\\n\\t\\t\\t\\t<g id=\\\"node-a-wrap\\\">\\n\\t\\t\\t\\t\\t<circle id=\\\"node-a-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeAX} cy={nodeAY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t\\t\\t<circle id=\\\"node-a-circle\\\" cx={nodeAX} cy={nodeAY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t\\t\\t<text id=\\\"node-a-main-text\\\" x={nodeAX} y={nodeAY + 6} className=\\\"node-text\\\">\\n\\t\\t\\t\\t\\t\\tNode A\\n\\t\\t\\t\\t\\t</text>\\n\\t\\t\\t\\t\\t<rect id=\\\"node-a-timer-highlight\\\" className=\\\"visibility-hidden\\\"\\n            \\t\\t\\tx={nodeAPositions.leaseTimer.x + 18} y={nodeAPositions.leaseTimer.y - 12} width=\\\"75\\\" height=\\\"20\\\" fill=\\\"yellow\\\"></rect>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y} label={\\\"My Lease\\\"}/>\\n\\t\\t\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y} label={\\\"Leader Lease\\\"}/>\\n\\t\\t\\t\\t</g>\\n\\n        {/* text */}\\n        <g>\\n          <rect id=\\\"node-a-term-highlight\\\" className=\\\"visibility-hidden\\\"\\n            x={nodeAX - 30} y={nodeAY + 41} width=\\\"63\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <rect id=\\\"node-a-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\tx={nodeAX - 30} y={nodeAY + 62} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <text id=\\\"node-a-term-text-rect\\\" x={nodeAX} y={nodeAY + 40} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n            <tspan id=\\\"node-a-term-text\\\" x={nodeAX - 24} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-a-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeAX - 24} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-a-extra-text2\\\" className=\\\"node-extra-text2\\\" dx=\\\"0.5em\\\"></tspan>\\n          </text>\\n        </g>\\n\\n\\t\\t{/* node B */}\\n        <circle id=\\\"node-b-message-to-a\\\" className=\\\"node-small-circle visibility-hidden\\\" cx={nodeBPositions.messageToA.x} cy={nodeBPositions.messageToA.y} />\\n        <circle id=\\\"node-b-message-to-c\\\" className=\\\"node-small-circle visibility-visible log-message\\\" cx={nodeBPositions.messageToC.x} cy={nodeBPositions.messageToC.y} />\\n\\n\\t\\t{/* main and outer circles */}\\n\\t\\t<g id=\\\"node-b-wrap\\\">\\n\\t\\t\\t<circle id=\\\"node-b-circle\\\" cx={nodeBX + 24} cy={nodeBY} r=\\\"35\\\" stroke=\\\"rgb(70, 130, 180)\\\" strokeWidth=\\\"0\\\" fill=\\\"rgb(70, 130, 180)\\\" />\\n\\t\\t\\t<circle id=\\\"node-b-outer-circle\\\" className=\\\"node-outer-circle\\\" cx={nodeBX + 24} cy={nodeBY} r=\\\"38\\\" stroke=\\\"rgb(158, 196, 226)\\\" strokeWidth=\\\"6\\\" fill=\\\"transparent\\\" />\\n\\t\\t\\t<text id=\\\"node-b-main-text\\\" x={nodeBX + 24} y={nodeBY + 6} className=\\\"node-text\\\">\\n\\t\\t\\t\\tNode B\\n\\t\\t\\t</text>\\n\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 95} label={\\\"My Lease\\\"}/>\\n\\t\\t\\t<HorizontalTimer className=\\\"visibility-hidden\\\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 95} label=\\\"Leader Lease\\\"/>\\n\\t\\t</g>\\n\\n        {/* text */}\\n        <g>\\n          <rect id=\\\"node-b-term-highlight\\\" className=\\\"visibility-hidden\\\"\\n              x={nodeBX - 6} y={nodeBY + 45} width=\\\"63\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <rect id=\\\"node-b-text-highlight\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t\\t\\t\\tx={nodeBX - 6} y={nodeBY + 65} width=\\\"55\\\" height=\\\"24\\\" fill=\\\"yellow\\\"></rect>\\n          <text id=\\\"node-b-term-text-rect\\\" x={nodeBX} y={nodeBY + 43} fill=\\\"black\\\" className=\\\"visibility-hidden\\\">\\n            <tspan id=\\\"node-b-term-text\\\" x={nodeBX} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-b-extra-text\\\" className=\\\"node-extra-text\\\" x={nodeBX} dy=\\\"1.2em\\\"></tspan>\\n            <tspan id=\\\"node-b-extra-text2\\\" className=\\\"node-extra-text2\\\" dx={\\\"0.5em\\\"}></tspan>\\n          </text>\\n        </g>\\n\\n\\t\\t{/* Node A text with white background */}\\n\\t\\t<rect id=\\\"node-a-message-status-bg\\\" className=\\\"visibility-hidden\\\" x={nodeAX - 40} y={nodeAY - 167} fill=\\\"white\\\" width=\\\"207\\\" height=\\\"100\\\"></rect>\\n        <foreignObject x={nodeAX - 32} y={nodeAY - 155} width=\\\"200\\\" height=\\\"80\\\">\\t\\n\\t\\t\\t<div id=\\\"node-a-message-status\\\"></div>\\n\\t\\t</foreignObject>\\n\\t\\t{/* speech bubble */}\\n\\t\\t<path id=\\\"node-a-message-bubble\\\" className=\\\"visibility-hidden\\\"\\n\\t\\t\\t// d={`M${nodeAX + 20},${nodeAY - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l170,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-90,0 z`}\\n\\t\\t\\td=\\\"M62,284 l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-90 c0,0 0,-5 5,-5 l196,0 c0,0 5,0 5,5 l0,90 c0,0 0,5 -5,5 l-126,0 z\\\"\\n\\t\\t\\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\\n\\n\\t\\t{/* client node */}\\n\\t\\t<g id=\\\"client-node\\\" className=\\\"visibility-visible\\\">\\n\\t\\t\\t<circle className=\\\"client-node\\\" cx={clientNodeXPos} cy={clientNodeYPos} />\\n\\t\\t\\t<text id=\\\"client-node-main-text\\\" x={clientNodeXPos} y={clientNodeYPos + 9} className=\\\"client-node-text\\\">\\n\\t\\t\\t\\tClient\\n\\t\\t\\t</text>\\n\\t\\t\\t<text id=\\\"client-node-value\\\" x={clientNodeXPos + 40} y={clientNodeYPos + 9}></text>\\n\\t\\t\\t<text id=\\\"client-node-value-alt\\\" x={clientNodeXPos + 40} y={clientNodeYPos + 9} className=\\\"visibility-hidden\\\">\\n\\t\\t\\t\\t<tspan fill=\\\"red\\\" x={clientNodeXPos + 40} fontSize=\\\"1.5em\\\"></tspan>\\n\\t\\t\\t\\t<tspan id=\\\"client-node-value-error-header\\\" dx=\\\"4px\\\"></tspan>\\n\\t\\t\\t\\t<tspan id=\\\"client-node-value-error-subtitle\\\" fill=\\\"red\\\" x={clientNodeXPos + 40} dy=\\\"1.2em\\\"></tspan>\\n\\t\\t\\t</text>\\n\\t\\t</g>\\n\\n\\t\\t{/* lease messages */}\\n\\t\\t<g id=\\\"node-c-lease-to-node-a\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeCX + 6} y={nodeCY - 36}/>\\n\\t\\t</g>\\n\\t\\t<g id=\\\"node-c-lease-to-node-b\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeCX + 24} y={nodeCY - 36}/>\\n\\t\\t</g>\\n\\n\\t\\t<g id=\\\"node-a-lease-to-node-b\\\" className=\\\"visibility-hidden\\\">\\n\\t\\t\\t<use href=\\\"#analog-clock\\\" x={nodeAX} y={nodeAY - 36}/>\\n\\t\\t</g>\\n\\n\\t</svg>\\n\\n\\t\\t);\\n\\t}\\n}\\nexport default MainDiagram;\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_UNSAFE_READ = \\\"ANIMATION_STATE_UNSAFE_READ\\\";\\nconst ANIMATION_STATE_NODE_C_PARTITIONED = \\\"ANIMATION_STATE_NODE_C_PARTITIONED\\\";\\nconst ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER = \\\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\\\";\\nconst ANIMATION_STATE_CLIENT_SET_OPERATION = 'ANIMATION_STATE_CLIENT_SET_OPERATION';\\nconst ANIMATION_STATE_CLIENT_READ_FROM_NODE_C = 'ANIMATION_STATE_CLIENT_READ_FROM_NODE_C';\\nconst ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER = \\\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\\\";\\nconst ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE = 'ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE';\\n\\nconst SET_VALUE2=\\\"V2\\\";\\n\\nexport class ReadOperationAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      animationFinished: false,\\n      previousEnabled: true,\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t}\\n\\n\\tpause() {\\n\\t}\\n\\tresume() {\\n\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++) {\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n\\t\\t\\t\\t\\t// make Node C the Leader\\n\\t\\t\\t\\t\\tvar nodeC = document.getElementById('node-c-circle');\\n\\t\\t\\t\\t\\tnodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_UNSAFE_READ: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const nodeCText = document.getElementById('node-c-message-text-alt')\\n        const contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Unsafe to read from raft leader without majority heartbeats. This sequence explains why.'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeCText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            this.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NODE_C_PARTITIONED: {\\n\\t\\t\\t\\tthis.changeMainText('');\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Now imagine raft leader C gets\\\\n partitioned from followers\\\\n[but not from client]'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            HelperFunctions.partitionNodeC()\\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\\n        document.getElementById('node-c-message-text-alt').innerText = '';\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'This results in A and B\\\\n electing a new raft\\\\nleader, say A.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 1300,\\n          update: function() {\\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_SET_OPERATION: {\\n        /**\\n         *  Update: (monospaced) UPDATE T SET value = V2 WHERE key = k \\n         *  (Get rid of committed but leave uncommitted and change node\\n         *  subtext to k: V1, and highlight the value. \\n         *  After Node A sends msg to client, show Client: Update successful!\\n         */\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.introduceClient();\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'UPDATE T SET'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'value = V2 WHERE'\\n        }\\n        const clientContent3 = {\\n          index: 0,\\n          str: ' key = k'\\n        }\\n        \\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        const statusText3 = document.getElementById('client-query-message-text3');\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 400,\\n              update: function () {\\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                anime({\\n                  targets: clientContent3,\\n                  index: clientContent3.str.length,\\n                  easing: 'linear',\\n                  duration: 400,\\n                  update: function () {\\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                  },\\n                  complete: () => {   \\n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n                    animation.finished.then(() => {\\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\\n                      nodeAToBAnimation.finished.then(() => {\\n                        document.getElementById('client-query-message-text1').innerHTML = '';\\n                        document.getElementById('client-query-message-text2').innerHTML = '';\\n                        document.getElementById('client-query-message-text3').innerHTML = '';\\n                        HelperFunctions.hideElement(clientMessageBubble);\\n                        HelperFunctions.hideElement(clientQueryMessage);\\n                        HelperFunctions.showElement(nodeAMessageBubble);\\n                        \\n                        // send commit confirmation back to B\\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\\n                        nodeAExtraText.innerHTML = '(k, V2)';\\n                        HelperFunctions.showElement(nodeAExtraHighlight);\\n                        HelperFunctions.hideElement(nodeAExtraText2);\\n\\n                        aToBAnim.finished.then(() => {\\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\\n                        });\\n\\n                        nodeAMessageStatus.innerHTML = '';\\n                        HelperFunctions.hideElement(nodeAMessageBubble);\\n\\n                        // notify client as well\\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\\n\\n                        messageToClientAnimation.finished.then(() => {\\n                          HelperFunctions.showElement(clientMessageBubble);\\n                          HelperFunctions.hideElement(clientQueryMessage);\\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\\n                          resolve({\\n                            animationState: this.animationState,\\n                            delay: 100,\\n                          });\\n                        });\\n                      });\\n                    })\\n                  }\\n                });\\n              }\\n            });\\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-a-text-highlight'));\\n        HelperFunctions.hideElement(document.getElementById('node-b-text-highlight'));\\n        document.getElementById('client-query-message-text1').innerHTML = ''\\n        document.getElementById('client-query-message-text2').innerHTML = ''\\n        document.getElementById('client-query-message-text3').innerHTML = ''\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        \\n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\\n        this.changeMainText('');\\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n\\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'SELECT value'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'FROM T WHERE key = k'\\n        }\\n\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                });\\n              }\\n            }); \\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'C thinks it is the raft leader.\\\\nWithout majority heartbeats,\\\\nC will respond with value = V1'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE, false);\\n            animation.finished.then(() => {\\n              HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\\n              document.getElementById('client-node-value-error-header').innerHTML = 'Value: V1';\\n              document.getElementById('client-node-value-error-subtitle').innerHTML = 'Expected value = V2';\\n            });\\n            this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n            this.setState({ animationFinished: true });\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t}\\n\\t}\\n\\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n  \\n  onPreviousInternal(resolve, reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n    // MISC\\n    const partitionWrap = document.getElementById('node-c-partition-wrap');\\n\\n    switch(this.animationState) {\\n      case ANIMATION_STATE_UNSAFE_READ: {\\n        let nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        HelperFunctions.hideElement(nodeATextContainer);\\n        HelperFunctions.hideElement(nodeBTextContainer);\\n        HelperFunctions.hideElement(nodeCTextContainer);\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n        this.changeMainText('');\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_C_PARTITIONED: {\\n        let nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerText = '';\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n        this.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          nodeC.classList.add('leader-node');\\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\\n        HelperFunctions.hideElement(partitionWrap);\\n        const nodeCText = document.getElementById('node-c-message-text-alt')\\n        nodeCText.innerText = '';\\n        const contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Unsafe to read from raft leader without majority heartbeats. This sequence explains why.'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeCText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            this.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SET_OPERATION: {\\n        var nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-node');\\n        HelperFunctions.hideElement(partitionWrap);\\n        nodeATermText.innerHTML = 'Term: 1';\\n        nodeBTermText.innerHTML = 'Term: 1';\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        nodeAMessageStatus.innerText = '';\\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Now imagine raft leader C gets\\\\n partitioned from followers\\\\n[but not from client]'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            HelperFunctions.showElement(partitionWrap);\\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('client-node'));\\n        HelperFunctions.hideElement(document.getElementById('client-message-circle'));\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        nodeAExtraText.innerText = '(k, V1)';\\n        nodeBExtraText.innerText = '(k, V1)';\\n        HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 1\\\"});\\n        HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 1\\\"});\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'This results in A and B\\\\n electing a new raft\\\\nleader, say A.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 1300,\\n          update: function() {\\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\\n        this.changeMainText('');\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.introduceClient();\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'UPDATE T SET'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'value = V2 WHERE'\\n        }\\n        const clientContent3 = {\\n          index: 0,\\n          str: ' key = k'\\n        }\\n        \\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        const statusText3 = document.getElementById('client-query-message-text3');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        statusText3.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 400,\\n              update: function () {\\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                anime({\\n                  targets: clientContent3,\\n                  index: clientContent3.str.length,\\n                  easing: 'linear',\\n                  duration: 400,\\n                  update: function () {\\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                  },\\n                  complete: () => {   \\n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n                    animation.finished.then(() => {\\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\\n                      nodeAToBAnimation.finished.then(() => {\\n                        document.getElementById('client-query-message-text1').innerHTML = '';\\n                        document.getElementById('client-query-message-text2').innerHTML = '';\\n                        document.getElementById('client-query-message-text3').innerHTML = '';\\n                        HelperFunctions.hideElement(clientMessageBubble);\\n                        HelperFunctions.showElement(nodeAMessageBubble);\\n                        \\n                        // send commit confirmation back to B\\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\\n                        nodeAExtraText.innerHTML = '(k, V2)';\\n                        HelperFunctions.showElement(nodeAExtraHighlight);\\n                        HelperFunctions.hideElement(nodeAExtraText2);\\n\\n                        aToBAnim.finished.then(() => {\\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\\n                        });\\n\\n                        nodeAMessageStatus.innerHTML = '';\\n                        HelperFunctions.hideElement(nodeAMessageBubble);\\n\\n                        // notify client as well\\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\\n\\n                        messageToClientAnimation.finished.then(() => {\\n                          HelperFunctions.showElement(clientMessageBubble);\\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\\n                          resolve({\\n                            animationState: this.animationState,\\n                            delay: 100,\\n                          });\\n                        });\\n                      });\\n                    })\\n                  }\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\n\\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n        });\\n        break;\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.setState({ animationFinished: false });\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n\\n        const statusText1 = document.getElementById('client-query-message-text1');\\n        const statusText2 = document.getElementById('client-query-message-text2');\\n        statusText1.innerHTML = '';\\n        statusText2.innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        HelperFunctions.showElement(clientMessageBackground);\\n        HelperFunctions.showElement(clientQueryMessage);\\n\\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\\n\\n        const clientContent1 = {\\n          index: 0,\\n          str: 'SELECT value'\\n        }\\n        const clientContent2 = {\\n          index: 0,\\n          str: 'FROM T WHERE key = k'\\n        }\\n\\n        anime({\\n          targets: clientContent1,\\n          index: clientContent1.str.length,\\n          easing: 'linear',\\n          duration: 400,\\n          update: function() {\\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: clientContent2,\\n              index: clientContent2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\\n              },\\n              complete: () => {\\n                HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                });\\n              }\\n            }); \\n          }\\n        });\\n        break;\\n      }\\n      default:\\n        console.error('Unrecognized state: ' + this.animationState);\\n    }\\n  }\\n\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n  }\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default ReadOperationAnimation;\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_EXPLAIN_PROTOCOL = 'ANIMATION_STATE_EXPLAIN_PROTOCOL';\\nconst ANIMATION_STATE_LEADER_ELECTION = 'ANIMATION_STATE_LEADER_ELECTION';\\nconst ANIMATION_STATE_NODE_DATA = 'ANIMATION_STATE_NODE_DATA';\\nconst ANIMATION_STATE_CLIENT_INTRODUCED = 'ANIMATION_STATE_CLIENT_INTRODUCED';\\nconst ANIMATION_STATE_PERFORMED_READ_ON_LEADER = \\\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\\\";\\nconst ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS = \\\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\\\";\\nconst ANIMATION_STATE_CLIENT_FINISH_OPERATION = 'ANIMATION_STATE_CLIENT_FINISH_OPERATION';\\n\\nconst SET_VALUE1=\\\"V1\\\";\\nconst warningSVG = (height = '550.45', width = '627.77') => (\\n\\t\\t`<svg id=\\\"Layer_3\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" height=${height}\\\" width=\\\"${width}\\\" version=\\\"1.0\\\" viewBox=\\\"0 0 627.769 550.45\\\">\\n\\t\\t\\t<path id=\\\"path2231\\\" fill=\\\"#ea0000\\\" d=\\\"m614.57 504.94l-279.4-483.94c-4.38-7.588-12.47-12.262-21.23-12.262s-16.85 4.674-21.23 12.258l-279.41 483.94c-4.375 7.58-4.375 16.93 0.003 24.52 4.379 7.58 12.472 12.25 21.23 12.25h558.81c8.76 0 16.86-4.67 21.23-12.25 4.38-7.59 4.38-16.94 0-24.52z\\\"/>\\n\\t\\t\\t<polygon id=\\\"polygon2233\\\" points=\\\"93.977 482.88 533.9 482.88 313.94 101.89\\\" fill=\\\"#fff\\\"/>\\n\\t\\t\\t<path id=\\\"path2235\\\" d=\\\"m291.87 343.36c1.21 11.49 3.21 20.04 6.02 25.66 2.81 5.63 7.82 8.43 15.04 8.43h2.01c7.22 0 12.24-2.8 15.04-8.43 2.81-5.62 4.82-14.17 6.02-25.66l6.42-88.75c1.21-17.3 1.81-29.71 1.81-37.25 0-10.25-2.91-18.25-8.73-23.99-5.53-5.46-13.38-8.59-21.56-8.59s-16.04 3.13-21.57 8.59c-5.81 5.74-8.72 13.74-8.72 23.99 0 7.54 0.6 19.95 1.8 37.25l6.42 88.75z\\\"/>\\n\\t\\t\\t<circle id=\\\"circle2237\\\" cy=\\\"430.79\\\" cx=\\\"313.94\\\" r=\\\"30.747\\\"/>\\n\\t\\t</svg>`);\\n\\nexport class RaftReadOperationAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      animationFinished: false,\\n      previousEnabled: true,\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t}\\n\\n\\tpause(){ }\\n\\tresume() {\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\t\\t\\t\\t// make Node C the Leader\\n\\t\\t\\t\\t// var nodeC = document.getElementById('node-c-circle');\\n\\t\\t\\t\\t// nodeC.classList.add('leader-node');\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tlet nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (let i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n        }\\n\\n        this.changeMainText('Lets say we have a 3-node raft group.');\\n        this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL;\\n\\n        resolve({\\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_EXPLAIN_PROTOCOL: {\\n\\t\\t\\t\\tthis.changeMainText('Nodes would have performed leader election..', () => {\\n          // Show each text container and then edit the text within them\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n\\n          nodeAExtraText.innerHTML = 'Voted For C';\\n          nodeBExtraText.innerHTML = 'Voted For C';\\n          nodeCExtraText.innerHTML = 'Voted For C';\\n        })\\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION;\\n        resolve({\\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_ELECTION: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-c-message-status'));\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'C is the current raft leader,'\\n        };\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'denoted by a black border.'\\n        };\\n        const statusTextLine1 = document.getElementById('node-c-message-status-text1');\\n        const statusTextLine2 = document.getElementById('node-c-message-status-text2');\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 900,\\n              update: function() {\\n                statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                document.getElementById('node-c-circle').classList.add('leader-node');\\n                nodeATermText.innerHTML = 'Term: 1';\\n                nodeBTermText.innerHTML = 'Term: 1';\\n                nodeCTermText.innerHTML = 'Term: 1';\\n                this.animationState = ANIMATION_STATE_NODE_DATA;\\n                resolve({\\n                  animationState: ANIMATION_STATE_NODE_DATA,\\n                  delay: 100,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_DATA: {\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n\\t\\t\\t\\tthis.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n\\n          HelperFunctions.showElement(nodeAExtraHighlight);\\n          HelperFunctions.showElement(nodeBExtraHighlight);\\n          HelperFunctions.showElement(nodeCExtraHighlight);\\n        });\\n        this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\\n        resolve({\\n          animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\\n        this.changeMainText('');\\n\\n\\t\\t\\t\\tintroduceClientAnimation.finished.then(() => {\\n          HelperFunctions.hideElement(nodeAExtraHighlight);\\n          HelperFunctions.hideElement(nodeBExtraHighlight);\\n          HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n          HelperFunctions.showElement(document.getElementById('client-message'));\\n          const statusElem = document.getElementById('client-query-message');\\n          document.getElementById('client-query-message-text1');\\n          const contentLine1 = {\\n            index: 0,\\n            str: 'SELECT value'\\n          }\\n          const contentLine2 = {\\n            index: 0,\\n            str: 'FROM T WHERE key = k'\\n          }\\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(statusElem);\\n          anime({\\n            targets: contentLine1,\\n            index: contentLine1.str.length,\\n            easing: 'linear',\\n            duration: 600,\\n            update: function() {\\n              statusTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: contentLine2,\\n                index: contentLine2.str.length,\\n                easing: 'linear',\\n                duration: 900,\\n                update: function() {\\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n                },\\n                complete: () => HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false)\\n              });\\n            }\\n          });\\n\\n\\t\\t\\t\\t\\tthis.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\\n\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t})\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\\n\\t\\t\\t\\t// Leader contacts followers to obtain a consensus on current value\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = ''\\n\\t\\t\\t\\tconst statusElem = document.getElementById('node-c-message-status');\\n\\t\\t\\t\\tHelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n\\t\\t\\t\\tHelperFunctions.showElement(statusElem);\\n\\t\\t\\t\\tconst contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Per raft protocol, leader should'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst contentLine2 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'obtain majority heartbeat.'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst leaderTextLine1 = document.getElementById('node-c-message-status-text1');\\n\\t\\t\\t\\tconst leaderTextLine2 = document.getElementById('node-c-message-status-text2')\\n\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\ttargets: contentLine1,\\n\\t\\t\\t\\t\\tindex: contentLine1.str.length,\\n\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\tduration: 800,\\n\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tcomplete: () => {\\n\\t\\t\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\t\\t\\ttargets: contentLine2,\\n\\t\\t\\t\\t\\t\\t\\tindex: contentLine2.str.length,\\n\\t\\t\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\t\\t\\tduration: 1040,\\n\\t\\t\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\t\\t\\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\\n            });\\n            \\n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 1000\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\\n\\n        receivedAckAnimation[0].finished.then(() => {\\n          // Once majority is obtained. The leader returns value back to the client\\n          document.getElementById('node-c-message-status-text1').textContent = 'Leader:';\\n          document.getElementById('node-c-message-status-text2').textContent = '';\\n          const leaderText1 = {\\n            index: 7,\\n            str: 'Majority heartbeat obtained,'\\n          }\\n          const leaderText2 = {\\n            index: 0,\\n            str: 'raft leader can serve read.'\\n          }\\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\\n          anime({\\n            targets: leaderText1,\\n            index: leaderText1.str.length,\\n            easing: 'linear',\\n            duration: 800,\\n            update: function() {\\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: leaderText2,\\n                index: leaderText2.str.length,\\n                easing: 'linear',\\n                duration: 1080,\\n                update: function() {\\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\\n                },\\n                complete: () => {\\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n                  animation.finished.then(() => {\\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\\n\\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\\n                    resolve({\\n                      animationState: this.animationState,\\n                      delay: 100\\n                    });\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        })\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\\n        \\n        this.changeMainText(warningSVG(26, 28) + ' If nodes are in different regions, obtaining majority heartbeat is expensive. Query has high latency.');\\n        this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n        this.setState({ animationFinished: true });\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault: {\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t\\t\\treject('Unrecognized state: ' + this.animationState);\\n\\t\\t\\t}\\n\\t\\t}\\n  }\\n  \\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n  }\\n\\n  onPreviousInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\\n    // Text Extra (Line 3)\\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n\\n    \\n\\t\\tswitch(this.animationState) {\\n\\n\\t\\t\\tcase ANIMATION_STATE_EXPLAIN_PROTOCOL: {\\n        // Undo phase\\n        this.changeMainText('');\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\n        resolve({\\n          animationState: Constants.ANIMATION_STATE_INITIAL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_ELECTION: {\\n        // Undo phase\\n        HelperFunctions.hideElement(nodeATextContainer);\\n        HelperFunctions.hideElement(nodeBTextContainer);\\n        HelperFunctions.hideElement(nodeCTextContainer);\\n        // Redo previous phase\\n        HelperFunctions.showElement(this.mainTextSect);\\n        this.changeMainText('Lets say we have a 3-node raft group.', () => { this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL });\\n\\n        resolve({\\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NODE_DATA: {\\n        // Undo phase\\n        document.getElementById('node-c-circle').classList.remove('leader-node');\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        nodeATermText.innerHTML = '';\\n        nodeBTermText.innerHTML = '';\\n        nodeCTermText.innerHTML = '';\\n        nodeAExtraText.innerHTML = '';\\n        nodeBExtraText.innerHTML = '';\\n        nodeCExtraText.innerHTML = '';\\n\\n        // Redo previous phase\\n        this.changeMainText('Nodes would have performed leader election..', () => {\\n          nodeAExtraText.innerHTML = 'Voted For C';\\n          nodeBExtraText.innerHTML = 'Voted For C';\\n          nodeCExtraText.innerHTML = 'Voted For C';\\n        })\\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION\\n        resolve({\\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\\n        // Undo phase\\n        this.changeMainText('');\\n        document.getElementById('node-c-circle').classList.remove('leader-node');\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n        // Redo previous phase\\n        nodeAExtraText.innerHTML = 'Voted for C';\\n        nodeBExtraText.innerHTML = 'Voted for C';\\n        nodeCExtraText.innerHTML = 'Voted for C';\\n        \\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-c-message-status'));\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'C is the current raft leader,'\\n        };\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'denoted by the black border.'\\n        };\\n        const statusTextLine1 = document.getElementById('node-c-message-status-text1');\\n        const statusTextLine2 = document.getElementById('node-c-message-status-text2');\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 900,\\n              update: function() {\\n                statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                document.getElementById('node-c-circle').classList.add('leader-node');\\n                nodeATermText.innerHTML = 'Term: 1';\\n                nodeBTermText.innerHTML = 'Term: 1';\\n                nodeCTermText.innerHTML = 'Term: 1';\\n                this.animationState = ANIMATION_STATE_NODE_DATA;\\n                resolve({\\n                  animationState: ANIMATION_STATE_NODE_DATA,\\n                  delay: 100,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideClient();\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = '';\\n        this.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\\n          HelperFunctions.showElement(nodeAExtraHighlight);\\n          HelperFunctions.showElement(nodeBExtraHighlight);\\n          HelperFunctions.showElement(nodeCExtraHighlight);\\n          this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\\n          resolve({\\n            animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\\n            delay: 100,\\n          });\\n        })\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\\n        const statusElem = document.getElementById('node-c-message-status');\\n\\t\\t\\t\\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\\n\\t\\t\\t\\tHelperFunctions.hideElement(statusElem);\\n\\t\\t\\t\\tdocument.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\\n        this.changeMainText('');\\n\\n\\t\\t\\t\\tintroduceClientAnimation.finished.then(() => {\\n          HelperFunctions.hideElement(nodeAExtraHighlight);\\n          HelperFunctions.hideElement(nodeBExtraHighlight);\\n          HelperFunctions.hideElement(nodeCExtraHighlight);\\n\\n          HelperFunctions.showElement(document.getElementById('client-message'));\\n          const statusElem = document.getElementById('client-query-message');\\n          document.getElementById('client-query-message-text1');\\n          const contentLine1 = {\\n            index: 0,\\n            str: 'SELECT value'\\n          }\\n          const contentLine2 = {\\n            index: 0,\\n            str: 'FROM T WHERE key = k'\\n          }\\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(statusElem);\\n          anime({\\n            targets: contentLine1,\\n            index: contentLine1.str.length,\\n            easing: 'linear',\\n            duration: 600,\\n            update: function() {\\n              statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: contentLine2,\\n                index: contentLine2.str.length,\\n                easing: 'linear',\\n                duration: 900,\\n                update: function() {\\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\\n                },\\n                complete: () => {\\n                  const anim = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\\n                  anim.finished.then(() => {\\n                    this.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\\n                    resolve({\\n                      animationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\\n                      delay: 100,\\n                    });\\n                  })\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\\n        const leaderTextLine1 = document.getElementById('node-c-message-status-text1');\\n        const leaderTextLine2 = document.getElementById('node-c-message-status-text2');\\n        HelperFunctions.hideElement(document.getElementById('client-node-value'));\\n        leaderTextLine1.innerHTML = '';\\n        leaderTextLine2.innerHTML = '';\\n        \\n        const contentLine1 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Per raft protocol, leader should'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tconst contentLine2 = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'obtain majority heartbeat.'\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\ttargets: contentLine1,\\n\\t\\t\\t\\t\\tindex: contentLine1.str.length,\\n\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\tduration: 800,\\n\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tcomplete: () => {\\n\\t\\t\\t\\t\\t\\tanime({\\n\\t\\t\\t\\t\\t\\t\\ttargets: contentLine2,\\n\\t\\t\\t\\t\\t\\t\\tindex: contentLine2.str.length,\\n\\t\\t\\t\\t\\t\\t\\teasing: 'linear',\\n\\t\\t\\t\\t\\t\\t\\tduration: 1040,\\n\\t\\t\\t\\t\\t\\t\\tupdate: function() {\\n\\t\\t\\t\\t\\t\\t\\t\\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\\n            });\\n            \\n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n\\t\\t\\t\\t\\t}\\n        });\\n        break;\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-node-value'))\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        this.setState({ animationFinished: false });\\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\\n\\n        receivedAckAnimation[0].finished.then(() => {\\n          // Once majority is obtained. The leader returns value back to the client\\n          const statusElem = document.getElementById('node-c-message-status');\\n          HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\\n          HelperFunctions.showElement(statusElem);\\n          \\n          const leaderText1 = {\\n            index: 7,\\n            str: 'Majority heartbeat obtained,'\\n          }\\n          const leaderText2 = {\\n            index: 0,\\n            str: 'raft leader can serve read.'\\n          }\\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\\n          anime({\\n            targets: leaderText1,\\n            index: leaderText1.str.length,\\n            easing: 'linear',\\n            duration: 800,\\n            update: function() {\\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: leaderText2,\\n                index: leaderText2.str.length,\\n                easing: 'linear',\\n                duration: 1080,\\n                update: function() {\\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\\n                },\\n                complete: () => {\\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n                  animation.finished.then(() => {\\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\\n\\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\\n                    resolve({\\n                      animationState: this.animationState,\\n                      delay: 100\\n                    });\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      default: {\\n        console.error('Unrecognized state or unimplemented: ' + this.animationState);\\n        reject('Unrecognized state or unimplemented: ' + this.animationState);\\n      }\\n    }\\n  }\\n  \\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default RaftReadOperationAnimation;\\n\",\"\\nimport React, { Component } from 'react';\\nimport './App.css';\\nimport anime from 'animejs/lib/anime.es.js';\\nimport MainDiagram from './svg/MainDiagram';\\nimport { Constants } from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst ANIMATION_STATE_LEADER_REPLICATES_LEASE = \\\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\\\";\\nconst ANIMATION_STATE_LEADER_READS_PROTOCOL = 'ANIMATION_STATE_LEADER_READS_PROTOCOL';\\nconst ANIMATION_STATE_START_LEADER_LEASE = 'ANIMATION_STATE_START_LEADER_LEASE';\\nconst ANIMATION_STATE_CLIENT_UPDATE_FAILS = 'ANIMATION_STATE_CLIENT_UPDATE_FAILS';\\nconst ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED = \\\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\\\";\\nconst ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED = \\\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\\\";\\nconst ANIMATION_STATE_NEW_LEADER_ELECTED = \\\"ANIMATION_STATE_NEW_LEADER_ELECTED\\\";\\nconst ANIMATION_STATE_LEADER_LEASE_DURATION = 'ANIMATION_STATE_LEADER_LEASE_DURATION';\\nconst ANIMATION_STATE_OLD_LEADER_STILL_READABLE = 'ANIMATION_STATE_OLD_LEADER_STILL_READABLE';\\nconst ANIMATION_STATE_OLD_LEASE_EXPIRES = 'ANIMATION_STATE_OLD_LEASE_EXPIRES';\\nconst ANIMATION_STATE_LEADER_LEASE_CONCLUSION = 'ANIMATION_STATE_LEADER_LEASE_CONCLUSION';\\nconst ANIMATION_STATE_NEW_LEADER_SENT_LEASES = \\\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\\\";\\n\\nconst ORIGINAL_LEADER_INITIAL_DURATION = 3000;\\nconst LEADER_REPLICATION_DURATION = 5000;\\n\\n\\nexport class LeaderLeaseAnimation extends Component {\\n\\tconstructor(props) {\\n    super(props);\\n    this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n\\t\\tthis.state = {\\n      previousEnabled: true\\n\\t\\t}\\n\\t\\tthis.init();\\n\\t}\\n\\tinit() {\\n\\t\\tthis.nodeATimerAnimation = null;\\n\\t\\tthis.nodeBTimerAnimation = null;\\n\\t\\tthis.nodeCTimerAnimation = null;\\n\\t}\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('center-message-text');\\n\\t\\tthis.timersAreActive = false;\\n\\t}\\n\\n\\tpause() {\\n\\t\\tif (this.timersAreActive) {\\n\\t\\t\\tthis.pauseTimers();\\n\\t\\t}\\n\\t}\\n\\tresume() {\\n\\t\\tif (this.timersAreActive) {\\n\\t\\t\\tthis.resumeTimers();\\n\\t\\t}\\n\\t}\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n\\t\\t// Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageStatus = document.getElementById('client-message-status');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase Constants.ANIMATION_STATE_INITIAL: {\\n\\t\\t\\t\\t//////////////////// initial setup ////////////////////\\n\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          // make Node C  the leader\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n          HelperFunctions.showElement(nodeATermText);\\n          HelperFunctions.showElement(nodeBTermText);\\n          HelperFunctions.showElement(nodeCTermText);\\n          HelperFunctions.showElement(nodeAExtraText);\\n          HelperFunctions.showElement(nodeBExtraText);\\n          HelperFunctions.showElement(nodeCExtraText);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_READS_PROTOCOL: {\\n        this.changeMainText('Using leader leases to safely perform reads from the leader..', () => {\\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_START_LEADER_LEASE: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeCMessageBubble);\\n        HelperFunctions.showElement(nodeCMessageStatus);\\n        const statusText1 = document.getElementById('node-c-message-status-text1');\\n        const statusText2 = document.getElementById('node-c-message-status-text2');\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Raft leader starts a'\\n        }\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'new lease timer for itself.'\\n        }\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                this.timersAreActive = true;\\n                if (this.nodeCTimerAnimation) {\\n                  HelperFunctions.showElement(document.getElementById('mlease-rect-node-c'));\\n                  this.nodeCTimerAnimation.restart();\\n                } else {\\n                  this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\\n                    duration: ORIGINAL_LEADER_INITIAL_DURATION,\\n                    targetPercent: 90,\\n                    disableAutoPlay: true,\\n                  });\\n                  this.nodeCTimerAnimation.play();\\n                }\\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                  asyncAnimation: true,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\\n        this.nodeCTimerAnimation.seek(0);\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        HelperFunctions.hideElement(nodeCMessageStatus);\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const textAlt = document.getElementById('node-c-message-text-alt');\\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\\n        const content = {\\n\\t\\t\\t\\t\\tindex: 0,\\n\\t\\t\\t\\t\\tstr: 'Raft leader then replicates a\\\\nlease interval to followers. Note\\\\nthe lease timer on C has started\\\\nbefore replicating to A and B.'\\n        };\\n\\n        var nodeCTextAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2500,\\n          update: function() {\\n            textAlt.innerText = content.str.substr(0, content.index);\\n          }\\n\\t\\t\\t\\t});\\n        var nodeALeaseAnimation = anime({\\n          targets: leaseToA,\\n          translateX: -280,\\n          translateY: 0,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToA);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToA);\\n            leaseToA.style.transform = 'none';\\n          },\\n        });\\n\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\\n          duration: LEADER_REPLICATION_DURATION,\\n          targetPercent: 60,\\n          startPercent: 90,\\n        });\\n\\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\\n        var nodeBLeaseAnimation = anime({\\n          targets: leaseToB,\\n          translateX: -150,\\n          translateY: -280,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToB);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToB);\\n            leaseToB.style.transform = 'none';\\n          },\\n        });\\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\\n            duration: ORIGINAL_LEADER_INITIAL_DURATION,\\n            targetPercent: 85\\n          });\\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\\n            duration: ORIGINAL_LEADER_INITIAL_DURATION,\\n            targetPercent: 90\\n          });\\n\\n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 500,\\n            asyncAnimation: true\\n          });\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_LEASE_DURATION: {\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        this.changeMainText('Any new leader must wait out the existing Leader Lease duration before acquiring lease.', () => {\\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\\n          // partition original leader\\n\\t\\t\\t\\t\\tHelperFunctions.partitionNodeC();\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAContent = {\\n          index: 0,\\n          str: 'A wins new leader election\\\\n but cannot perform any\\\\noperations until Leader\\\\nLease on A runs out.'\\n        };\\n\\n        anime({\\n          targets: nodeAContent,\\n          index: nodeAContent.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\\n          },\\n          complete: () => {\\n            // elect Node A as new leader candidate\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-candidate-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        \\n        break;\\n      }\\n\\t\\t\\tcase ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        nodeAMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n\\t\\t\\t\\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\\n          HelperFunctions.introduceClient();\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(clientMessageBackground);\\n          HelperFunctions.showElement(clientQueryMessage);\\n          const clientContent1 = {\\n            index: 0,\\n            str: 'UPDATE T SET'\\n          }\\n          const clientContent2 = {\\n            index: 0,\\n            str: 'value = V2 WHERE'\\n          }\\n          const clientContent3 = {\\n            index: 0,\\n            str: ' key = k'\\n          }\\n          \\n          const statusText1 = document.getElementById('client-query-message-text1');\\n          const statusText2 = document.getElementById('client-query-message-text2');\\n          const statusText3 = document.getElementById('client-query-message-text3');\\n          anime({\\n            targets: clientContent1,\\n            index: clientContent1.str.length,\\n            easing: 'linear',\\n            duration: 400,\\n            update: function() {\\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: clientContent2,\\n                index: clientContent2.str.length,\\n                easing: 'linear',\\n                duration: 400,\\n                update: function () {\\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n                },\\n                complete: () => {\\n                  anime({\\n                    targets: clientContent3,\\n                    index: clientContent3.str.length,\\n                    easing: 'linear',\\n                    duration: 400,\\n                    update: function () {\\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                    },\\n                    complete: () => {\\n                      var messageContrainerElement = document.getElementById('client-message');\\n                      var messageElement = document.getElementById('client-message-circle');\\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\\t{\\n                        onBegin: () => {\\n                          HelperFunctions.showElement(messageContrainerElement);\\n                          messageElement.classList.add('log-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        onChangeComplete: () => {\\n                          messageElement.classList.remove('log-message');\\n                          messageElement.classList.add('error-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\\n                          // messageTextElement\\n                        },\\n                        onComplete: () => {\\n                          messageElement.classList.remove('error-message');\\n                          HelperFunctions.hideElement(messageContrainerElement);\\n                          messageContrainerElement.style.transform = 'none';\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                          HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\\n                          document.getElementById('client-node-value-error-header').innerHTML = 'Query Rejected:';\\n                          document.getElementById('client-node-value-error-subtitle').innerHTML = 'Cannot find raft leader';\\n                        },\\n                        alternate: true,\\n                      });\\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\\n                      resolve({\\n                        animationState: this.animationState,\\n                        delay: 100,\\n                      });\\n                    }\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\\n        };\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n       break;\\n      }\\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\\n        const content = {\\n          index: 0,\\n          str: 'Leader Lease of C will run out\\\\nfirst [since it started first]. \\\\nC now steps down as leader.'\\n        };\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\\n          duration: 6000,\\n          targetPercent: 25,\\n         });\\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\\n          duration: 6000,\\n          targetPercent: 30,\\n         });\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, { duration: 6000 });\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\\n          },\\n        });\\n        this.nodeCTimerAnimation.finished.then(() => {\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.remove('leader-node');\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n            asyncAnimation: true\\n          });\\n        });\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NEW_LEADER_ELECTED: {\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAMessage = document.getElementById('node-a-message-status');\\n        const content = {\\n          index: 0,\\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 800,\\n          update: function() {\\n            nodeAMessage.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, { duration: 2000 });\\n            this.nodeATimerAnimation.finished.then(() => {\\n              var nodeA = document.getElementById('node-a-circle');\\n              HelperFunctions.showElement(document.getElementById('node-a-timer-highlight'));\\n              nodeA.classList.remove('leader-candidate-node');\\n              nodeA.classList.add('leader-node');\\n    \\n              // hide Node A's leader lease timer\\n              HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\\n    \\n              // and start its my lease timer\\n              this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, {\\n                duration: 5000,\\n                targetPercent: 50,\\n               });\\n    \\n              // then send leader lease message to B\\n              var leaseToB = document.getElementById('node-a-lease-to-node-b');\\n              anime({\\n                targets: leaseToB,\\n                translateX: 150,\\n                translateY: -280,\\n                easing: 'linear',\\n                duration: 1500,\\n                begin: () => {\\n                  HelperFunctions.showElement(leaseToB);\\n                },\\n                complete: () => {\\n                  HelperFunctions.hideElement(leaseToB);\\n                  leaseToB.style.transform = 'none';\\n    \\n                  this.nodeBTimerAnimation.restart();\\n                  this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                },\\n              });\\n            });\\n          }\\n        });        \\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-timer-highlight'));\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        HelperFunctions.showElement(clientMessageBubble);\\n        const messageStatus = document.getElementById('client-message-status');\\n\\n        const content = {\\n          index: 0,\\n          str: 'From here on, client can issue reads/writes to the new leader.'\\n        }\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            messageStatus.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            // initiate a raft round\\n            \\n            // client message to A\\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n\\n            animation.finished.then(() => {\\n              // message with ack from A to B\\n              nodeAExtraText.innerHTML = '(k, V2)';\\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\\n\\n              messageToBAnimation.finished.then(() => {\\n                nodeBExtraText.innerHTML = '(k, V2)';\\n                HelperFunctions.hideElement(nodeAExtraText2);\\n                HelperFunctions.showElement(nodeAExtraHighlight);\\n                // confirmation message back to B and the client\\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, this.nodeBTimerAnimation);\\n\\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\\n                  HelperFunctions.hideElement(nodeBExtraText2);\\n                  nodeBExtraText.innerHTML = '(k, V2)';\\n                  HelperFunctions.showElement(nodeBExtraHighlight);\\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n                  this.stopTimers();\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                });\\n              });\\n            });\\n          }\\n        });\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientMessageBackground);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        this.changeMainText('Leader Leases ensure low latency reads even when nodes are across regions.', () => {\\n          this.animationState = Constants.ANIMATION_STATE_FINISHED;\\n          this.stopTimers();\\n          this.setState({ animationFinished: true });\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        })\\n        break;\\n      }\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tconsole.log('Animation finished. Nothing to do');\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n        console.error('Unrecognized state: ' + this.animationState);\\n        reject('Unrecognized state');\\n\\t\\t}\\n  }\\n  \\n  onPrevious() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onPreviousInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonPreviousInternal(resolve,reject) {\\n    // Text Containers underneath each Node\\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\\n    // Text Term (Line 1)\\n    const nodeATermText = document.getElementById('node-a-term-text');\\n    const nodeBTermText = document.getElementById('node-b-term-text');\\n    const nodeCTermText = document.getElementById('node-c-term-text');\\n    // Highlight for Text Term (Line 1) -> Only 2 needed\\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\\n    // Text Extra (Line 2)\\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\\n    // Highlight for Text Extra (Line 2)\\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\\n    // Text Extra (Line 3)\\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\\n\\n    // MESSAGE OBJECTS\\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\\n\\n    // Client\\n    const clientMessageBubble = document.getElementById('client-message-bubble');\\n    const clientQueryMessage = document.getElementById('client-query-message');\\n    const clientMessageStatus = document.getElementById('client-message-status');\\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\\n\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase ANIMATION_STATE_LEADER_READS_PROTOCOL: {\\n        HelperFunctions.hideElement(nodeATermText);\\n        HelperFunctions.hideElement(nodeBTermText);\\n        HelperFunctions.hideElement(nodeCTermText);\\n        HelperFunctions.hideElement(nodeAExtraText);\\n        HelperFunctions.hideElement(nodeBExtraText);\\n        HelperFunctions.hideElement(nodeCExtraText);\\n        var nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n        this.changeMainText('')\\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 1000,\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_START_LEADER_LEASE: {\\n        // Undo phase\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeATermText);\\n        HelperFunctions.hideElement(nodeBTermText);\\n        HelperFunctions.hideElement(nodeCTermText);\\n        HelperFunctions.hideElement(nodeAExtraText);\\n        HelperFunctions.hideElement(nodeBExtraText);\\n        HelperFunctions.hideElement(nodeCExtraText);\\n        let nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.remove('leader-node');\\n\\n        // Redo phase\\n\\t\\t\\t\\t// hide all outer circles (TODO: revisit this approach)\\n\\t\\t\\t\\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\\n\\t\\t\\t\\tfor (var i = 0; i < nodeOuterCircles.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(nodeOuterCircles[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\n\\t\\t\\t\\t//////////////////////////////////////////////////////\\n\\t\\t\\t\\tthis.changeMainText('Let\\\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\\n          // make Node C  the leader\\n          nodeC.classList.add('leader-node');\\n          HelperFunctions.showElement(nodeATextContainer);\\n          HelperFunctions.showElement(nodeBTextContainer);\\n          HelperFunctions.showElement(nodeCTextContainer);\\n          HelperFunctions.showElement(nodeATermText);\\n          HelperFunctions.showElement(nodeBTermText);\\n          HelperFunctions.showElement(nodeCTermText);\\n          HelperFunctions.showElement(nodeAExtraText);\\n          HelperFunctions.showElement(nodeBExtraText);\\n          HelperFunctions.showElement(nodeCExtraText);\\n\\n          nodeATermText.innerHTML = 'Term: 1';\\n          nodeBTermText.innerHTML = 'Term: 1';\\n          nodeCTermText.innerHTML = 'Term: 1';\\n\\n          nodeAExtraText.innerHTML = '(k, V1)';\\n          nodeBExtraText.innerHTML = '(k, V1)';\\n          nodeCExtraText.innerHTML = '(k, V1)';\\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n      }\\n      case ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\\n        // Undo phase\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-c'));\\n\\n        // Redo phase\\n        this.changeMainText('Using leader leases to safely perform reads from the leader..', () => {\\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_DURATION: {\\n        // Undo phase\\n        HelperFunctions.hideElement(document.getElementById('llease-rectnode-a'));\\n        HelperFunctions.hideElement(document.getElementById('llease-rectnode-b'));\\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-c'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        // Redo phase\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeCMessageBubble);\\n        HelperFunctions.showElement(nodeCMessageStatus);\\n        const statusText1 = document.getElementById('node-c-message-status-text1');\\n        statusText1.innerHTML = '';\\n        const statusText2 = document.getElementById('node-c-message-status-text2');\\n        statusText2.innerHTML = '';\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Raft leader starts a'\\n        }\\n        const contentLine2 = {\\n          index: 0,\\n          str: 'new lease timer for itself.'\\n        }\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 600,\\n          update: function() {\\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            anime({\\n              targets: contentLine2,\\n              index: contentLine2.str.length,\\n              easing: 'linear',\\n              duration: 600,\\n              update: function() {\\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\\n              },\\n              complete: () => {\\n                this.timersAreActive = true;\\n                console.log(this.nodeCTimerAnimation);\\n                this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\\n                  duration: ORIGINAL_LEADER_INITIAL_DURATION,\\n                  startPercent: 100,\\n                  targetPercent: 90,\\n                  disableAutoPlay: true\\n                });\\n                this.nodeCTimerAnimation.play();\\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\\n                resolve({\\n                  animationState: this.animationState,\\n                  delay: 100,\\n                  asyncAnimation: true,\\n                });\\n              }\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\\n        this.changeMainText('');\\n        // this.changeMainText('Leader replicates a lease interval to followers', () => {\\n        HelperFunctions.hideElement(nodeCMessageBubble);\\n        HelperFunctions.hideElement(nodeCMessageStatus);\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const textAlt = document.getElementById('node-c-message-text-alt');\\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\\n        const content = {\\n          index: 0,\\n          str: 'Raft leader then replicates a\\\\nlease interval to followers. Note\\\\nthe lease timer on C has started\\\\nbefore replicating to A and B.'\\n        };\\n\\n        var nodeCTextAnimation = anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2500,\\n          update: function() {\\n            textAlt.innerText = content.str.substr(0, content.index);\\n          }\\n        });\\n        var nodeALeaseAnimation = anime({\\n          targets: leaseToA,\\n          translateX: -280,\\n          translateY: 0,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToA);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToA);\\n            leaseToA.style.transform = 'none';\\n          },\\n        });\\n\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\\n          duration: 5000,\\n          targetPercent: 60,\\n          startPercent: 90,\\n        });\\n        this.nodeCTimerAnimation.restart();\\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\\n        var nodeBLeaseAnimation = anime({\\n          targets: leaseToB,\\n          translateX: -150,\\n          translateY: -280,\\n          easing: 'linear',\\n          duration: 1500,\\n          begin: () => {\\n            HelperFunctions.showElement(leaseToB);\\n          },\\n          complete: () =>{\\n            HelperFunctions.hideElement(leaseToB);\\n            leaseToB.style.transform = 'none';\\n          },\\n        });\\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\\n            duration: 3000,\\n            targetPercent: 85\\n          });\\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\\n            duration: 3000,\\n            targetPercent: 90\\n          });\\n          console.log(this.nodeBTimerAnimation);\\n          this.nodeATimerAnimation.restart();\\n          this.nodeBTimerAnimation.restart();\\n          \\n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n            asyncAnimation: true\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\\n        this.changeMainText('Any new leader must wait out existing Leader Lease duration before acquiring lease.', () => {\\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 1000,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\\n        HelperFunctions.hideElement(nodeATermHighlight);\\n        HelperFunctions.hideElement(nodeBTermHighlight);\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        var nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-candidate-node');\\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\\n          // partition original leader\\n\\t\\t\\t\\t\\tHelperFunctions.partitionNodeC();\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\\n        let nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.remove('leader-candidate-node');\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(clientQueryMessage);\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = '';\\n        document.getElementById('client-query-message-text3').innerHTML = '';\\n        HelperFunctions.hideElement(document.getElementById('client-node'));\\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n        document.getElementById('client-message-text').innerHTML = '';\\n\\n        this.changeMainText('');\\n        HelperFunctions.showElement(nodeAMessageBubble);\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        const nodeAContent = {\\n          index: 0,\\n          str: 'A wins new leader election\\\\n but cannot perform any\\\\noperations until Leader\\\\nLease on A runs out.'\\n        };\\n\\n        anime({\\n          targets: nodeAContent,\\n          index: nodeAContent.str.length,\\n          easing: 'linear',\\n          duration: 1500,\\n          update: function() {\\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\\n          },\\n          complete: () => {\\n            // elect Node A as new leader candidate\\n            var nodeA = document.getElementById('node-a-circle');\\n            nodeA.classList.add('leader-candidate-node');\\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \\\"Term: 2\\\"});\\n            HelperFunctions.showElement(nodeATermHighlight);\\n            HelperFunctions.showElement(nodeBTermHighlight);\\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n\\t\\t\\t\\t});\\n        break;\\n      }\\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\\n        clientMessageStatus.innerHTML = '';\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        HelperFunctions.hideElement(document.getElementById('client-node'));\\n        document.getElementById('client-message-text').innerHTML = '';\\n        document.getElementById('client-query-message-text1').innerHTML = '';\\n        document.getElementById('client-query-message-text2').innerHTML = '';\\n        document.getElementById('client-query-message-text3').innerHTML = '';\\n\\t\\t\\t\\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\\n          HelperFunctions.introduceClient();\\n          HelperFunctions.showElement(clientMessageBubble);\\n          HelperFunctions.showElement(clientMessageBackground);\\n          HelperFunctions.showElement(clientQueryMessage);\\n          const clientContent1 = {\\n            index: 0,\\n            str: 'UPDATE T SET'\\n          }\\n          const clientContent2 = {\\n            index: 0,\\n            str: 'value = V2 WHERE'\\n          }\\n          const clientContent3 = {\\n            index: 0,\\n            str: ' key = k'\\n          }\\n          \\n          const statusText1 = document.getElementById('client-query-message-text1');\\n          const statusText2 = document.getElementById('client-query-message-text2');\\n          const statusText3 = document.getElementById('client-query-message-text3');\\n          anime({\\n            targets: clientContent1,\\n            index: clientContent1.str.length,\\n            easing: 'linear',\\n            duration: 400,\\n            update: function() {\\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\\n            },\\n            complete: () => {\\n              anime({\\n                targets: clientContent2,\\n                index: clientContent2.str.length,\\n                easing: 'linear',\\n                duration: 400,\\n                update: function () {\\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\\n                },\\n                complete: () => {\\n                  anime({\\n                    targets: clientContent3,\\n                    index: clientContent3.str.length,\\n                    easing: 'linear',\\n                    duration: 400,\\n                    update: function () {\\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\\n                    },\\n                    complete: () => {\\n                      var messageContrainerElement = document.getElementById('client-message');\\n                      var messageElement = document.getElementById('client-message-circle');\\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\\t{\\n                        onBegin: () => {\\n                          HelperFunctions.showElement(messageContrainerElement);\\n                          messageElement.classList.add('log-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                        },\\n                        onChangeComplete: () => {\\n                          messageElement.classList.remove('log-message');\\n                          messageElement.classList.add('error-message');\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\\n                          // messageTextElement\\n                        },\\n                        onComplete: () => {\\n                          messageElement.classList.remove('error-message');\\n                          HelperFunctions.hideElement(messageContrainerElement);\\n                          messageContrainerElement.style.transform = 'none';\\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\\n                          HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\\n                        },\\n                        alternate: true,\\n                      });\\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\\n                      resolve({\\n                        animationState: this.animationState,\\n                        delay: 100,\\n                      });\\n                    }\\n                  });\\n                }\\n              });\\n            }\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_ELECTED: {\\n        this.changeMainText('');\\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n        let nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.add('leader-node');\\n\\n        const contentLine1 = {\\n          index: 0,\\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\\n        };\\n\\n        HelperFunctions.showElement(clientMessageBubble);\\n\\n        anime({\\n          targets: contentLine1,\\n          index: contentLine1.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\\n          },\\n          complete: () => {\\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\\n            resolve({\\n              animationState: this.animationState,\\n              delay: 100,\\n            });\\n          }\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\\n        HelperFunctions.hideElement(document.getElementById('node-a-timer-highlight'));\\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\\n        let nodeC = document.getElementById('node-c-circle');\\n        nodeC.classList.add('leader-node');\\n        let nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.add('leader-candidate-node');\\n        HelperFunctions.hideElement(nodeAMessageBubble);\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\\n        const content = {\\n          index: 0,\\n          str: 'Leader Lease of C will run out\\\\nfirst [since it started first]. \\\\nC now steps down as leader.'\\n        };\\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-a'));\\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\\n          duration: 6000,\\n          targetPercent: 25\\n        });\\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\\n          duration: 6000,\\n          targetPercent: 30\\n        });\\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, { duration: 6000 });\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\\n          },\\n        });\\n        this.nodeCTimerAnimation.finished.then(() => {\\n          var nodeC = document.getElementById('node-c-circle');\\n          nodeC.classList.remove('leader-node');\\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\\n          resolve({\\n            animationState: this.animationState,\\n            delay: 100,\\n            asyncAnimation: true\\n          });\\n        });\\n        break;\\n      }\\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\\n        HelperFunctions.hideElement(nodeAExtraHighlight);\\n        HelperFunctions.hideElement(nodeBExtraHighlight);\\n        HelperFunctions.hideElement(clientMessageBubble);\\n        let nodeA = document.getElementById('node-a-circle');\\n        nodeA.classList.add('leader-candidate-node');\\n        nodeA.classList.remove('leader-node');\\n        document.getElementById('client-message-status').innerHTML = '';\\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\\n\\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-a'));\\n        const nodeAMessage = document.getElementById('node-a-message-status');\\n        const content = {\\n          index: 0,\\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\\n        };\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 800,\\n          update: function() {\\n            nodeAMessage.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, { duration: 10000 });\\n            this.nodeATimerAnimation.finished.then(() => {\\n              nodeA.classList.remove('leader-candidate-node');\\n              nodeA.classList.add('leader-node');\\n              HelperFunctions.showElement(document.getElementById('node-a-timer-highlight'));\\n\\n              // hide Node A's leader lease timer\\n              HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\\n\\n              // and start its my lease timer\\n              this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, {\\n                duration: 5000,\\n                targetPercent: 50\\n              });\\n\\n              // then send leader lease message to B\\n              var leaseToB = document.getElementById('node-a-lease-to-node-b');\\n              anime({\\n                targets: leaseToB,\\n                translateX: 150,\\n                translateY: -280,\\n                easing: 'linear',\\n                duration: 1500,\\n                begin: () => {\\n                  HelperFunctions.showElement(leaseToB);\\n                },\\n                complete: () => {\\n                  HelperFunctions.hideElement(leaseToB);\\n                  leaseToB.style.transform = 'none';\\n\\n                  this.nodeBTimerAnimation.restart();\\n                  this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                },\\n              });\\n            })\\n          }\\n        });\\n\\n        break;\\n      }\\n      case Constants.ANIMATION_STATE_FINISHED: {\\n        this.setState({animationFinished: false});\\n        this.changeMainText('');\\n        document.getElementById('node-a-message-status').innerHTML = '';\\n        HelperFunctions.showElement(document.getElementById('client-message-status-bg'));\\n        HelperFunctions.showElement(clientMessageBubble);\\n        const messageStatus = document.getElementById('client-message-status');\\n\\n        const content = {\\n          index: 0,\\n          str: 'From here on, client can issue reads/writes to the new leader.'\\n        }\\n\\n        anime({\\n          targets: content,\\n          index: content.str.length,\\n          easing: 'linear',\\n          duration: 2000,\\n          update: function() {\\n            messageStatus.textContent = content.str.substr(0, content.index);\\n          },\\n          complete: () => {\\n            // initiate a raft round\\n            \\n            // client message to A\\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\\n\\n            animation.finished.then(() => {\\n              // message with ack from A to B\\n              nodeAExtraText.innerHTML = '(k, V2)';\\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\\n\\n              messageToBAnimation.finished.then(() => {\\n                nodeBExtraText.innerHTML = '(k, V2)';\\n                HelperFunctions.hideElement(nodeAExtraText2);\\n                HelperFunctions.showElement(nodeAExtraHighlight);\\n                // confirmation message back to B and the client\\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, this.nodeBTimerAnimation);\\n\\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\\n                  HelperFunctions.hideElement(nodeBExtraText2);\\n                  nodeBExtraText.innerHTML = '(k, V2)';\\n                  HelperFunctions.showElement(nodeBExtraHighlight);\\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n                  this.stopTimers();\\n                  resolve({\\n                    animationState: this.animationState,\\n                    delay: 100,\\n                  });\\n                });\\n              });\\n            });\\n          }\\n        });\\n        this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\\n        resolve({\\n          animationState: this.animationState,\\n          delay: 100,\\n        });\\n        break;\\n      }\\n      default:\\n        console.error('Unrecognized state: ' + this.animationState);\\n        break;\\n    }\\n  }\\n\\n\\tchangeMainText(text, onComplete, delay) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete, delay);\\n\\t}\\n\\trestartTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.restart();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.restart();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.restart();\\n\\t\\t}\\n\\t}\\n\\tstopTimers() {\\n\\t\\tthis.timersAreActive = false;\\n\\t\\tthis.pauseTimers();\\n\\t}\\n\\tpauseTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.pause();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.pause();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.pause();\\n\\t\\t}\\n\\t}\\n\\tresumeTimers() {\\n\\t\\tif (this.nodeATimerAnimation) {\\n\\t\\t\\tthis.nodeATimerAnimation.play();\\n\\t\\t}\\n\\t\\tif (this.nodeBTimerAnimation) {\\n\\t\\t\\tthis.nodeBTimerAnimation.play();\\n\\t\\t}\\n\\t\\tif (this.nodeCTimerAnimation) {\\n\\t\\t\\tthis.nodeCTimerAnimation.play();\\n\\t\\t}\\n\\t}\\n\\n\\trender() {\\n\\t\\treturn(\\n\\t\\t\\t<div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\" >\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default LeaderLeaseAnimation;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport {Constants} from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst RUN_MODE_CONTINUOUS = \\\"CONTINOUS\\\";\\n\\nclass AnimationRunner extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.onPlayClicked = this.onPlayClicked.bind(this);\\n\\t\\tthis.onPreviousClicked = this.onPreviousClicked.bind(this);\\n\\t\\tthis.onRestartClicked = this.onRestartClicked.bind(this);\\n\\n\\t\\tthis.state = {\\n\\t\\t\\tanimationPlaying: false,\\n\\t\\t}\\n\\t}\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('main-text-sect');\\n\\t\\t// HelperFunctions.delayedNext(this,100);\\n\\t\\tsetTimeout(() => this.next(), 100);\\n\\t}\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n\\n\\tnext(){\\n\\t\\tthis.setState({ animationPlaying: true });\\n\\n\\t\\tvar promise = this.currentAnimation.onNext();\\n\\t\\tpromise.then(result => {\\n\\t\\t\\tconsole.log('Result: ' + JSON.stringify(result));\\n\\t\\t\\tthis.setState({ animationPlaying: false });\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (this.runMode === RUN_MODE_CONTINUOUS ) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.resume();\\n\\t\\t\\t\\t\\tthis.next();\\n\\t\\t\\t\\t} else if (!result.asyncAnimation) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.pause();\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\\n\\t\\t});\\n\\t}\\n\\n\\tprevious() {\\n\\t\\tthis.setState({ animationPlaying: true });\\n\\n\\t\\tvar promise = this.currentAnimation.onPrevious();\\n\\t\\tpromise.then( result => {\\n\\t\\t\\tconsole.log('Undo: ' + JSON.stringify(result));\\n\\t\\t\\tthis.setState({ animationPlaying: false });\\n\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\tif (this.runMode === RUN_MODE_CONTINUOUS ) {\\n\\t\\t\\t\\t\\tthis.currentAnimation.resume();\\n\\t\\t\\t\\t\\tthis.next();\\n\\t\\t\\t\\t} else {\\n\\t\\t\\t\\t\\tthis.currentAnimation.pause();\\n\\t\\t\\t\\t}\\n\\t\\t\\t},\\n\\t\\t\\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\\n\\t\\t});\\n\\t}\\n\\n\\tonPlayClicked() {\\n\\t\\tthis.next();\\n\\t}\\n\\tonRestartClicked() {\\n\\t\\tthis.restart();\\n\\t}\\n\\tonPreviousClicked() {\\n\\t\\tthis.previous();\\n\\t}\\n\\n\\trestart() {\\n\\t\\twindow.location.reload();\\n\\t}\\n\\n\\trender() {\\n\\t\\t// In React, names starting with a capital letter will compile to the createComponent method\\n\\t\\t// (credit: https://medium.com/@Carmichaelize/dynamic-tag-names-in-react-and-jsx-17e366a684e9)\\n\\t\\t// This is done so that we can use animationToRun as a tag in the JSX below\\n\\t\\tconst Animation = this.props.animationToRun;\\n\\t\\tconst disableNext = this.state.animationPlaying || \\n\\t\\t\\t(this.currentAnimation && this.currentAnimation.state.animationFinished);\\n\\t\\tconst disablePrevious = this.state.animationPlaying ||\\n\\t\\t\\t(this.currentAnimation && !this.currentAnimation.state.previousEnabled) ||\\n\\t\\t\\t(this.currentAnimation && this.currentAnimation.animationState === Constants.ANIMATION_STATE_INITIAL);\\n\\t\\tconst isAnimationFinished = this.currentAnimation && this.currentAnimation.state.animationFinished;\\n\\t\\treturn(\\n\\t\\t\\t<div className=\\\"animation-runner\\\">\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\"></div>\\n\\t\\t\\t\\t<Animation ref={n => this.currentAnimation = n}></Animation>\\n\\t\\t\\t\\t<div className=\\\"control-btns\\\">\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-previous\\\" className=\\\"yb-btn\\\" disabled={disablePrevious} onClick={this.onPreviousClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-undo\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">Previous</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-next\\\" className=\\\"yb-btn\\\" disabled={disableNext} onClick={this.onPlayClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-play\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">\\n\\t\\t\\t\\t\\t\\t\\t{isAnimationFinished ? 'End' : 'Next' }\\n\\t\\t\\t\\t\\t\\t</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t\\t<button id=\\\"animation-ctrl-restart\\\" className=\\\"yb-btn\\\" onClick={this.onRestartClicked}>\\n\\t\\t\\t\\t\\t\\t<i className=\\\"fas fa-fast-backward\\\" aria-hidden=\\\"true\\\"></i>\\n\\t\\t\\t\\t\\t\\t<span className=\\\"yb-button-text\\\">Restart</span>\\n\\t\\t\\t\\t\\t</button>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t)\\n\\t}\\n}\\n\\nexport default AnimationRunner;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport MainDiagram from './svg/MainDiagram';\\nimport {Constants} from './constants';\\n\\nvar HelperFunctions = require('./HelperFunctions');\\n\\nconst SET_VALUE1 = \\\"5\\\";\\nvar AnimationState = {\\n\\tINITIAL: \\\"INITIAL\\\",\\n\\tLEADER_ELECTION_NODE_TIMED_OUT: \\\"LEADER_ELECTION_NODE_TIMED_OUT\\\",\\n\\tLEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: \\\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\\\",\\n\\tLEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: \\\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\\\",\\n\\tLOG_REPLICATION_START: \\\"LOG_REPLICATION_START\\\",\\n\\tLOG_REPLICATION_INTRODUCE_CLIENT: \\\"LOG_REPLICATION_INTRODUCE_CLIENT\\\",\\n\\tLOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: \\\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\\\",\\n\\tLOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: \\\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\\\",\\n\\tLOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: \\\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\\\",\\n\\tLOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: \\\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\\\",\\n};\\n\\n\\nclass RaftWriteAnimation extends Component {\\n\\tconstructor(props) {\\n\\t\\tsuper(props);\\n\\t\\tthis.animationState = AnimationState.INITIAL;\\n\\t\\tthis.state = {\\n\\t\\t\\tanimationFinished: false,\\n\\t\\t}\\n\\t}\\n\\n\\tpause() {\\n\\t}\\n\\tresume() {\\n\\t}\\n\\n\\tonNext() {\\n\\t\\treturn new Promise((resolve,reject) => {\\n\\t\\t\\tthis.onNextInternal(resolve,reject);\\n\\t\\t});\\n\\t}\\n\\n\\tonNextInternal(resolve,reject) {\\n\\t\\tswitch(this.animationState) {\\n\\t\\t\\tcase AnimationState.INITIAL: {\\n\\t\\t\\t\\tthis.changeMainText('Leader election starts ...');\\n\\n\\t\\t\\t\\t// initiate a timeout\\n\\t\\t\\t\\tsetTimeout(() => {\\n\\t\\t\\t\\t\\tthis.changeMainText('If there is no leader, a election timeout is triggered');\\n\\n\\t\\t\\t\\t\\t////////////////// animate Node A and B ////////////////////////\\n\\t\\t\\t\\t\\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\\n\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('animation-delay-3s');\\n\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\\n\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('animation-delay-2s');\\n\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\t////////////////// animate Node C ////////////////////////\\n\\t\\t\\t\\t\\t// get the specific node (i.e Node C) which would time out faster and eventually\\n\\t\\t\\t\\t\\t// become the leader\\n\\t\\t\\t\\t\\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\t\\tnodeCOuterCircle.classList.add('animate-circle-stroke');\\n\\n\\t\\t\\t\\t\\t// need to wait for the animation on the faster node to end and then\\n\\t\\t\\t\\t\\t// execute the next step\\n\\t\\t\\t\\t\\tvar onNodeCAnimationEnd = () => {\\n\\t\\t\\t\\t\\t\\tnodeAOuterCircle.classList.add('pause-animation');\\n\\t\\t\\t\\t\\t\\tnodeBOuterCircle.classList.add('pause-animation');\\n\\t\\t\\t\\t\\t\\tnodeCOuterCircle.style.display = 'none';\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_NODE_TIMED_OUT;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\tnodeCOuterCircle.addEventListener(\\\"webkitAnimationEnd\\\", onNodeCAnimationEnd,false);\\n\\t\\t\\t\\t\\tnodeCOuterCircle.addEventListener(\\\"animationend\\\", onNodeCAnimationEnd,false);\\n\\n\\t\\t\\t\\t}, Constants.DEFAULT_DELAY);\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_NODE_TIMED_OUT: {\\n\\t\\t\\t\\tvar fasterTimeoutCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\tfasterTimeoutCircle.classList.add('leader-candidate-node');\\n\\n\\t\\t\\t\\tconst nodeCVoteText = document.getElementById('node-c-extra-text');\\n\\t\\t\\t\\tnodeCVoteText.classList.remove('visibility-hidden');\\n\\n\\t\\t\\t\\tthis.changeMainText('After election timeout the follower becomes a candidate. '\\n\\t\\t\\t\\t+ 'It starts a new election term and votes for itself', () => {\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: {\\n\\t\\t\\t\\t// send \\\"request vote\\\" to node B\\n\\t\\t\\t\\tvar messageToB = document.getElementById('node-c-message-to-b');\\n\\t\\t\\t\\tvar animation1 = HelperFunctions.messageFromC(Constants.NODE_B, {\\n\\t\\t\\t\\t\\tonBegin: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.add('vote-request-circle')\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonChangeComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.remove('vote-request-circle');\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.add('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToB.classList.remove('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\talternate: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\t// send \\\"request vote\\\" to node A\\n\\t\\t\\t\\tvar messageToA = document.getElementById('node-c-message-to-a');\\n\\t\\t\\t\\tvar animation2 = HelperFunctions.messageFromC(Constants.NODE_A, {\\n\\t\\t\\t\\t\\tonBegin: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.add('vote-request-circle')\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonChangeComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.remove('vote-request-circle');\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.add('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\tonComplete: (anim) => {\\n\\t\\t\\t\\t\\t\\tmessageToA.classList.remove('vote-ack-circle');\\n\\t\\t\\t\\t\\t},\\n\\t\\t\\t\\t\\talternate: true,\\n\\t\\t\\t\\t})\\n\\n\\t\\t\\t\\t// wait for both animations to finish before proceeding\\n\\t\\t\\t\\tPromise.all([animation1.finished, animation2.finished]).then(() => {\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: {\\n\\t\\t\\t\\tthis.changeMainText('Once a candidate has majority of votes it becomes the leader');\\n\\n\\t\\t\\t\\t// show that follower nodes have voted for the leader (Node C)\\n\\t\\t\\t\\tvar nodeAVoteText = document.getElementById('node-a-extra-text');\\n\\t\\t\\t\\tnodeAVoteText.classList.remove('visibility-hidden');\\n\\t\\t\\t\\tvar nodeBVoteText = document.getElementById('node-b-extra-text');\\n\\t\\t\\t\\tnodeBVoteText.classList.remove('visibility-hidden');\\n\\n\\t\\t\\t\\tconst nodeCVoteText = document.getElementById('node-c-extra-text');\\n\\t\\t\\t\\tnodeCVoteText.textContent = 'Leader Node';\\n\\n\\t\\t\\t\\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\\n\\t\\t\\t\\tnodeCOuterCircle.classList.remove('leader-candidate-node');\\n\\t\\t\\t\\tnodeCOuterCircle.classList.add('leader-node');\\n\\n\\t\\t\\t\\t// hide node A and B's outer circles\\n\\t\\t\\t\\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeAOuterCircle);\\n\\n\\t\\t\\t\\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\\n\\t\\t\\t\\tHelperFunctions.hideElement(nodeBOuterCircle);\\n\\n\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_START;\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_START: {\\n\\t\\t\\t\\tvar voteTexts = document.getElementsByClassName('node-extra-text');\\n\\t\\t\\t\\tfor (var i = 0; i < voteTexts.length; i++){\\n\\t\\t\\t\\t\\tHelperFunctions.hideElement(voteTexts[i]);\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\tthis.changeMainText('Log replication ...');\\n\\n\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT;\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 2000,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT: {\\n\\t\\t\\t\\tthis.changeMainText('Clients always communicate with the leader.');\\n\\n\\t\\t\\t\\tvar introClientAnimation = HelperFunctions.introduceClient();\\n\\n\\t\\t\\t\\tintroClientAnimation.finished.then(() => {\\n\\t\\t\\t\\t\\tvar messageToCAnimation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false, false, HelperFunctions.getSetValueText(SET_VALUE1));\\n\\t\\t\\t\\t\\tmessageToCAnimation.finished.then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t})\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"The log entry is currently uncommitted, so it won't update the node's value. To commit the entry the node first replicates it to the follower nodes\\\", () => {\\n\\t\\t\\t\\t\\t// send log messages to follower nodes\\n\\t\\t\\t\\t\\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(true, HelperFunctions.getSetValueText(SET_VALUE1));\\n\\t\\t\\t\\t\\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\\n\\n\\t\\t\\t\\t\\t// wait for both animations to finish before proceeding\\n\\t\\t\\t\\t\\tPromise.all(animationPromises).then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"Once the leader receives acks from majority of follower nodes, it commits the value and sets it state to '5'\\\", () => {\\n\\t\\t\\t\\t\\t// since leader has received acks from both followers, mark entry as committed\\n\\t\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-c-extra-text',\\n\\t\\t\\t\\t\\t\\taddCSSClass: \\\"set-text-committed\\\"});\\n\\t\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-c-main-text',\\n\\t\\t\\t\\t\\t\\ttext: \\\"5\\\",\\n\\t\\t\\t\\t\\t\\tshowElement: true,});\\n\\n\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY;\\n\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\tdelay: 1000,\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: {\\n\\t\\t\\t\\tthis.changeMainText(\\\"The leader then notifies followers and the client that entry is committed\\\", () => {\\n\\t\\t\\t\\t\\t// notify followers that leader has committed the entries\\n\\t\\t\\t\\t\\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(false,HelperFunctions.getSetValueText(SET_VALUE1), true);\\n\\t\\t\\t\\t\\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\\n\\n\\t\\t\\t\\t\\t// and notify client as well\\n\\t\\t\\t\\t\\tHelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\\n\\n\\t\\t\\t\\t\\t//// follower message animation on finish\\n\\t\\t\\t\\t\\tPromise.all(animationPromises).then(() => {\\n\\t\\t\\t\\t\\t\\tthis.animationState = AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER;\\n\\t\\t\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: {\\n\\t\\t\\t\\t// commit entries for follower nodes\\n\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\t\\ttargetId: 'node-a-main-text',\\n\\t\\t\\t\\t\\t\\ttext: SET_VALUE1,\\n\\t\\t\\t\\t\\t\\tshowElement: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tHelperFunctions.setSVGText({\\n\\t\\t\\t\\t\\ttargetId: 'node-b-main-text',\\n\\t\\t\\t\\t\\ttext: SET_VALUE1,\\n\\t\\t\\t\\t\\tshowElement: true,\\n\\t\\t\\t\\t});\\n\\n\\t\\t\\t\\tthis.changeMainText(\\\"The cluster has now come to consensus about the system state\\\");\\n\\t\\t\\t\\tthis.animationState = Constants.ANIMATION_STATE_FINISHED;\\n\\t\\t\\t\\tthis.setState({ animationFinished: true });\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tcase Constants.ANIMATION_STATE_FINISHED: {\\n\\t\\t\\t\\tresolve({\\n\\t\\t\\t\\t\\tanimationState: this.animationState,\\n\\t\\t\\t\\t\\tdelay: 100,\\n\\t\\t\\t\\t});\\n\\t\\t\\t\\tbreak;\\n\\t\\t\\t}\\n\\t\\t\\tdefault:\\n\\t\\t\\t\\tconsole.error('Unrecognized state: ' + this.animationState);\\n\\t\\t}\\n\\t}\\n\\n\\tcomponentDidMount() {\\n\\t\\tthis.mainTextSect = document.getElementById('main-text-sect');\\n\\t}\\n\\n  render() {\\n    return (\\n\\t    <div>\\n\\t\\t\\t\\t<div id=\\\"main-diagram\\\">\\n\\t\\t\\t\\t\\t<MainDiagram/>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div id=\\\"main-text-sect\\\">\\n\\t\\t\\t\\t</div>\\n\\t    </div>\\n\\t  );\\n  }\\n\\n\\tchangeMainText(text, onComplete) {\\n\\t\\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\\n\\t}\\n}\\n\\nexport default RaftWriteAnimation;\\n\",\"import React, { Component } from 'react';\\nimport './App.css';\\nimport {\\n  BrowserRouter as Router,\\n  Route,\\n  Link\\n} from 'react-router-dom';\\n\\nimport ReadFailureAnimation from './ReadFailureAnimation';\\nimport RaftReadOperationAnimation from './RaftReadOperationAnimation';\\nimport LeaderLeasesAnimation from './LeaderLeasesAnimation';\\nimport AnimationRunner from './AnimationRunner';\\nimport RaftWriteAnimation from './RaftWriteAnimation';\\n\\nclass App extends Component {\\n\\trender() {\\n    return (\\n\\t\\t\\t<Router>\\n\\t\\t    <div className=\\\"App\\\">\\n\\t\\t\\t\\t<Route exact path='/' component={Home}></Route>\\n\\t\\t\\t\\t<Route exact path='/raft-write-operation' render={(props) => <AnimationRunner {...props} animationToRun={RaftWriteAnimation}/> }></Route>\\n\\t\\t\\t\\t<Route exact path='/why-raft-read-fails-without-quorum' render={(props) => <AnimationRunner {...props} animationToRun={ReadFailureAnimation}/> }></Route>\\n\\t\\t\\t\\t<Route exact path='/raft-read-with-leader-leases' render={(props) => <AnimationRunner {...props} animationToRun={LeaderLeasesAnimation}/> }></Route>\\n\\t\\t\\t\\t<Route exact path='/read-operation-in-raft' render={(props) => <AnimationRunner {...props} animationToRun={RaftReadOperationAnimation}/> }></Route>\\n\\t\\t    </div>\\n\\t\\t\\t</Router>\\n    );\\n  }\\n}\\n\\nclass Home extends Component {\\n\\trender() {\\n\\t\\treturn (\\n\\t\\t\\t<div id=\\\"home-link-container\\\">\\n\\t\\t\\t\\t\\t<h3>Read:</h3>\\n\\t\\t\\t\\t<ul>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/read-operation-in-raft\\\">Read operation in raft</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/why-raft-read-fails-without-quorum\\\">Why raft read failes without quorum</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t\\t<li>\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/raft-read-with-leader-leases\\\">Raft read with leader leases</Link>\\n\\t\\t\\t\\t\\t</li>\\n\\t\\t\\t\\t</ul>\\n\\n\\t\\t\\t\\t<h3>Write:</h3>\\n\\t\\t\\t\\t\\t<div class=\\\"write-link-container\\\">\\n\\t\\t\\t\\t\\t\\t<Link to=\\\"/raft-write-operation\\\">Raft write operation</Link>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t);\\n\\t}\\n}\\n\\n\\nexport default App;\\n\",\"// This optional code is used to register a service worker.\\n// register() is not called by default.\\n\\n// This lets the app load faster on subsequent visits in production, and gives\\n// it offline capabilities. However, it also means that developers (and users)\\n// will only see deployed updates on subsequent visits to a page, after all the\\n// existing tabs open on the page have been closed, since previously cached\\n// resources are updated in the background.\\n\\n// To learn more about the benefits of this model and instructions on how to\\n// opt-in, read http://bit.ly/CRA-PWA\\n\\nconst isLocalhost = Boolean(\\n  window.location.hostname === 'localhost' ||\\n    // [::1] is the IPv6 localhost address.\\n    window.location.hostname === '[::1]' ||\\n    // 127.0.0.1/8 is considered localhost for IPv4.\\n    window.location.hostname.match(\\n      /^127(?:\\\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\\n    )\\n);\\n\\nexport function register(config) {\\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\\n    // The URL constructor is available in all browsers that support SW.\\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\\n    if (publicUrl.origin !== window.location.origin) {\\n      // Our service worker won't work if PUBLIC_URL is on a different origin\\n      // from what our page is served on. This might happen if a CDN is used to\\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\\n      return;\\n    }\\n\\n    window.addEventListener('load', () => {\\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\\n\\n      if (isLocalhost) {\\n        // This is running on localhost. Let's check if a service worker still exists or not.\\n        checkValidServiceWorker(swUrl, config);\\n\\n        // Add some additional logging to localhost, pointing developers to the\\n        // service worker/PWA documentation.\\n        navigator.serviceWorker.ready.then(() => {\\n          console.log(\\n            'This web app is being served cache-first by a service ' +\\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\\n          );\\n        });\\n      } else {\\n        // Is not localhost. Just register service worker\\n        registerValidSW(swUrl, config);\\n      }\\n    });\\n  }\\n}\\n\\nfunction registerValidSW(swUrl, config) {\\n  navigator.serviceWorker\\n    .register(swUrl)\\n    .then(registration => {\\n      registration.onupdatefound = () => {\\n        const installingWorker = registration.installing;\\n        if (installingWorker == null) {\\n          return;\\n        }\\n        installingWorker.onstatechange = () => {\\n          if (installingWorker.state === 'installed') {\\n            if (navigator.serviceWorker.controller) {\\n              // At this point, the updated precached content has been fetched,\\n              // but the previous service worker will still serve the older\\n              // content until all client tabs are closed.\\n              console.log(\\n                'New content is available and will be used when all ' +\\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\\n              );\\n\\n              // Execute callback\\n              if (config && config.onUpdate) {\\n                config.onUpdate(registration);\\n              }\\n            } else {\\n              // At this point, everything has been precached.\\n              // It's the perfect time to display a\\n              // \\\"Content is cached for offline use.\\\" message.\\n              console.log('Content is cached for offline use.');\\n\\n              // Execute callback\\n              if (config && config.onSuccess) {\\n                config.onSuccess(registration);\\n              }\\n            }\\n          }\\n        };\\n      };\\n    })\\n    .catch(error => {\\n      console.error('Error during service worker registration:', error);\\n    });\\n}\\n\\nfunction checkValidServiceWorker(swUrl, config) {\\n  // Check if the service worker can be found. If it can't reload the page.\\n  fetch(swUrl)\\n    .then(response => {\\n      // Ensure service worker exists, and that we really are getting a JS file.\\n      const contentType = response.headers.get('content-type');\\n      if (\\n        response.status === 404 ||\\n        (contentType != null && contentType.indexOf('javascript') === -1)\\n      ) {\\n        // No service worker found. Probably a different app. Reload the page.\\n        navigator.serviceWorker.ready.then(registration => {\\n          registration.unregister().then(() => {\\n            window.location.reload();\\n          });\\n        });\\n      } else {\\n        // Service worker found. Proceed as normal.\\n        registerValidSW(swUrl, config);\\n      }\\n    })\\n    .catch(() => {\\n      console.log(\\n        'No internet connection found. App is running in offline mode.'\\n      );\\n    });\\n}\\n\\nexport function unregister() {\\n  if ('serviceWorker' in navigator) {\\n    navigator.serviceWorker.ready.then(registration => {\\n      registration.unregister();\\n    });\\n  }\\n}\\n\",\"import React from 'react';\\nimport ReactDOM from 'react-dom';\\nimport './index.css';\\nimport App from './App';\\nimport * as serviceWorker from './serviceWorker';\\n\\nReactDOM.render(<App />, document.getElementById('root'));\\n\\n// If you want your app to work offline and load faster, you can change\\n// unregister() to register() below. Note this comes with some pitfalls.\\n// Learn more about service workers: http://bit.ly/CRA-PWA\\nserviceWorker.unregister();\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1:function(e,t,n){\"use strict\";n.d(t,\"a\",function(){return a});var a={DEFAULT_DELAY:2e3,NODE_A:\"NODE_A\",NODE_B:\"NODE_B\",NODE_C:\"NODE_C\",CLIENT_NODE:\"CLIENT_NODE\",ANIMATION_STATE_INITIAL:\"ANIMATION_STATE_INITIAL\",ANIMATION_STATE_FINISHED:\"ANIMATION_STATE_FINISHED\",COMMITTED:\"(committed)\",UNCOMMITTED:\"(uncommitted)\"}},12:function(e,t,n){},13:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"setSVGText\",function(){return s}),n.d(t,\"showElement\",function(){return o}),n.d(t,\"hideElement\",function(){return d}),n.d(t,\"delayedNext\",function(){return r}),n.d(t,\"setTextWithAnimation\",function(){return l}),n.d(t,\"introduceClient\",function(){return m}),n.d(t,\"hideClient\",function(){return c}),n.d(t,\"messageFromClient\",function(){return E}),n.d(t,\"sendLogMessage\",function(){return u}),n.d(t,\"logMessageFromLeaderToFollowers\",function(){return g}),n.d(t,\"logMessageAckFromFollowersToLeader\",function(){return T}),n.d(t,\"getFinishPromises\",function(){return h}),n.d(t,\"messageFromC\",function(){return I}),n.d(t,\"messageFromA\",function(){return A}),n.d(t,\"messageFromB\",function(){return y}),n.d(t,\"getSetValueText\",function(){return x}),n.d(t,\"partitionNodeC\",function(){return _}),n.d(t,\"startMyLeaseTimer\",function(){return N}),n.d(t,\"startLeaderLeaseTimer\",function(){return L}),n.d(t,\"startLeaseTimer\",function(){return O}),n.d(t,\"myLeaseTimerId\",function(){return b}),n.d(t,\"leaderLeaseTimerId\",function(){return S});var a=n(2),i=n(1);function s(e){var t=document.getElementById(e.targetId);e.text&&(t.textContent=e.text),e.addCSSClass&&t.classList.add(e.addCSSClass),e.removeCSSClass&&t.classList.remove(e.removeCSSClass),e.showElement&&o(t)}function o(e){e.classList.remove(\"visibility-hidden\"),e.classList.add(\"visibility-visible\")}function d(e){e.classList.remove(\"visibility-visible\"),e.classList.add(\"visibility-hidden\")}function r(e,t){t||(t=i.a.DEFAULT_DELAY),setTimeout(function(){return e.next()},t)}function l(e,t,n,i){e.innerHTML=t;var s={opacityIn:[0,1],scaleIn:[.2,1],scaleOut:3,durationIn:2e3,durationOut:2e3};s.delay=i||500,Object(a.a)({targets:e,opacity:s.opacityIn,scale:s.scaleIn,duration:s.durationIn,complete:n,delay:s.delay})}function m(e){var t=document.getElementById(\"client-node\");return o(t),e&&s({targetId:\"client-node-value\",text:e}),Object(a.a)({targets:t,translateY:-84})}function c(){d(document.getElementById(\"client-node\")),d(document.getElementById(\"client-message-circle\"))}function E(e,t){var n=document.getElementById(\"client-message\"),s=0,o=0;switch(e){case i.a.NODE_C:s=140,o=-140;break;case i.a.NODE_A:s=-160,o=-156;break;default:return void console.log(\"messageFromClient: Unrecognized destination: \"+e)}return Object(a.a)({targets:n,translateX:s,translateY:o,easing:\"linear\",duration:800,begin:t.onBegin,complete:t.onComplete,changeComplete:t.onChangeComplete,direction:t.alternate?\"alternate\":\"normal\"})}function u(e,t,n,a,d,r,l,m,c){console.log(\"FromNode: \"+e+\" toNode: \"+t+\" returnAck: \"+n+\" value: \"+d+\" commitValue: \"+r);var u=null,g=null,T=null,h=null,x=null,_=null,N=null;switch(e){case i.a.NODE_A:u=A,h=\"node-a-extra-text\",N=\"node-a-extra-text2\",t===i.a.NODE_B?(g=document.getElementById(\"node-a-message-to-b\"),T=\"node-b-extra-text\",_=\"node-b-extra-text2\"):t===i.a.NODE_C?(g=document.getElementById(\"node-a-message-to-c\"),T=\"node-c-extra-text\",_=\"node-c-extra-text2\"):t===i.a.CLIENT_NODE&&(g=document.getElementById(\"node-a-message-to-client\"));break;case i.a.NODE_B:u=y,h=\"node-b-extra-text\",N=\"node-b-extra-text2\",t===i.a.NODE_A?(g=document.getElementById(\"node-b-message-to-a\"),T=\"node-a-extra-text\",_=\"node-a-extra-text2\"):t===i.a.NODE_C&&(g=document.getElementById(\"node-b-message-to-c\"),T=\"node-c-extra-text\",_=\"node-c-extra-text2\");break;case i.a.NODE_C:u=I,h=\"node-c-extra-text\",N=\"node-c-extra-text2\",t===i.a.NODE_A?(g=document.getElementById(\"node-c-message-to-a\"),T=\"node-a-extra-text\",_=\"node-a-extra-text2\"):t===i.a.NODE_B?(g=document.getElementById(\"node-c-message-to-b\"),T=\"node-b-extra-text\",_=\"node-b-extra-text2\"):t===i.a.CLIENT_NODE&&(g=document.getElementById(\"node-c-message-to-client\"));break;case i.a.CLIENT_NODE:u=E,g=document.getElementById(\"client-message-circle\"),x=document.getElementById(\"client-message\"),t===i.a.NODE_A?(T=\"node-a-extra-text\",_=\"node-a-extra-text2\"):t===i.a.NODE_B?(T=\"node-b-extra-text\",_=\"node-b-extra-text2\"):t===i.a.NODE_C&&(T=\"node-c-extra-text\",_=\"node-c-extra-text2\");break;default:throw new Error(\"Unrecognized fromNode: \"+e)}return u(t,{delay:l,destinationTimerAnimation:m,onBegin:function(e){o(g),a?(g.classList.remove(\"log-message\"),g.classList.add(\"log-message-ack\")):(g.classList.add(\"log-message\"),g.classList.remove(\"log-message-ack\"))},onChangeComplete:function(e){console.log(\"In onChangeComplete. messageElement: \"+g),m&&(console.log(\"Will restart timer animation\"),m.restart()),n&&(g.classList.remove(\"log-message\"),g.classList.add(\"log-message-ack\"));var t=null;if(d&&T){var a=\"\",o=\"\";r?(a=\"set-text-committed\",o=\"set-text-uncommitted\",t=i.a.COMMITTED):(a=\"set-text-uncommitted\",o=\"set-text-committed\",t=i.a.UNCOMMITTED),console.log(\"additionalText: \"+t+\"additionalTextElementID: \"+_),null!=t&&_&&s({targetId:_,text:t,addCSSClass:a,removeCSSClass:o,showElement:!r})}},onComplete:function(e){n&&(g.classList.remove(\"log-message-ack\"),d&&h&&s({targetId:h,addCSSClass:\"set-text-committed\"}),d&&N&&s({targetId:N,text:i.a.COMMITTED,addCSSClass:\"set-text-committed\"})),c&&c.restart(),g.style.transform=\"none\",x&&(x.style.transform=\"none\")},alternate:n})}function g(e,t,n,a,s,o,d){return[u(i.a.NODE_C,i.a.NODE_A,e,!1,t,n,a,s,d),u(i.a.NODE_C,i.a.NODE_B,e,!1,t,n,a,o,d)]}function T(e,t,n,a,s,o){return[u(i.a.NODE_A,i.a.NODE_C,!1,!0,e,t,n,a,o),u(i.a.NODE_B,i.a.NODE_C,!1,!0,e,t,n,s,o)]}function h(e){var t=[];return e.forEach(function(e){t.push(e.finished)}),t}function I(e,t){var n=0,s=0,o=\"\";return e===i.a.NODE_B?(n=-140,s=-276,o=\"#node-c-message-to-b\"):e===i.a.NODE_A?(o=\"#node-c-message-to-a\",n=-275):e===i.a.CLIENT_NODE&&(o=\"#node-c-message-to-client\",n=-130,s=135),Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function A(e,t){var n=0,s=0,o=\"\";if(e===i.a.NODE_B)n=160,s=-290,o=\"#node-a-message-to-b\";else if(e===i.a.NODE_C)n=275,o=\"#node-a-message-to-c\";else{if(e!==i.a.CLIENT_NODE)return void console.warning(\"Unsupported destination: \"+e);n=150,s=148,o=\"#node-a-message-to-client\"}return Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function y(e,t){var n=0,s=0,o=\"\";if(e===i.a.NODE_A)n=-160,s=290,o=\"#node-b-message-to-a\";else{if(e!==i.a.NODE_C)return void console.warning(\"Unsupported destination: \"+e);n=140,s=276,o=\"#node-b-message-to-c\"}return Object(a.a)({targets:o,translateX:n,translateY:s,easing:\"linear\",duration:1e3,direction:t.alternate?\"alternate\":\"normal\",begin:t.onBegin,changeComplete:t.onChangeComplete,complete:t.onComplete,delay:t.delay?t.delay:0})}function x(e){return\"Value: \"+e}function _(){o(document.getElementById(\"node-c-partition-wrap\"))}function N(e,t){return O(b(e),t.duration,t.targetPercent,t.startPercent,t.disableAutoPlay)}function L(e,t){return O(S(e),t.duration,t.targetPercent,t.startPercent,t.disableAutoPlay)}function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4?arguments[4]:void 0;o(document.getElementById(e));var d=document.getElementById(e+\"-inner\"),r=i/100*80,l=n/100*80;return Object(a.a)({targets:d,width:[r,l],easing:\"easeOutCubic\",duration:t,autoplay:!s})}function b(e){return f(\"mlease-rect-\",e)}function S(e){return f(\"llease-rect\",e)}function f(e,t){var n=e;switch(t){case i.a.NODE_C:n+=\"node-c\";break;case i.a.NODE_B:n+=\"node-b\";break;case i.a.NODE_A:n+=\"node-a\";break;default:console.error(\"Unrecognized Node: \"+t)}return n}},19:function(e,t,n){e.exports=n(29)},25:function(e,t,n){},29:function(e,t,n){\"use strict\";n.r(t);var a=n(0),i=n.n(a),s=n(17),o=n.n(s),d=(n(25),n(5)),r=n(6),l=n(9),m=n(7),c=n(8),E=(n(12),n(33)),u=n(32),g=n(31),T=n(2),h=function(){return i.a.createElement(\"svg\",{width:\"100\",height:\"100\",xmlns:\"http://www.w3.org/2000/svg\"},i.a.createElement(\"g\",{id:\"analog-clock\",transform:\"translate(10,10)\"},i.a.createElement(\"circle\",{id:\"face\",stroke:\"black\",strokeWidth:\"3px\",cx:\"10\",cy:\"20\",r:\"10\",fill:\"transparent\"}),i.a.createElement(\"g\",{id:\"hands\"},i.a.createElement(\"rect\",{id:\"hour\",x:\"9\",y:\"12\",width:\"2\",height:\"10\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"555\"}),i.a.createElement(\"rect\",{id:\"min\",x:\"9\",y:\"20\",width:\"9\",height:\"2\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"555\"}))))},I=function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){return i.a.createElement(\"g\",{transform:\"translate(10,10)\",className:this.props.className,id:this.props.uid},i.a.createElement(\"text\",{x:this.props.x+36,y:this.props.y-4,fill:\"black\"},this.props.label),i.a.createElement(\"rect\",{id:this.props.uid+\"-inner\",x:this.props.x+32,y:this.props.y,width:\"80\",height:\"6\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"1px\",fill:\"#333\",stroke:\"#555\"}),i.a.createElement(\"rect\",{id:this.props.uid+\"-outer\",x:this.props.x+32,y:this.props.y,width:\"80\",height:\"7\",rx:\"2.5\",ry:\"2.55\",strokeWidth:\"2px\",fill:\"transparent\",stroke:\"black\"}),\"}\")}}]),t}(a.Component),A=n(1),y=n(13),x={mainText:{x:186,y:559},clientMessage:{x:186,y:478}},_={base:{x:42,y:324},messageToB:{x:48,y:324},messageToClient:{x:48,y:324},leaseTimer:{x:-6,y:419}},N={base:{x:320,y:324},messageToB:{x:352,y:324},messageToA:{x:352,y:324},messageToClient:{x:352,y:324},partitionText1:{x:240,y:254},partitionText2:{x:240,y:269}},L={base:{x:168,y:42},messageToA:{x:158,y:42},messageToC:{x:200,y:42}},O=function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){var e=x.clientMessage.x,t=x.clientMessage.y,n=_.base.x,a=_.base.y,s=L.base.x,o=L.base.y,d=N.base.x,r=N.base.y;return i.a.createElement(\"svg\",{height:\"500\",width:\"720\"},i.a.createElement(\"defs\",null,i.a.createElement(h,null)),i.a.createElement(\"foreignObject\",{x:30,y:160,width:\"400\",height:\"300\"},i.a.createElement(\"div\",{id:\"center-message-text\",style:{fontFamily:\"Verdana\",fontSize:\"1em\",padding:\"30px\"}})),i.a.createElement(\"g\",null,i.a.createElement(\"text\",{id:\"center-message-rect\",className:\"visibility-hidden\",x:e,y:170,fontFamily:\"Verdana\",fontSize:\"1em\"},i.a.createElement(\"tspan\",{id:\"center-message-text1\",x:50,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"center-message-text2\",x:50,dy:\"1.2em\"}))),i.a.createElement(\"circle\",{id:\"node-c-message-to-b\",className:\"node-small-circle\",cx:N.messageToB.x,cy:N.messageToB.y}),i.a.createElement(\"circle\",{id:\"node-c-message-to-a\",className:\"node-small-circle\",cx:N.messageToA.x,cy:N.messageToB.y}),i.a.createElement(\"circle\",{id:\"node-c-message-to-client\",className:\"node-small-circle visibility-hidden\",cx:N.messageToClient.x,cy:N.messageToClient.y}),i.a.createElement(\"g\",{id:\"node-c-partition-wrap\",className:\"visibility-hidden\"},i.a.createElement(\"path\",{d:\"M250,360a83,75,0,1,1,190,-15\",id:\"node-c-partition\",className:\"node-partition\"}),i.a.createElement(\"text\",{fill:\"black\"},i.a.createElement(\"tspan\",{x:N.partitionText1.x,y:N.partitionText1.y},\"Partitioned\"),i.a.createElement(\"tspan\",{x:N.partitionText2.x,y:N.partitionText2.y},\"from A & B\"))),i.a.createElement(\"g\",null,i.a.createElement(\"rect\",{id:\"client-message-status-bg\",className:\"visibility-hidden\",x:e-92,y:t-152,fill:\"white\",width:\"210\",height:\"76\"}),i.a.createElement(\"text\",{id:\"client-query-message\",x:e-90,y:t-148,className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{id:\"client-query-message-anchor\",x:e-80,dy:\"1.2em\"},\"Query: \"),i.a.createElement(\"tspan\",{id:\"client-query-message-text1\",dx:5,className:\"code-block\"}),i.a.createElement(\"tspan\",{id:\"client-query-message-text2\",x:e-83,dy:\"1.2em\",className:\"code-block\"}),i.a.createElement(\"tspan\",{id:\"client-query-message-text3\",x:e-83,dy:\"1.2em\",className:\"code-block\"})),i.a.createElement(\"foreignObject\",{x:e-85,y:t-148,width:\"200\",height:\"70\"},i.a.createElement(\"div\",{id:\"client-message-status\"})),i.a.createElement(\"path\",{id:\"client-message-bubble\",className:\"visibility-hidden\",d:\"M\".concat(e+3,\",\").concat(t-50,\" l0,-26 l-90,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l200,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-90,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}})),i.a.createElement(\"g\",{id:\"client-message\",className:\"visibility-hidden\"},i.a.createElement(\"circle\",{id:\"client-message-circle\",className:\"client-message\",cx:e,cy:t}),i.a.createElement(\"text\",{id:\"client-message-text\",x:e-18,y:t+24})),i.a.createElement(\"image\",{href:\"./warning-sign.jpg\",width:\"200\",x:\"0\",y:\"0\"}),i.a.createElement(\"circle\",{id:\"node-b-small-circle\",className:\"node-small-circle\",cx:s+24,cy:o+12}),i.a.createElement(\"circle\",{id:\"node-a-message-to-b\",className:\"node-small-circle visibility-hidden\",cx:_.messageToB.x,cy:_.messageToB.y}),i.a.createElement(\"circle\",{id:\"node-a-message-to-c\",className:\"node-small-circle visibility-hidden\",cx:_.messageToB.x,cy:_.messageToB.y}),i.a.createElement(\"circle\",{id:\"node-a-message-to-client\",className:\"node-small-circle visibility-hidden\",cx:_.messageToClient.x,cy:_.messageToClient.y}),i.a.createElement(\"g\",{id:\"node-c-wrap\"},i.a.createElement(\"circle\",{id:\"node-c-outer-circle\",className:\"node-outer-circle\",cx:d+32,cy:r,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),i.a.createElement(\"circle\",{id:\"node-c-circle\",cx:d+32,cy:r,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),i.a.createElement(\"text\",{id:\"node-c-main-text\",x:d+30,y:r+6,className:\"node-text\",fill:\"black\"},\"Node C\"),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.myLeaseTimerId(A.a.NODE_C),x:d-48,y:r+93,label:\"My Lease\"}),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.leaderLeaseTimerId(A.a.NODE_C),x:d-48,y:r+93,label:\"Leader Lease\"})),i.a.createElement(\"g\",null,i.a.createElement(\"rect\",{id:\"node-c-text-highlight\",className:\"visibility-hidden\",x:d+5,y:r+62,width:\"55\",height:\"24\",fill:\"yellow\"}),i.a.createElement(\"text\",{id:\"node-c-term-text-rect\",x:d+10,y:r+40,fill:\"black\",className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{id:\"node-c-term-text\",x:d+10,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-c-extra-text\",className:\"node-extra-text\",x:d+10,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-c-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),i.a.createElement(\"foreignObject\",{x:d-15,y:r-174,width:\"235\",height:\"80\"},i.a.createElement(\"div\",{id:\"node-c-message-text-alt\"})),i.a.createElement(\"text\",{id:\"node-c-message-status\",x:d-10,y:r-130,className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{id:\"node-c-message-status-text1\",x:d-10,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-c-message-status-text2\",x:d-10,dy:\"1.2em\"})),i.a.createElement(\"path\",{id:\"node-c-message-bubble\",className:\"visibility-hidden\",d:\"M\".concat(d+40,\",\").concat(d-40,\" l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l215,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-140,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),i.a.createElement(\"path\",{id:\"node-c-message-bubble-alt\",className:\"visibility-hidden\",d:\"M\".concat(d+45,\",\").concat(d-50,\" l15,-40 l-80,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l235,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-135,0 z\"),style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),i.a.createElement(\"g\",{id:\"node-a-wrap\"},i.a.createElement(\"circle\",{id:\"node-a-outer-circle\",className:\"node-outer-circle\",cx:n,cy:a,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),i.a.createElement(\"circle\",{id:\"node-a-circle\",cx:n,cy:a,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),i.a.createElement(\"text\",{id:\"node-a-main-text\",x:n,y:a+6,className:\"node-text\"},\"Node A\"),i.a.createElement(\"rect\",{id:\"node-a-timer-highlight\",className:\"visibility-hidden\",x:_.leaseTimer.x+18,y:_.leaseTimer.y-12,width:\"75\",height:\"20\",fill:\"yellow\"}),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.myLeaseTimerId(A.a.NODE_A),x:_.leaseTimer.x-24,y:_.leaseTimer.y,label:\"My Lease\"}),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.leaderLeaseTimerId(A.a.NODE_A),x:_.leaseTimer.x-24,y:_.leaseTimer.y,label:\"Leader Lease\"})),i.a.createElement(\"g\",null,i.a.createElement(\"rect\",{id:\"node-a-term-highlight\",className:\"visibility-hidden\",x:n-30,y:a+41,width:\"63\",height:\"24\",fill:\"yellow\"}),i.a.createElement(\"rect\",{id:\"node-a-text-highlight\",className:\"visibility-hidden\",x:n-30,y:a+62,width:\"55\",height:\"24\",fill:\"yellow\"}),i.a.createElement(\"text\",{id:\"node-a-term-text-rect\",x:n,y:a+40,fill:\"black\",className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{id:\"node-a-term-text\",x:n-24,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-a-extra-text\",className:\"node-extra-text\",x:n-24,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-a-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),i.a.createElement(\"circle\",{id:\"node-b-message-to-a\",className:\"node-small-circle visibility-hidden\",cx:L.messageToA.x,cy:L.messageToA.y}),i.a.createElement(\"circle\",{id:\"node-b-message-to-c\",className:\"node-small-circle visibility-visible log-message\",cx:L.messageToC.x,cy:L.messageToC.y}),i.a.createElement(\"g\",{id:\"node-b-wrap\"},i.a.createElement(\"circle\",{id:\"node-b-circle\",cx:s+24,cy:o,r:\"35\",stroke:\"rgb(70, 130, 180)\",strokeWidth:\"0\",fill:\"rgb(70, 130, 180)\"}),i.a.createElement(\"circle\",{id:\"node-b-outer-circle\",className:\"node-outer-circle\",cx:s+24,cy:o,r:\"38\",stroke:\"rgb(158, 196, 226)\",strokeWidth:\"6\",fill:\"transparent\"}),i.a.createElement(\"text\",{id:\"node-b-main-text\",x:s+24,y:o+6,className:\"node-text\"},\"Node B\"),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.myLeaseTimerId(A.a.NODE_B),x:s-54,y:o+95,label:\"My Lease\"}),i.a.createElement(I,{className:\"visibility-hidden\",uid:y.leaderLeaseTimerId(A.a.NODE_B),x:s-54,y:o+95,label:\"Leader Lease\"})),i.a.createElement(\"g\",null,i.a.createElement(\"rect\",{id:\"node-b-term-highlight\",className:\"visibility-hidden\",x:s-6,y:o+45,width:\"63\",height:\"24\",fill:\"yellow\"}),i.a.createElement(\"rect\",{id:\"node-b-text-highlight\",className:\"visibility-hidden\",x:s-6,y:o+65,width:\"55\",height:\"24\",fill:\"yellow\"}),i.a.createElement(\"text\",{id:\"node-b-term-text-rect\",x:s,y:o+43,fill:\"black\",className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{id:\"node-b-term-text\",x:s,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-b-extra-text\",className:\"node-extra-text\",x:s,dy:\"1.2em\"}),i.a.createElement(\"tspan\",{id:\"node-b-extra-text2\",className:\"node-extra-text2\",dx:\"0.5em\"}))),i.a.createElement(\"rect\",{id:\"node-a-message-status-bg\",className:\"visibility-hidden\",x:n-40,y:a-167,fill:\"white\",width:\"207\",height:\"100\"}),i.a.createElement(\"foreignObject\",{x:n-32,y:a-155,width:\"200\",height:\"80\"},i.a.createElement(\"div\",{id:\"node-a-message-status\"})),i.a.createElement(\"path\",{id:\"node-a-message-bubble\",className:\"visibility-hidden\",d:\"M62,284 l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-90 c0,0 0,-5 5,-5 l196,0 c0,0 5,0 5,5 l0,90 c0,0 0,5 -5,5 l-126,0 z\",style:{fillOpacity:0,stroke:\"black\",strokeWidth:1}}),i.a.createElement(\"g\",{id:\"client-node\",className:\"visibility-visible\"},i.a.createElement(\"circle\",{className:\"client-node\",cx:186,cy:550}),i.a.createElement(\"text\",{id:\"client-node-main-text\",x:186,y:559,className:\"client-node-text\"},\"Client\"),i.a.createElement(\"text\",{id:\"client-node-value\",x:226,y:559}),i.a.createElement(\"text\",{id:\"client-node-value-alt\",x:226,y:559,className:\"visibility-hidden\"},i.a.createElement(\"tspan\",{fill:\"red\",x:226,fontSize:\"1.5em\"},\"\\xd7\"),i.a.createElement(\"tspan\",{id:\"client-node-value-error-header\",dx:\"4px\"}),i.a.createElement(\"tspan\",{id:\"client-node-value-error-subtitle\",fill:\"red\",x:226,dy:\"1.2em\"}))),i.a.createElement(\"g\",{id:\"node-c-lease-to-node-a\",className:\"visibility-hidden\"},i.a.createElement(\"use\",{href:\"#analog-clock\",x:d+6,y:r-36})),i.a.createElement(\"g\",{id:\"node-c-lease-to-node-b\",className:\"visibility-hidden\"},i.a.createElement(\"use\",{href:\"#analog-clock\",x:d+24,y:r-36})),i.a.createElement(\"g\",{id:\"node-a-lease-to-node-b\",className:\"visibility-hidden\"},i.a.createElement(\"use\",{href:\"#analog-clock\",x:n,y:a-36})))}}]),t}(a.Component),b=n(13),S=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=A.a.ANIMATION_STATE_INITIAL,n.state={animationFinished:!1,previousEnabled:!0},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\")}},{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),E=document.getElementById(\"node-b-extra-text\"),u=document.getElementById(\"node-c-extra-text\"),g=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-a-extra-text2\"),I=document.getElementById(\"node-a-message-bubble\"),y=document.getElementById(\"node-a-message-status\"),x=document.getElementById(\"client-message-bubble\"),_=document.getElementById(\"client-query-message\"),N=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case A.a.ANIMATION_STATE_INITIAL:for(var L=document.getElementsByClassName(\"node-outer-circle\"),O=0;O<L.length;O++)b.hideElement(L[O]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),b.showElement(a),b.showElement(i),b.showElement(s),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",E.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_UNSAFE_READ\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_UNSAFE_READ\":this.changeMainText(\"\"),b.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var S=document.getElementById(\"node-c-message-text-alt\"),f={index:0,str:\"Unsafe to read from raft leader without majority heartbeats. This sequence explains why.\"};Object(T.a)({targets:f,index:f.str.length,easing:\"linear\",duration:1500,update:function(){S.innerText=f.str.substr(0,f.index)},complete:function(){n.animationState=\"ANIMATION_STATE_NODE_C_PARTITIONED\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_NODE_C_PARTITIONED\":this.changeMainText(\"\");var M=document.getElementById(\"node-c-message-text-alt\");b.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var B={index:0,str:\"Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]\"};Object(T.a)({targets:B,index:B.str.length,easing:\"linear\",duration:1500,update:function(){M.innerText=B.str.substr(0,B.index)},complete:function(){b.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\":document.getElementById(\"node-c-message-text-alt\").innerText=\"\",b.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),b.showElement(I);var C={index:0,str:\"This results in A and B\\n electing a new raft\\nleader, say A.\"};Object(T.a)({targets:C,index:C.str.length,easing:\"linear\",duration:1300,update:function(){y.innerHTML=C.str.substr(0,C.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-node\"),b.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),b.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),b.showElement(l),b.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_SET_OPERATION\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_SET_OPERATION\":y.innerHTML=\"\",b.hideElement(I),b.hideElement(l),b.hideElement(m),b.introduceClient();var D={index:0,str:\"UPDATE T SET\"},v={index:0,str:\"value = V2 WHERE\"},p={index:0,str:\" key = k\"},R=document.getElementById(\"client-query-message-text1\"),w=document.getElementById(\"client-query-message-text2\"),k=document.getElementById(\"client-query-message-text3\");b.showElement(x),b.showElement(N),b.showElement(_),Object(T.a)({targets:D,index:D.str.length,easing:\"linear\",duration:400,update:function(){R.textContent=D.str.substr(0,D.index)},complete:function(){Object(T.a)({targets:v,index:v.str.length,easing:\"linear\",duration:400,update:function(){w.textContent=v.str.substr(0,v.index)},complete:function(){Object(T.a)({targets:p,index:p.str.length,easing:\"linear\",duration:400,update:function(){k.textContent=p.str.substr(0,p.index)},complete:function(){b.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){b.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!0,!1,\"(k, V2)\").finished.then(function(){document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",b.hideElement(x),b.hideElement(_),b.showElement(I);var t=b.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!1,!1,\"\",!0,600);c.innerHTML=\"(k, V2)\",b.showElement(g),b.hideElement(h),t.finished.then(function(){b.showElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"node-b-extra-text\").innerHTML=\"(k, V2)\",b.hideElement(document.getElementById(\"node-b-extra-text2\"))}),y.innerHTML=\"\",b.hideElement(I),b.sendLogMessage(A.a.NODE_A,A.a.CLIENT_NODE).finished.then(function(){b.showElement(x),b.hideElement(_),document.getElementById(\"client-message-status\").textContent=\"Update successful!\",n.animationState=\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\",e({animationState:n.animationState,delay:100})})})})}})}})}});break;case\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\":y.innerHTML=\"\",b.hideElement(I),b.hideElement(document.getElementById(\"node-a-text-highlight\")),b.hideElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",b.hideElement(x),b.hideElement(_),document.getElementById(\"client-message-status\").innerHTML=\"\",this.changeMainText(\"Now the client queries C. This should return value = V2\",function(){n.animationState=\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\":this.changeMainText(\"\");var H=document.getElementById(\"client-query-message-text1\"),P=document.getElementById(\"client-query-message-text2\");H.innerHTML=\"\",P.innerHTML=\"\",b.showElement(x),b.showElement(N),b.showElement(_),b.hideElement(document.getElementById(\"node-c-extra-text2\"));var j={index:0,str:\"SELECT value\"},V={index:0,str:\"FROM T WHERE key = k\"};Object(T.a)({targets:j,index:j.str.length,easing:\"linear\",duration:400,update:function(){H.innerHTML=j.str.substr(0,j.index)},complete:function(){Object(T.a)({targets:V,index:V.str.length,easing:\"linear\",duration:600,update:function(){P.innerHTML=V.str.substr(0,V.index)},complete:function(){b.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_C,!1),n.animationState=\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\",e({animationState:n.animationState,delay:100})}})}});break;case\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\":b.hideElement(x),b.hideElement(N),b.hideElement(_);var F=document.getElementById(\"node-c-message-text-alt\");b.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var U={index:0,str:\"C thinks it is the raft leader.\\nWithout majority heartbeats,\\nC will respond with value = V1\"};Object(T.a)({targets:U,index:U.str.length,easing:\"linear\",duration:1500,update:function(){F.innerText=U.str.substr(0,U.index)},complete:function(){b.sendLogMessage(A.a.NODE_C,A.a.CLIENT_NODE,!1).finished.then(function(){b.showElement(document.getElementById(\"client-node-value-alt\")),document.getElementById(\"client-node-value-error-header\").innerHTML=\"Value: V1\",document.getElementById(\"client-node-value-error-subtitle\").innerHTML=\"Expected value = V2\"}),n.animationState=A.a.ANIMATION_STATE_FINISHED,n.setState({animationFinished:!0}),e({animationState:n.animationState,delay:100})}});break;case A.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),E=document.getElementById(\"node-b-extra-text\"),u=document.getElementById(\"node-c-extra-text\"),g=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),I=document.getElementById(\"node-a-extra-text2\"),y=document.getElementById(\"node-a-message-bubble\"),x=document.getElementById(\"node-a-message-status\"),_=document.getElementById(\"client-message-bubble\"),N=document.getElementById(\"client-query-message\"),L=document.getElementById(\"client-message-status-bg\"),O=document.getElementById(\"node-c-partition-wrap\");switch(this.animationState){case\"ANIMATION_STATE_UNSAFE_READ\":document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),b.hideElement(a),b.hideElement(i),b.hideElement(s),o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",c.innerHTML=\"\",E.innerHTML=\"\",u.innerHTML=\"\",this.changeMainText(\"\"),this.animationState=A.a.ANIMATION_STATE_INITIAL,e({animationState:this.animationState,delay:100});break;case\"ANIMATION_STATE_NODE_C_PARTITIONED\":var S=document.getElementById(\"node-c-circle\");S.classList.remove(\"leader-node\"),b.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerText=\"\",o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",c.innerHTML=\"\",E.innerHTML=\"\",u.innerHTML=\"\",this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",E.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",S.classList.add(\"leader-node\"),n.animationState=\"ANIMATION_STATE_UNSAFE_READ\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\":b.hideElement(O);var f=document.getElementById(\"node-c-message-text-alt\");f.innerText=\"\";var M={index:0,str:\"Unsafe to read from raft leader without majority heartbeats. This sequence explains why.\"};Object(T.a)({targets:M,index:M.str.length,easing:\"linear\",duration:1500,update:function(){f.innerText=M.str.substr(0,M.index)},complete:function(){n.animationState=\"ANIMATION_STATE_NODE_C_PARTITIONED\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_SET_OPERATION\":document.getElementById(\"node-a-circle\").classList.remove(\"leader-node\"),b.hideElement(O),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",b.hideElement(l),b.hideElement(m),b.hideElement(document.getElementById(\"node-a-message-bubble\")),x.innerText=\"\";var B=document.getElementById(\"node-c-message-text-alt\");b.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var C={index:0,str:\"Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]\"};Object(T.a)({targets:C,index:C.str.length,easing:\"linear\",duration:1500,update:function(){B.innerText=C.str.substr(0,C.index)},complete:function(){b.showElement(O),n.animationState=\"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\":b.hideElement(_),b.hideElement(document.getElementById(\"client-node\")),b.hideElement(document.getElementById(\"client-message-circle\")),document.getElementById(\"client-message-status\").innerHTML=\"\",b.hideElement(g),b.hideElement(h),b.hideElement(N),c.innerText=\"(k, V1)\",E.innerText=\"(k, V1)\",b.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 1\"}),b.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 1\"}),b.showElement(y);var D={index:0,str:\"This results in A and B\\n electing a new raft\\nleader, say A.\"};Object(T.a)({targets:D,index:D.str.length,easing:\"linear\",duration:1300,update:function(){x.innerHTML=D.str.substr(0,D.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-node\"),b.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),b.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),b.showElement(l),b.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_SET_OPERATION\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\":this.changeMainText(\"\"),x.innerHTML=\"\",b.hideElement(y),b.hideElement(l),b.hideElement(m),b.introduceClient();var v={index:0,str:\"UPDATE T SET\"},p={index:0,str:\"value = V2 WHERE\"},R={index:0,str:\" key = k\"},w=document.getElementById(\"client-query-message-text1\"),k=document.getElementById(\"client-query-message-text2\"),H=document.getElementById(\"client-query-message-text3\");w.innerHTML=\"\",k.innerHTML=\"\",H.innerHTML=\"\",b.showElement(_),b.showElement(L),b.showElement(N),Object(T.a)({targets:v,index:v.str.length,easing:\"linear\",duration:400,update:function(){w.textContent=v.str.substr(0,v.index)},complete:function(){Object(T.a)({targets:p,index:p.str.length,easing:\"linear\",duration:400,update:function(){k.textContent=p.str.substr(0,p.index)},complete:function(){Object(T.a)({targets:R,index:R.str.length,easing:\"linear\",duration:400,update:function(){H.textContent=R.str.substr(0,R.index)},complete:function(){b.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){b.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!0,!1,\"(k, V2)\").finished.then(function(){document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",b.hideElement(_),b.showElement(y);var t=b.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!1,!1,\"\",!0,600);c.innerHTML=\"(k, V2)\",b.showElement(g),b.hideElement(I),t.finished.then(function(){b.showElement(document.getElementById(\"node-b-text-highlight\")),document.getElementById(\"node-b-extra-text\").innerHTML=\"(k, V2)\",b.hideElement(document.getElementById(\"node-b-extra-text2\"))}),x.innerHTML=\"\",b.hideElement(y),b.sendLogMessage(A.a.NODE_A,A.a.CLIENT_NODE).finished.then(function(){b.showElement(_),document.getElementById(\"client-message-status\").textContent=\"Update successful!\",n.animationState=\"ANIMATION_STATE_CLIENT_READ_FROM_NODE_C\",e({animationState:n.animationState,delay:100})})})})}})}})}});break;case\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\":b.hideElement(L),b.hideElement(N),b.hideElement(_),this.changeMainText(\"Now the client queries C. This should return value = V2\",function(){n.animationState=\"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\",e({animationState:n.animationState,delay:100})});break;case A.a.ANIMATION_STATE_FINISHED:this.setState({animationFinished:!1}),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",b.hideElement(document.getElementById(\"client-node-value-alt\")),b.hideElement(document.getElementById(\"node-c-message-bubble-alt\"));var P=document.getElementById(\"client-query-message-text1\"),j=document.getElementById(\"client-query-message-text2\");P.innerHTML=\"\",j.innerHTML=\"\",b.showElement(_),b.showElement(L),b.showElement(N),b.hideElement(document.getElementById(\"node-c-extra-text2\"));var V={index:0,str:\"SELECT value\"},F={index:0,str:\"FROM T WHERE key = k\"};Object(T.a)({targets:V,index:V.str.length,easing:\"linear\",duration:400,update:function(){P.innerHTML=V.str.substr(0,V.index)},complete:function(){Object(T.a)({targets:F,index:F.str.length,easing:\"linear\",duration:600,update:function(){j.innerHTML=F.str.substr(0,F.index)},complete:function(){b.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_C,!1),n.animationState=\"ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE\",e({animationState:n.animationState,delay:100})}})}});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t){b.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(O,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}}]),t}(a.Component),f=n(13),M=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=A.a.ANIMATION_STATE_INITIAL,n.state={animationFinished:!1,previousEnabled:!0},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\")}},{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-extra-text\"),m=document.getElementById(\"node-b-extra-text\"),c=document.getElementById(\"node-c-extra-text\"),E=document.getElementById(\"node-a-text-highlight\"),u=document.getElementById(\"node-b-text-highlight\"),g=document.getElementById(\"node-c-text-highlight\"),h=document.getElementById(\"client-message-bubble\");switch(this.animationState){case A.a.ANIMATION_STATE_INITIAL:for(var I=document.getElementsByClassName(\"node-outer-circle\"),y=0;y<I.length;y++)f.hideElement(I[y]);this.changeMainText(\"Let\\u2019s say we have a 3-node raft group.\"),this.animationState=\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",e({animationState:\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",delay:100});break;case\"ANIMATION_STATE_EXPLAIN_PROTOCOL\":this.changeMainText(\"Nodes would have performed leader election..\",function(){f.showElement(a),f.showElement(i),f.showElement(s),l.innerHTML=\"Voted For C\",m.innerHTML=\"Voted For C\",c.innerHTML=\"Voted For C\"}),this.animationState=\"ANIMATION_STATE_LEADER_ELECTION\",e({animationState:\"ANIMATION_STATE_LEADER_ELECTION\",delay:100});break;case\"ANIMATION_STATE_LEADER_ELECTION\":this.changeMainText(\"\"),f.showElement(document.getElementById(\"node-c-message-bubble\")),f.showElement(document.getElementById(\"node-c-message-status\"));var x={index:0,str:\"C is the current raft leader,\"},_={index:0,str:\"denoted by a black border.\"},N=document.getElementById(\"node-c-message-status-text1\"),L=document.getElementById(\"node-c-message-status-text2\");Object(T.a)({targets:x,index:x.str.length,easing:\"linear\",duration:600,update:function(){N.innerHTML=x.str.substr(0,x.index)},complete:function(){Object(T.a)({targets:_,index:_.str.length,easing:\"linear\",duration:900,update:function(){L.innerHTML=_.str.substr(0,_.index)},complete:function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",n.animationState=\"ANIMATION_STATE_NODE_DATA\",e({animationState:\"ANIMATION_STATE_NODE_DATA\",delay:100})}})}});break;case\"ANIMATION_STATE_NODE_DATA\":f.hideElement(document.getElementById(\"node-c-message-bubble\")),f.hideElement(document.getElementById(\"node-c-message-status\")),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",this.changeMainText(\"Assume all nodes have data: <br />(key,value) = (k, V1)\",function(){l.innerHTML=\"(k, V1)\",m.innerHTML=\"(k, V1)\",c.innerHTML=\"(k, V1)\",f.showElement(E),f.showElement(u),f.showElement(g)}),this.animationState=\"ANIMATION_STATE_CLIENT_INTRODUCED\",e({animationState:\"ANIMATION_STATE_CLIENT_INTRODUCED\",delay:100});break;case\"ANIMATION_STATE_CLIENT_INTRODUCED\":var O=f.introduceClient(\"\");this.changeMainText(\"\"),O.finished.then(function(){f.hideElement(E),f.hideElement(u),f.hideElement(g),f.showElement(document.getElementById(\"client-message\"));var t=document.getElementById(\"client-query-message\");document.getElementById(\"client-query-message-text1\");var a={index:0,str:\"SELECT value\"},i={index:0,str:\"FROM T WHERE key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\");f.showElement(h),f.showElement(t),Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:600,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){Object(T.a)({targets:i,index:i.str.length,easing:\"linear\",duration:900,update:function(){o.innerHTML=i.str.substr(0,i.index)},complete:function(){return f.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_C,!1)}})}}),n.animationState=\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",e({animationState:\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",delay:100})});break;case\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\":f.hideElement(document.getElementById(\"client-query-message\")),f.hideElement(h),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\";var b=document.getElementById(\"node-c-message-status\");f.showElement(document.getElementById(\"node-c-message-bubble\")),f.showElement(b);var S={index:0,str:\"Per raft protocol, leader should\"},M={index:0,str:\"obtain majority heartbeat.\"},B=document.getElementById(\"node-c-message-status-text1\"),C=document.getElementById(\"node-c-message-status-text2\");Object(T.a)({targets:S,index:S.str.length,easing:\"linear\",duration:800,update:function(){B.textContent=S.str.substr(0,S.index)},complete:function(){Object(T.a)({targets:M,index:M.str.length,easing:\"linear\",duration:1040,update:function(){C.textContent=M.str.substr(0,M.index)},complete:function(){return f.logMessageFromLeaderToFollowers(!1)}}),n.animationState=\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\"}}),e({animationState:this.animationState,delay:1e3});break;case\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\":f.logMessageAckFromFollowersToLeader()[0].finished.then(function(){document.getElementById(\"node-c-message-status-text1\").textContent=\"Leader:\",document.getElementById(\"node-c-message-status-text2\").textContent=\"\";var t={index:7,str:\"Majority heartbeat obtained,\"},a={index:0,str:\"raft leader can serve read.\"},i=document.getElementById(\"node-c-message-status-text1\"),s=document.getElementById(\"node-c-message-status-text2\");Object(T.a)({targets:t,index:t.str.length,easing:\"linear\",duration:800,update:function(){i.textContent=t.str.substr(0,t.index)},complete:function(){Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:1080,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){f.sendLogMessage(A.a.NODE_C,A.a.CLIENT_NODE).finished.then(function(){f.setSVGText({targetId:\"client-node-value\",text:\"value: \".concat(\"V1\"),showElement:!0}),n.animationState=\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\",e({animationState:n.animationState,delay:100})})}})}})});break;case\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\":f.hideElement(document.getElementById(\"node-c-message-bubble\")),f.hideElement(document.getElementById(\"node-c-message-status\")),this.changeMainText(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"550.45\",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:\"627.77\";return'<svg id=\"Layer_3\" xmlns=\"http://www.w3.org/2000/svg\" height='.concat(e,'\" width=\"').concat(t,'\" version=\"1.0\" viewBox=\"0 0 627.769 550.45\">\\n\\t\\t\\t<path id=\"path2231\" fill=\"#ea0000\" d=\"m614.57 504.94l-279.4-483.94c-4.38-7.588-12.47-12.262-21.23-12.262s-16.85 4.674-21.23 12.258l-279.41 483.94c-4.375 7.58-4.375 16.93 0.003 24.52 4.379 7.58 12.472 12.25 21.23 12.25h558.81c8.76 0 16.86-4.67 21.23-12.25 4.38-7.59 4.38-16.94 0-24.52z\"/>\\n\\t\\t\\t<polygon id=\"polygon2233\" points=\"93.977 482.88 533.9 482.88 313.94 101.89\" fill=\"#fff\"/>\\n\\t\\t\\t<path id=\"path2235\" d=\"m291.87 343.36c1.21 11.49 3.21 20.04 6.02 25.66 2.81 5.63 7.82 8.43 15.04 8.43h2.01c7.22 0 12.24-2.8 15.04-8.43 2.81-5.62 4.82-14.17 6.02-25.66l6.42-88.75c1.21-17.3 1.81-29.71 1.81-37.25 0-10.25-2.91-18.25-8.73-23.99-5.53-5.46-13.38-8.59-21.56-8.59s-16.04 3.13-21.57 8.59c-5.81 5.74-8.72 13.74-8.72 23.99 0 7.54 0.6 19.95 1.8 37.25l6.42 88.75z\"/>\\n\\t\\t\\t<circle id=\"circle2237\" cy=\"430.79\" cx=\"313.94\" r=\"30.747\"/>\\n\\t\\t</svg>')}(26,28)+\" If nodes are in different regions, obtaining majority heartbeat is expensive. Query has high latency.\"),this.animationState=A.a.ANIMATION_STATE_FINISHED,this.setState({animationFinished:!0}),e({animationState:this.animationState,delay:100});break;case A.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState),t(\"Unrecognized state: \"+this.animationState)}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-extra-text\"),m=document.getElementById(\"node-b-extra-text\"),c=document.getElementById(\"node-c-extra-text\"),E=document.getElementById(\"node-a-text-highlight\"),u=document.getElementById(\"node-b-text-highlight\"),g=document.getElementById(\"node-c-text-highlight\"),h=document.getElementById(\"client-message-bubble\");switch(this.animationState){case\"ANIMATION_STATE_EXPLAIN_PROTOCOL\":this.changeMainText(\"\"),this.animationState=A.a.ANIMATION_STATE_INITIAL,e({animationState:A.a.ANIMATION_STATE_INITIAL,delay:100});break;case\"ANIMATION_STATE_LEADER_ELECTION\":f.hideElement(a),f.hideElement(i),f.hideElement(s),f.showElement(this.mainTextSect),this.changeMainText(\"Let\\u2019s say we have a 3-node raft group.\",function(){n.animationState=\"ANIMATION_STATE_EXPLAIN_PROTOCOL\"}),e({animationState:\"ANIMATION_STATE_EXPLAIN_PROTOCOL\",delay:100});break;case\"ANIMATION_STATE_NODE_DATA\":document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),f.hideElement(document.getElementById(\"node-c-message-bubble\")),f.hideElement(document.getElementById(\"node-c-message-status\")),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",o.innerHTML=\"\",d.innerHTML=\"\",r.innerHTML=\"\",l.innerHTML=\"\",m.innerHTML=\"\",c.innerHTML=\"\",this.changeMainText(\"Nodes would have performed leader election..\",function(){l.innerHTML=\"Voted For C\",m.innerHTML=\"Voted For C\",c.innerHTML=\"Voted For C\"}),this.animationState=\"ANIMATION_STATE_LEADER_ELECTION\",e({animationState:\"ANIMATION_STATE_LEADER_ELECTION\",delay:100});break;case\"ANIMATION_STATE_CLIENT_INTRODUCED\":this.changeMainText(\"\"),document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),f.hideElement(E),f.hideElement(u),f.hideElement(g),l.innerHTML=\"Voted for C\",m.innerHTML=\"Voted for C\",c.innerHTML=\"Voted for C\",f.showElement(document.getElementById(\"node-c-message-bubble\")),f.showElement(document.getElementById(\"node-c-message-status\"));var I={index:0,str:\"C is the current raft leader,\"},y={index:0,str:\"denoted by the black border.\"},x=document.getElementById(\"node-c-message-status-text1\"),_=document.getElementById(\"node-c-message-status-text2\");Object(T.a)({targets:I,index:I.str.length,easing:\"linear\",duration:600,update:function(){x.innerHTML=I.str.substr(0,I.index)},complete:function(){Object(T.a)({targets:y,index:y.str.length,easing:\"linear\",duration:900,update:function(){_.innerHTML=y.str.substr(0,y.index)},complete:function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",n.animationState=\"ANIMATION_STATE_NODE_DATA\",e({animationState:\"ANIMATION_STATE_NODE_DATA\",delay:100})}})}});break;case\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\":f.hideElement(document.getElementById(\"client-query-message\")),f.hideElement(h),f.hideClient(),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",this.changeMainText(\"Assume all nodes have data: <br />(key,value) = (k, V1)\",function(){f.showElement(E),f.showElement(u),f.showElement(g),n.animationState=\"ANIMATION_STATE_CLIENT_INTRODUCED\",e({animationState:\"ANIMATION_STATE_CLIENT_INTRODUCED\",delay:100})});break;case\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\":var N=document.getElementById(\"node-c-message-status\");f.hideElement(document.getElementById(\"node-c-message-bubble\")),f.hideElement(N),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\";var L=f.introduceClient(\"\");this.changeMainText(\"\"),L.finished.then(function(){f.hideElement(E),f.hideElement(u),f.hideElement(g),f.showElement(document.getElementById(\"client-message\"));var t=document.getElementById(\"client-query-message\");document.getElementById(\"client-query-message-text1\");var a={index:0,str:\"SELECT value\"},i={index:0,str:\"FROM T WHERE key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\");f.showElement(h),f.showElement(t),Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:600,update:function(){s.innerHTML=a.str.substr(0,a.index)},complete:function(){Object(T.a)({targets:i,index:i.str.length,easing:\"linear\",duration:900,update:function(){o.innerHTML=i.str.substr(0,i.index)},complete:function(){f.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_C,!1).finished.then(function(){n.animationState=\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",e({animationState:\"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\",delay:100})})}})}})});break;case\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\":var O=document.getElementById(\"node-c-message-status-text1\"),b=document.getElementById(\"node-c-message-status-text2\");f.hideElement(document.getElementById(\"client-node-value\")),O.innerHTML=\"\",b.innerHTML=\"\";var S={index:0,str:\"Per raft protocol, leader should\"},M={index:0,str:\"obtain majority heartbeat.\"};Object(T.a)({targets:S,index:S.str.length,easing:\"linear\",duration:800,update:function(){O.textContent=S.str.substr(0,S.index)},complete:function(){Object(T.a)({targets:M,index:M.str.length,easing:\"linear\",duration:1040,update:function(){b.textContent=M.str.substr(0,M.index)},complete:function(){return f.logMessageFromLeaderToFollowers(!1)}}),n.animationState=\"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\",e({animationState:n.animationState,delay:100})}});break;case A.a.ANIMATION_STATE_FINISHED:this.changeMainText(\"\"),f.hideElement(document.getElementById(\"client-node-value\")),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",this.setState({animationFinished:!1}),f.logMessageAckFromFollowersToLeader()[0].finished.then(function(){var t=document.getElementById(\"node-c-message-status\");f.showElement(document.getElementById(\"node-c-message-bubble\")),f.showElement(t);var a={index:7,str:\"Majority heartbeat obtained,\"},i={index:0,str:\"raft leader can serve read.\"},s=document.getElementById(\"node-c-message-status-text1\"),o=document.getElementById(\"node-c-message-status-text2\");Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:800,update:function(){s.textContent=a.str.substr(0,a.index)},complete:function(){Object(T.a)({targets:i,index:i.str.length,easing:\"linear\",duration:1080,update:function(){o.textContent=i.str.substr(0,i.index)},complete:function(){f.sendLogMessage(A.a.NODE_C,A.a.CLIENT_NODE).finished.then(function(){f.setSVGText({targetId:\"client-node-value\",text:\"value: \".concat(\"V1\"),showElement:!0}),n.animationState=\"ANIMATION_STATE_CLIENT_FINISH_OPERATION\",e({animationState:n.animationState,delay:100})})}})}})});break;default:console.error(\"Unrecognized state or unimplemented: \"+this.animationState),t(\"Unrecognized state or unimplemented: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t){f.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(O,null)))}}]),t}(a.Component),B=n(13),C=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=A.a.ANIMATION_STATE_INITIAL,n.state={previousEnabled:!0},n.init(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"init\",value:function(){this.nodeATimerAnimation=null,this.nodeBTimerAnimation=null,this.nodeCTimerAnimation=null}},{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"center-message-text\"),this.timersAreActive=!1}},{key:\"pause\",value:function(){this.timersAreActive&&this.pauseTimers()}},{key:\"resume\",value:function(){this.timersAreActive&&this.resumeTimers()}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),E=document.getElementById(\"node-b-extra-text\"),u=document.getElementById(\"node-c-extra-text\"),g=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),I=document.getElementById(\"node-a-extra-text2\"),y=document.getElementById(\"node-b-extra-text2\"),x=document.getElementById(\"node-a-message-bubble\"),_=document.getElementById(\"node-a-message-status\"),N=document.getElementById(\"node-c-message-bubble\"),L=document.getElementById(\"node-c-message-status\"),O=document.getElementById(\"client-message-bubble\"),b=document.getElementById(\"client-query-message\"),S=document.getElementById(\"client-message-status\"),f=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case A.a.ANIMATION_STATE_INITIAL:for(var M=document.getElementsByClassName(\"node-outer-circle\"),C=0;C<M.length;C++)B.hideElement(M[C]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),B.showElement(a),B.showElement(i),B.showElement(s),B.showElement(o),B.showElement(d),B.showElement(r),B.showElement(c),B.showElement(E),B.showElement(u),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",E.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_LEADER_READS_PROTOCOL\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_READS_PROTOCOL\":this.changeMainText(\"Using leader leases to safely perform reads from the leader..\",function(){n.animationState=\"ANIMATION_STATE_START_LEADER_LEASE\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_START_LEADER_LEASE\":this.changeMainText(\"\"),B.showElement(N),B.showElement(L);var D=document.getElementById(\"node-c-message-status-text1\"),v=document.getElementById(\"node-c-message-status-text2\"),p={index:0,str:\"Raft leader starts a\"},R={index:0,str:\"new lease timer for itself.\"};Object(T.a)({targets:p,index:p.str.length,easing:\"linear\",duration:600,update:function(){D.textContent=p.str.substr(0,p.index)},complete:function(){Object(T.a)({targets:R,index:R.str.length,easing:\"linear\",duration:600,update:function(){v.textContent=R.str.substr(0,R.index)},complete:function(){n.timersAreActive=!0,n.nodeCTimerAnimation?(B.showElement(document.getElementById(\"mlease-rect-node-c\")),n.nodeCTimerAnimation.restart()):(n.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:3e3,targetPercent:90,disableAutoPlay:!0}),n.nodeCTimerAnimation.play()),n.animationState=\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})}})}});break;case\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\":this.nodeCTimerAnimation.seek(0),B.hideElement(N),B.hideElement(L),B.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var w=document.getElementById(\"node-c-message-text-alt\"),k=document.getElementById(\"node-c-lease-to-node-a\"),H={index:0,str:\"Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.\"},P=Object(T.a)({targets:H,index:H.str.length,easing:\"linear\",duration:2500,update:function(){w.innerText=H.str.substr(0,H.index)}}),j=Object(T.a)({targets:k,translateX:-280,translateY:0,easing:\"linear\",duration:1500,begin:function(){B.showElement(k)},complete:function(){B.hideElement(k),k.style.transform=\"none\"}});this.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:5e3,targetPercent:60,startPercent:90});var V=document.getElementById(\"node-c-lease-to-node-b\"),F=Object(T.a)({targets:V,translateX:-150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){B.showElement(V)},complete:function(){B.hideElement(V),V.style.transform=\"none\"}});Promise.all([P.finished,j.finished,F.finished,this.nodeCTimerAnimation]).then(function(){n.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:3e3,targetPercent:85}),n.nodeBTimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_B,{duration:3e3,targetPercent:90}),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_DURATION\",e({animationState:n.animationState,delay:500,asyncAnimation:!0})});break;case\"ANIMATION_STATE_LEADER_LEASE_DURATION\":B.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",this.changeMainText(\"Any new leader must wait out the existing Leader Lease duration before acquiring lease.\",function(){n.animationState=\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\":this.changeMainText(\"Now suppose the original leader gets network partitioned\",function(){B.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\":this.changeMainText(\"\"),B.showElement(x),B.showElement(document.getElementById(\"node-a-message-status-bg\"));var U={index:0,str:\"A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.\"};Object(T.a)({targets:U,index:U.str.length,easing:\"linear\",duration:1500,update:function(){_.innerText=U.str.substr(0,U.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-candidate-node\"),B.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),B.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),B.showElement(l),B.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\":B.hideElement(x),B.hideElement(document.getElementById(\"node-a-message-status-bg\")),_.innerHTML=\"\",B.hideElement(l),B.hideElement(m),this.changeMainText(\"If client tries to write to A, operation is rejected..\",function(){B.introduceClient(),B.showElement(O),B.showElement(f),B.showElement(b);var t={index:0,str:\"UPDATE T SET\"},a={index:0,str:\"value = V2 WHERE\"},i={index:0,str:\" key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\"),d=document.getElementById(\"client-query-message-text3\");Object(T.a)({targets:t,index:t.str.length,easing:\"linear\",duration:400,update:function(){s.textContent=t.str.substr(0,t.index)},complete:function(){Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:400,update:function(){o.textContent=a.str.substr(0,a.index)},complete:function(){Object(T.a)({targets:i,index:i.str.length,easing:\"linear\",duration:400,update:function(){d.textContent=i.str.substr(0,i.index)},complete:function(){var t=document.getElementById(\"client-message\"),a=document.getElementById(\"client-message-circle\");B.messageFromClient(A.a.NODE_A,{onBegin:function(){B.showElement(t),a.classList.add(\"log-message\"),B.setSVGText({targetId:\"client-message-text\",text:\"\"})},onChangeComplete:function(){a.classList.remove(\"log-message\"),a.classList.add(\"error-message\"),B.setSVGText({targetId:\"client-message-text\",text:\"Rejected\"})},onComplete:function(){a.classList.remove(\"error-message\"),B.hideElement(t),t.style.transform=\"none\",B.setSVGText({targetId:\"client-message-text\",text:\"\"}),B.showElement(document.getElementById(\"client-node-value-alt\")),document.getElementById(\"client-node-value-error-header\").innerHTML=\"Query Rejected:\",document.getElementById(\"client-node-value-error-subtitle\").innerHTML=\"Cannot find raft leader\"},alternate:!0}),n.animationState=\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\",e({animationState:n.animationState,delay:100})}})}})}})});break;case\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\":this.changeMainText(\"\"),B.hideElement(document.getElementById(\"client-query-message\")),B.hideElement(document.getElementById(\"client-node-value-alt\"));var q={index:0,str:\"Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.\"};Object(T.a)({targets:q,index:q.str.length,easing:\"linear\",duration:2e3,update:function(){S.textContent=q.str.substr(0,q.index)},complete:function(){B.hideElement(document.getElementById(\"client-node-value-alt\")),n.animationState=\"ANIMATION_STATE_OLD_LEASE_EXPIRES\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_OLD_LEASE_EXPIRES\":B.hideElement(O),document.getElementById(\"client-message-status\").innerHTML=\"\",B.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var G=document.getElementById(\"node-c-message-text-alt\"),W={index:0,str:\"Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.\"};this.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:6e3,targetPercent:25}),this.nodeBTimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_B,{duration:6e3,targetPercent:30}),this.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:6e3}),Object(T.a)({targets:W,index:W.str.length,easing:\"linear\",duration:2e3,update:function(){G.textContent=W.str.substr(0,W.index)}}),this.nodeCTimerAnimation.finished.then(function(){document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),n.animationState=\"ANIMATION_STATE_NEW_LEADER_ELECTED\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})});break;case\"ANIMATION_STATE_NEW_LEADER_ELECTED\":B.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",B.showElement(document.getElementById(\"node-a-message-bubble\")),B.showElement(document.getElementById(\"node-a-message-status-bg\"));var Y=document.getElementById(\"node-a-message-status\"),z={index:0,str:\"Once Leader Lease on A expires, it becomes raft leader.\"};Object(T.a)({targets:z,index:z.str.length,easing:\"linear\",duration:800,update:function(){Y.textContent=z.str.substr(0,z.index)},complete:function(){n.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:2e3}),n.nodeATimerAnimation.finished.then(function(){var t=document.getElementById(\"node-a-circle\");B.showElement(document.getElementById(\"node-a-timer-highlight\")),t.classList.remove(\"leader-candidate-node\"),t.classList.add(\"leader-node\"),B.hideElement(document.getElementById(B.leaderLeaseTimerId(A.a.NODE_A))),n.nodeATimerAnimation=B.startMyLeaseTimer(A.a.NODE_A,{duration:5e3,targetPercent:50});var a=document.getElementById(\"node-a-lease-to-node-b\");Object(T.a)({targets:a,translateX:150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){B.showElement(a)},complete:function(){B.hideElement(a),a.style.transform=\"none\",n.nodeBTimerAnimation.restart(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\",e({animationState:n.animationState,delay:100})}})})}});break;case\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\":B.hideElement(document.getElementById(\"node-a-message-bubble\")),B.hideElement(document.getElementById(\"node-a-message-status-bg\")),B.hideElement(document.getElementById(\"node-a-timer-highlight\")),document.getElementById(\"node-a-message-status\").innerHTML=\"\",B.showElement(O);var X=document.getElementById(\"client-message-status\"),J={index:0,str:\"From here on, client can issue reads/writes to the new leader.\"};Object(T.a)({targets:J,index:J.str.length,easing:\"linear\",duration:2e3,update:function(){X.textContent=J.str.substr(0,J.index)},complete:function(){B.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){c.innerHTML=\"(k, V2)\",B.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!0,!1,\"(k, V2)\",!1,0,n.nodeBTimerAnimation,n.nodeATimerAnimation).finished.then(function(){E.innerHTML=\"(k, V2)\",B.hideElement(I),B.showElement(g);var t=B.sendLogMessage(A.a.NODE_A,A.a.CLIENT_NODE,!1,!1,\"\",!0),a=B.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!1,!1,\"\",!0,300,n.nodeBTimerAnimation);Promise.all([t.finished,a.finished]).then(function(){B.hideElement(y),E.innerHTML=\"(k, V2)\",B.showElement(h),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",n.stopTimers(),e({animationState:n.animationState,delay:100})})})})}});break;case\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\":B.hideElement(g),B.hideElement(h),B.hideElement(O),B.hideElement(f),document.getElementById(\"client-message-status\").innerHTML=\"\",this.changeMainText(\"Leader Leases ensure low latency reads even when nodes are across regions.\",function(){n.animationState=A.a.ANIMATION_STATE_FINISHED,n.stopTimers(),n.setState({animationFinished:!0}),e({animationState:n.animationState,delay:100})});break;case A.a.ANIMATION_STATE_FINISHED:console.log(\"Animation finished. Nothing to do\"),e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState),t(\"Unrecognized state\")}}},{key:\"onPrevious\",value:function(){var e=this;return new Promise(function(t,n){e.onPreviousInternal(t,n)})}},{key:\"onPreviousInternal\",value:function(e,t){var n=this,a=document.getElementById(\"node-a-term-text-rect\"),i=document.getElementById(\"node-b-term-text-rect\"),s=document.getElementById(\"node-c-term-text-rect\"),o=document.getElementById(\"node-a-term-text\"),d=document.getElementById(\"node-b-term-text\"),r=document.getElementById(\"node-c-term-text\"),l=document.getElementById(\"node-a-term-highlight\"),m=document.getElementById(\"node-b-term-highlight\"),c=document.getElementById(\"node-a-extra-text\"),E=document.getElementById(\"node-b-extra-text\"),u=document.getElementById(\"node-c-extra-text\"),g=document.getElementById(\"node-a-text-highlight\"),h=document.getElementById(\"node-b-text-highlight\"),I=document.getElementById(\"node-a-extra-text2\"),y=document.getElementById(\"node-b-extra-text2\"),x=document.getElementById(\"node-a-message-bubble\"),_=document.getElementById(\"node-a-message-status\"),N=document.getElementById(\"node-c-message-bubble\"),L=document.getElementById(\"node-c-message-status\"),O=document.getElementById(\"client-message-bubble\"),b=document.getElementById(\"client-query-message\"),S=document.getElementById(\"client-message-status\"),f=document.getElementById(\"client-message-status-bg\");switch(this.animationState){case\"ANIMATION_STATE_LEADER_READS_PROTOCOL\":B.hideElement(o),B.hideElement(d),B.hideElement(r),B.hideElement(c),B.hideElement(E),B.hideElement(u),document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),this.changeMainText(\"\"),this.animationState=A.a.ANIMATION_STATE_INITIAL,e({animationState:this.animationState,delay:1e3});break;case\"ANIMATION_STATE_START_LEADER_LEASE\":B.hideElement(o),B.hideElement(d),B.hideElement(r),B.hideElement(c),B.hideElement(E),B.hideElement(u);var M=document.getElementById(\"node-c-circle\");M.classList.remove(\"leader-node\");for(var C=document.getElementsByClassName(\"node-outer-circle\"),D=0;D<C.length;D++)B.hideElement(C[D]);this.changeMainText(\"Let's say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1\",function(){M.classList.add(\"leader-node\"),B.showElement(a),B.showElement(i),B.showElement(s),B.showElement(o),B.showElement(d),B.showElement(r),B.showElement(c),B.showElement(E),B.showElement(u),o.innerHTML=\"Term: 1\",d.innerHTML=\"Term: 1\",r.innerHTML=\"Term: 1\",c.innerHTML=\"(k, V1)\",E.innerHTML=\"(k, V1)\",u.innerHTML=\"(k, V1)\",n.animationState=\"ANIMATION_STATE_LEADER_READS_PROTOCOL\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\":B.hideElement(N),document.getElementById(\"node-c-message-status-text1\").innerHTML=\"\",document.getElementById(\"node-c-message-status-text2\").innerHTML=\"\",B.hideElement(document.getElementById(\"mlease-rect-node-c\")),this.changeMainText(\"Using leader leases to safely perform reads from the leader..\",function(){n.animationState=\"ANIMATION_STATE_START_LEADER_LEASE\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_LEADER_LEASE_DURATION\":B.hideElement(document.getElementById(\"llease-rectnode-a\")),B.hideElement(document.getElementById(\"llease-rectnode-b\")),B.hideElement(document.getElementById(\"mlease-rect-node-c\")),B.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",this.changeMainText(\"\"),B.showElement(N),B.showElement(L);var v=document.getElementById(\"node-c-message-status-text1\");v.innerHTML=\"\";var p=document.getElementById(\"node-c-message-status-text2\");p.innerHTML=\"\";var R={index:0,str:\"Raft leader starts a\"},w={index:0,str:\"new lease timer for itself.\"};Object(T.a)({targets:R,index:R.str.length,easing:\"linear\",duration:600,update:function(){v.textContent=R.str.substr(0,R.index)},complete:function(){Object(T.a)({targets:w,index:w.str.length,easing:\"linear\",duration:600,update:function(){p.textContent=w.str.substr(0,w.index)},complete:function(){n.timersAreActive=!0,console.log(n.nodeCTimerAnimation),n.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:3e3,startPercent:100,targetPercent:90,disableAutoPlay:!0}),n.nodeCTimerAnimation.play(),n.animationState=\"ANIMATION_STATE_LEADER_REPLICATES_LEASE\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})}})}});break;case\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\":this.changeMainText(\"\"),B.hideElement(N),B.hideElement(L),B.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var k=document.getElementById(\"node-c-message-text-alt\"),H=document.getElementById(\"node-c-lease-to-node-a\"),P={index:0,str:\"Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.\"},j=Object(T.a)({targets:P,index:P.str.length,easing:\"linear\",duration:2500,update:function(){k.innerText=P.str.substr(0,P.index)}}),V=Object(T.a)({targets:H,translateX:-280,translateY:0,easing:\"linear\",duration:1500,begin:function(){B.showElement(H)},complete:function(){B.hideElement(H),H.style.transform=\"none\"}});this.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:5e3,targetPercent:60,startPercent:90}),this.nodeCTimerAnimation.restart();var F=document.getElementById(\"node-c-lease-to-node-b\"),U=Object(T.a)({targets:F,translateX:-150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){B.showElement(F)},complete:function(){B.hideElement(F),F.style.transform=\"none\"}});Promise.all([j.finished,V.finished,U.finished,this.nodeCTimerAnimation]).then(function(){n.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:3e3,targetPercent:85}),n.nodeBTimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_B,{duration:3e3,targetPercent:90}),console.log(n.nodeBTimerAnimation),n.nodeATimerAnimation.restart(),n.nodeBTimerAnimation.restart(),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_DURATION\",e({animationState:n.animationState,delay:1e3,asyncAnimation:!0})});break;case\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\":this.changeMainText(\"\"),B.hideElement(document.getElementById(\"node-c-partition-wrap\")),this.changeMainText(\"Any new leader must wait out existing Leader Lease duration before acquiring lease.\",function(){n.animationState=\"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\",e({animationState:n.animationState,delay:1e3})});break;case\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\":B.hideElement(l),B.hideElement(m),B.hideElement(x),B.hideElement(document.getElementById(\"node-c-partition-wrap\")),B.hideElement(document.getElementById(\"node-a-message-status-bg\")),document.getElementById(\"node-a-message-status\").innerHTML=\"\",document.getElementById(\"node-a-circle\").classList.remove(\"leader-candidate-node\"),this.changeMainText(\"Now suppose the original leader gets network partitioned\",function(){B.partitionNodeC(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\",e({animationState:n.animationState,delay:100})});break;case\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\":document.getElementById(\"node-a-circle\").classList.remove(\"leader-candidate-node\"),B.hideElement(O),B.hideElement(b),document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",B.hideElement(document.getElementById(\"client-node\")),B.hideElement(document.getElementById(\"client-node-value-alt\")),document.getElementById(\"client-message-text\").innerHTML=\"\",this.changeMainText(\"\"),B.showElement(x),B.showElement(document.getElementById(\"node-a-message-status-bg\"));var q={index:0,str:\"A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.\"};Object(T.a)({targets:q,index:q.str.length,easing:\"linear\",duration:1500,update:function(){_.innerText=q.str.substr(0,q.index)},complete:function(){document.getElementById(\"node-a-circle\").classList.add(\"leader-candidate-node\"),B.setSVGText({targetId:\"node-a-term-text\",text:\"Term: 2\"}),B.setSVGText({targetId:\"node-b-term-text\",text:\"Term: 2\"}),B.showElement(l),B.showElement(m),n.animationState=\"ANIMATION_STATE_CLIENT_UPDATE_FAILS\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_OLD_LEASE_EXPIRES\":S.innerHTML=\"\",B.hideElement(O),B.hideElement(document.getElementById(\"client-node\")),document.getElementById(\"client-message-text\").innerHTML=\"\",document.getElementById(\"client-query-message-text1\").innerHTML=\"\",document.getElementById(\"client-query-message-text2\").innerHTML=\"\",document.getElementById(\"client-query-message-text3\").innerHTML=\"\",this.changeMainText(\"If client tries to write to A, operation is rejected..\",function(){B.introduceClient(),B.showElement(O),B.showElement(f),B.showElement(b);var t={index:0,str:\"UPDATE T SET\"},a={index:0,str:\"value = V2 WHERE\"},i={index:0,str:\" key = k\"},s=document.getElementById(\"client-query-message-text1\"),o=document.getElementById(\"client-query-message-text2\"),d=document.getElementById(\"client-query-message-text3\");Object(T.a)({targets:t,index:t.str.length,easing:\"linear\",duration:400,update:function(){s.textContent=t.str.substr(0,t.index)},complete:function(){Object(T.a)({targets:a,index:a.str.length,easing:\"linear\",duration:400,update:function(){o.textContent=a.str.substr(0,a.index)},complete:function(){Object(T.a)({targets:i,index:i.str.length,easing:\"linear\",duration:400,update:function(){d.textContent=i.str.substr(0,i.index)},complete:function(){var t=document.getElementById(\"client-message\"),a=document.getElementById(\"client-message-circle\");B.messageFromClient(A.a.NODE_A,{onBegin:function(){B.showElement(t),a.classList.add(\"log-message\"),B.setSVGText({targetId:\"client-message-text\",text:\"\"})},onChangeComplete:function(){a.classList.remove(\"log-message\"),a.classList.add(\"error-message\"),B.setSVGText({targetId:\"client-message-text\",text:\"Rejected\"})},onComplete:function(){a.classList.remove(\"error-message\"),B.hideElement(t),t.style.transform=\"none\",B.setSVGText({targetId:\"client-message-text\",text:\"\"}),B.showElement(document.getElementById(\"client-node-value-alt\"))},alternate:!0}),n.animationState=\"ANIMATION_STATE_OLD_LEADER_STILL_READABLE\",e({animationState:n.animationState,delay:100})}})}})}})});break;case\"ANIMATION_STATE_NEW_LEADER_ELECTED\":this.changeMainText(\"\"),B.hideElement(document.getElementById(\"client-query-message\")),B.hideElement(document.getElementById(\"client-node-value-alt\")),B.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",document.getElementById(\"node-c-circle\").classList.add(\"leader-node\");var G={index:0,str:\"Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.\"};B.showElement(O),Object(T.a)({targets:G,index:G.str.length,easing:\"linear\",duration:2e3,update:function(){S.textContent=G.str.substr(0,G.index)},complete:function(){n.animationState=\"ANIMATION_STATE_OLD_LEASE_EXPIRES\",e({animationState:n.animationState,delay:100})}});break;case\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\":B.hideElement(document.getElementById(\"node-a-timer-highlight\")),B.hideElement(document.getElementById(\"node-a-message-bubble\")),document.getElementById(\"node-c-circle\").classList.add(\"leader-node\"),document.getElementById(\"node-a-circle\").classList.add(\"leader-candidate-node\"),B.hideElement(x),document.getElementById(\"node-a-message-status\").innerHTML=\"\",B.hideElement(O),document.getElementById(\"client-message-status\").innerHTML=\"\",B.showElement(document.getElementById(\"node-c-message-bubble-alt\"));var W=document.getElementById(\"node-c-message-text-alt\"),Y={index:0,str:\"Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.\"};B.hideElement(document.getElementById(\"mlease-rect-node-a\")),this.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:6e3,targetPercent:25}),this.nodeBTimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_B,{duration:6e3,targetPercent:30}),this.nodeCTimerAnimation=B.startMyLeaseTimer(A.a.NODE_C,{duration:6e3}),Object(T.a)({targets:Y,index:Y.str.length,easing:\"linear\",duration:2e3,update:function(){W.textContent=Y.str.substr(0,Y.index)}}),this.nodeCTimerAnimation.finished.then(function(){document.getElementById(\"node-c-circle\").classList.remove(\"leader-node\"),n.animationState=\"ANIMATION_STATE_NEW_LEADER_ELECTED\",e({animationState:n.animationState,delay:100,asyncAnimation:!0})});break;case\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\":B.hideElement(g),B.hideElement(h),B.hideElement(O);var z=document.getElementById(\"node-a-circle\");z.classList.add(\"leader-candidate-node\"),z.classList.remove(\"leader-node\"),document.getElementById(\"client-message-status\").innerHTML=\"\",B.hideElement(document.getElementById(\"node-c-message-bubble-alt\")),document.getElementById(\"node-c-message-text-alt\").innerHTML=\"\",B.showElement(document.getElementById(\"node-a-message-bubble\")),B.showElement(document.getElementById(\"node-a-message-status-bg\")),B.hideElement(document.getElementById(\"mlease-rect-node-a\"));var X=document.getElementById(\"node-a-message-status\"),J={index:0,str:\"Once Leader Lease on A expires, it becomes raft leader.\"};Object(T.a)({targets:J,index:J.str.length,easing:\"linear\",duration:800,update:function(){X.textContent=J.str.substr(0,J.index)},complete:function(){n.nodeATimerAnimation=B.startLeaderLeaseTimer(A.a.NODE_A,{duration:1e4}),n.nodeATimerAnimation.finished.then(function(){z.classList.remove(\"leader-candidate-node\"),z.classList.add(\"leader-node\"),B.showElement(document.getElementById(\"node-a-timer-highlight\")),B.hideElement(document.getElementById(B.leaderLeaseTimerId(A.a.NODE_A))),n.nodeATimerAnimation=B.startMyLeaseTimer(A.a.NODE_A,{duration:5e3,targetPercent:50});var t=document.getElementById(\"node-a-lease-to-node-b\");Object(T.a)({targets:t,translateX:150,translateY:-280,easing:\"linear\",duration:1500,begin:function(){B.showElement(t)},complete:function(){B.hideElement(t),t.style.transform=\"none\",n.nodeBTimerAnimation.restart(),n.animationState=\"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\",e({animationState:n.animationState,delay:100})}})})}});break;case A.a.ANIMATION_STATE_FINISHED:this.setState({animationFinished:!1}),this.changeMainText(\"\"),document.getElementById(\"node-a-message-status\").innerHTML=\"\",B.showElement(document.getElementById(\"client-message-status-bg\")),B.showElement(O);var Q=document.getElementById(\"client-message-status\"),K={index:0,str:\"From here on, client can issue reads/writes to the new leader.\"};Object(T.a)({targets:K,index:K.str.length,easing:\"linear\",duration:2e3,update:function(){Q.textContent=K.str.substr(0,K.index)},complete:function(){B.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_A,!1,!1,\"(k, V2)\").finished.then(function(){c.innerHTML=\"(k, V2)\",B.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!0,!1,\"(k, V2)\",!1,0,n.nodeBTimerAnimation,n.nodeATimerAnimation).finished.then(function(){E.innerHTML=\"(k, V2)\",B.hideElement(I),B.showElement(g);var t=B.sendLogMessage(A.a.NODE_A,A.a.CLIENT_NODE,!1,!1,\"\",!0),a=B.sendLogMessage(A.a.NODE_A,A.a.NODE_B,!1,!1,\"\",!0,300,n.nodeBTimerAnimation);Promise.all([t.finished,a.finished]).then(function(){B.hideElement(y),E.innerHTML=\"(k, V2)\",B.showElement(h),n.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",n.stopTimers(),e({animationState:n.animationState,delay:100})})})})}}),this.animationState=\"ANIMATION_STATE_LEADER_LEASE_CONCLUSION\",e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"changeMainText\",value:function(e,t,n){B.setTextWithAnimation(this.mainTextSect,e,t,n)}},{key:\"restartTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.restart(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.restart(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.restart()}},{key:\"stopTimers\",value:function(){this.timersAreActive=!1,this.pauseTimers()}},{key:\"pauseTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.pause(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.pause(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.pause()}},{key:\"resumeTimers\",value:function(){this.nodeATimerAnimation&&this.nodeATimerAnimation.play(),this.nodeBTimerAnimation&&this.nodeBTimerAnimation.play(),this.nodeCTimerAnimation&&this.nodeCTimerAnimation.play()}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(O,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}}]),t}(a.Component),D=n(14),v=n(13),p=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).onPlayClicked=n.onPlayClicked.bind(Object(D.a)(n)),n.onPreviousClicked=n.onPreviousClicked.bind(Object(D.a)(n)),n.onRestartClicked=n.onRestartClicked.bind(Object(D.a)(n)),n.state={animationPlaying:!1},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"componentDidMount\",value:function(){var e=this;this.mainTextSect=document.getElementById(\"main-text-sect\"),setTimeout(function(){return e.next()},100)}},{key:\"changeMainText\",value:function(e,t){v.setTextWithAnimation(this.mainTextSect,e,t)}},{key:\"next\",value:function(){var e=this;this.setState({animationPlaying:!0}),this.currentAnimation.onNext().then(function(t){console.log(\"Result: \"+JSON.stringify(t)),e.setState({animationPlaying:!1}),setTimeout(function(){\"CONTINOUS\"===e.runMode?(e.currentAnimation.resume(),e.next()):t.asyncAnimation||e.currentAnimation.pause()},t.delay?t.delay:A.a.DEFAULT_DELAY)})}},{key:\"previous\",value:function(){var e=this;this.setState({animationPlaying:!0}),this.currentAnimation.onPrevious().then(function(t){console.log(\"Undo: \"+JSON.stringify(t)),e.setState({animationPlaying:!1}),setTimeout(function(){\"CONTINOUS\"===e.runMode?(e.currentAnimation.resume(),e.next()):e.currentAnimation.pause()},t.delay?t.delay:A.a.DEFAULT_DELAY)})}},{key:\"onPlayClicked\",value:function(){this.next()}},{key:\"onRestartClicked\",value:function(){this.restart()}},{key:\"onPreviousClicked\",value:function(){this.previous()}},{key:\"restart\",value:function(){window.location.reload()}},{key:\"render\",value:function(){var e=this,t=this.props.animationToRun,n=this.state.animationPlaying||this.currentAnimation&&this.currentAnimation.state.animationFinished,a=this.state.animationPlaying||this.currentAnimation&&!this.currentAnimation.state.previousEnabled||this.currentAnimation&&this.currentAnimation.animationState===A.a.ANIMATION_STATE_INITIAL,s=this.currentAnimation&&this.currentAnimation.state.animationFinished;return i.a.createElement(\"div\",{className:\"animation-runner\"},i.a.createElement(\"div\",{id:\"main-text-sect\"}),i.a.createElement(t,{ref:function(t){return e.currentAnimation=t}}),i.a.createElement(\"div\",{className:\"control-btns\"},i.a.createElement(\"button\",{id:\"animation-ctrl-previous\",className:\"yb-btn\",disabled:a,onClick:this.onPreviousClicked},i.a.createElement(\"i\",{className:\"fas fa-undo\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},\"Previous\")),i.a.createElement(\"button\",{id:\"animation-ctrl-next\",className:\"yb-btn\",disabled:n,onClick:this.onPlayClicked},i.a.createElement(\"i\",{className:\"fas fa-play\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},s?\"End\":\"Next\")),i.a.createElement(\"button\",{id:\"animation-ctrl-restart\",className:\"yb-btn\",onClick:this.onRestartClicked},i.a.createElement(\"i\",{className:\"fas fa-fast-backward\",\"aria-hidden\":\"true\"}),i.a.createElement(\"span\",{className:\"yb-button-text\"},\"Restart\"))))}}]),t}(a.Component),R=n(13),w={INITIAL:\"INITIAL\",LEADER_ELECTION_NODE_TIMED_OUT:\"LEADER_ELECTION_NODE_TIMED_OUT\",LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF:\"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\",LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES:\"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\",LOG_REPLICATION_START:\"LOG_REPLICATION_START\",LOG_REPLICATION_INTRODUCE_CLIENT:\"LOG_REPLICATION_INTRODUCE_CLIENT\",LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER:\"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\",LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS:\"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\",LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY:\"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\",LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER:\"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\"},k=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(l.a)(this,Object(m.a)(t).call(this,e))).animationState=w.INITIAL,n.state={animationFinished:!1},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"pause\",value:function(){}},{key:\"resume\",value:function(){}},{key:\"onNext\",value:function(){var e=this;return new Promise(function(t,n){e.onNextInternal(t,n)})}},{key:\"onNextInternal\",value:function(e,t){var n=this;switch(this.animationState){case w.INITIAL:this.changeMainText(\"Leader election starts ...\"),setTimeout(function(){n.changeMainText(\"If there is no leader, a election timeout is triggered\");var t=document.getElementById(\"node-a-outer-circle\");t.classList.add(\"animation-delay-3s\"),t.classList.add(\"animate-circle-stroke\");var a=document.getElementById(\"node-b-outer-circle\");a.classList.add(\"animation-delay-2s\"),a.classList.add(\"animate-circle-stroke\");var i=document.getElementById(\"node-c-outer-circle\");i.classList.add(\"animate-circle-stroke\");var s=function(){t.classList.add(\"pause-animation\"),a.classList.add(\"pause-animation\"),i.style.display=\"none\",n.animationState=w.LEADER_ELECTION_NODE_TIMED_OUT,e({animationState:n.animationState,delay:100})};i.addEventListener(\"webkitAnimationEnd\",s,!1),i.addEventListener(\"animationend\",s,!1)},A.a.DEFAULT_DELAY);break;case w.LEADER_ELECTION_NODE_TIMED_OUT:document.getElementById(\"node-c-outer-circle\").classList.add(\"leader-candidate-node\"),document.getElementById(\"node-c-extra-text\").classList.remove(\"visibility-hidden\"),this.changeMainText(\"After election timeout the follower becomes a candidate. It starts a new election term and votes for itself\",function(){n.animationState=w.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF,e({animationState:n.animationState,delay:2e3})});break;case w.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF:var a=document.getElementById(\"node-c-message-to-b\"),i=R.messageFromC(A.a.NODE_B,{onBegin:function(e){a.classList.add(\"vote-request-circle\")},onChangeComplete:function(e){a.classList.remove(\"vote-request-circle\"),a.classList.add(\"vote-ack-circle\")},onComplete:function(e){a.classList.remove(\"vote-ack-circle\")},alternate:!0}),s=document.getElementById(\"node-c-message-to-a\"),o=R.messageFromC(A.a.NODE_A,{onBegin:function(e){s.classList.add(\"vote-request-circle\")},onChangeComplete:function(e){s.classList.remove(\"vote-request-circle\"),s.classList.add(\"vote-ack-circle\")},onComplete:function(e){s.classList.remove(\"vote-ack-circle\")},alternate:!0});Promise.all([i.finished,o.finished]).then(function(){n.animationState=w.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES,e({animationState:n.animationState,delay:1e3})});break;case w.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES:this.changeMainText(\"Once a candidate has majority of votes it becomes the leader\"),document.getElementById(\"node-a-extra-text\").classList.remove(\"visibility-hidden\"),document.getElementById(\"node-b-extra-text\").classList.remove(\"visibility-hidden\"),document.getElementById(\"node-c-extra-text\").textContent=\"Leader Node\";var d=document.getElementById(\"node-c-outer-circle\");d.classList.remove(\"leader-candidate-node\"),d.classList.add(\"leader-node\");var r=document.getElementById(\"node-a-outer-circle\");R.hideElement(r);var l=document.getElementById(\"node-b-outer-circle\");R.hideElement(l),this.animationState=w.LOG_REPLICATION_START,e({animationState:this.animationState,delay:2e3});break;case w.LOG_REPLICATION_START:for(var m=document.getElementsByClassName(\"node-extra-text\"),c=0;c<m.length;c++)R.hideElement(m[c]);this.changeMainText(\"Log replication ...\"),this.animationState=w.LOG_REPLICATION_INTRODUCE_CLIENT,e({animationState:this.animationState,delay:2e3});break;case w.LOG_REPLICATION_INTRODUCE_CLIENT:this.changeMainText(\"Clients always communicate with the leader.\"),R.introduceClient().finished.then(function(){R.sendLogMessage(A.a.CLIENT_NODE,A.a.NODE_C,!1,!1,R.getSetValueText(\"5\")).finished.then(function(){n.animationState=w.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER,e({animationState:n.animationState,delay:1e3})})});break;case w.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER:this.changeMainText(\"The log entry is currently uncommitted, so it won't update the node's value. To commit the entry the node first replicates it to the follower nodes\",function(){var t=R.logMessageFromLeaderToFollowers(!0,R.getSetValueText(\"5\")),a=R.getFinishPromises(t);Promise.all(a).then(function(){n.animationState=w.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS,e({animationState:n.animationState,delay:100})})});break;case w.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS:this.changeMainText(\"Once the leader receives acks from majority of follower nodes, it commits the value and sets it state to '5'\",function(){R.setSVGText({targetId:\"node-c-extra-text\",addCSSClass:\"set-text-committed\"}),R.setSVGText({targetId:\"node-c-main-text\",text:\"5\",showElement:!0}),n.animationState=w.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY,e({animationState:n.animationState,delay:1e3})});break;case w.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY:this.changeMainText(\"The leader then notifies followers and the client that entry is committed\",function(){var t=R.logMessageFromLeaderToFollowers(!1,R.getSetValueText(\"5\"),!0),a=R.getFinishPromises(t);R.sendLogMessage(A.a.NODE_C,A.a.CLIENT_NODE),Promise.all(a).then(function(){n.animationState=w.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER,e({animationState:n.animationState,delay:100})})});break;case w.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER:R.setSVGText({targetId:\"node-a-main-text\",text:\"5\",showElement:!0}),R.setSVGText({targetId:\"node-b-main-text\",text:\"5\",showElement:!0}),this.changeMainText(\"The cluster has now come to consensus about the system state\"),this.animationState=A.a.ANIMATION_STATE_FINISHED,this.setState({animationFinished:!0}),e({animationState:this.animationState,delay:100});break;case A.a.ANIMATION_STATE_FINISHED:e({animationState:this.animationState,delay:100});break;default:console.error(\"Unrecognized state: \"+this.animationState)}}},{key:\"componentDidMount\",value:function(){this.mainTextSect=document.getElementById(\"main-text-sect\")}},{key:\"render\",value:function(){return i.a.createElement(\"div\",null,i.a.createElement(\"div\",{id:\"main-diagram\"},i.a.createElement(O,null)),i.a.createElement(\"div\",{id:\"main-text-sect\"}))}},{key:\"changeMainText\",value:function(e,t){R.setTextWithAnimation(this.mainTextSect,e,t)}}]),t}(a.Component),H=function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){return i.a.createElement(E.a,null,i.a.createElement(\"div\",{className:\"App\"},i.a.createElement(u.a,{exact:!0,path:\"/\",component:P}),i.a.createElement(u.a,{exact:!0,path:\"/raft-write-operation\",render:function(e){return i.a.createElement(p,Object.assign({},e,{animationToRun:k}))}}),i.a.createElement(u.a,{exact:!0,path:\"/why-raft-read-fails-without-quorum\",render:function(e){return i.a.createElement(p,Object.assign({},e,{animationToRun:S}))}}),i.a.createElement(u.a,{exact:!0,path:\"/raft-read-with-leader-leases\",render:function(e){return i.a.createElement(p,Object.assign({},e,{animationToRun:C}))}}),i.a.createElement(u.a,{exact:!0,path:\"/read-operation-in-raft\",render:function(e){return i.a.createElement(p,Object.assign({},e,{animationToRun:M}))}})))}}]),t}(a.Component),P=function(e){function t(){return Object(d.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:\"render\",value:function(){return i.a.createElement(\"div\",{id:\"home-link-container\"},i.a.createElement(\"h3\",null,\"Read:\"),i.a.createElement(\"ul\",null,i.a.createElement(\"li\",null,i.a.createElement(g.a,{to:\"/read-operation-in-raft\"},\"Read operation in raft\")),i.a.createElement(\"li\",null,i.a.createElement(g.a,{to:\"/why-raft-read-fails-without-quorum\"},\"Why raft read failes without quorum\")),i.a.createElement(\"li\",null,i.a.createElement(g.a,{to:\"/raft-read-with-leader-leases\"},\"Raft read with leader leases\"))),i.a.createElement(\"h3\",null,\"Write:\"),i.a.createElement(\"div\",{class:\"write-link-container\"},i.a.createElement(g.a,{to:\"/raft-write-operation\"},\"Raft write operation\")))}}]),t}(a.Component),j=H;Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(j,null),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);","extractedComments":[]}