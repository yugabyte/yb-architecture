{"version":3,"sources":["constants.js","HelperFunctions.js","svg/SmallClock.js","svg/HorizontalTimer.js","svg/MainDiagram.js","ReadFailureAnimation.js","RaftReadOperationAnimation.js","LeaderLeasesAnimation.js","AnimationRunner.js","RaftWriteAnimation.js","App.js","serviceWorker.js","index.js"],"names":["__webpack_require__","d","__webpack_exports__","Constants","DEFAULT_DELAY","NODE_A","NODE_B","NODE_C","CLIENT_NODE","ANIMATION_STATE_INITIAL","ANIMATION_STATE_FINISHED","COMMITTED","UNCOMMITTED","r","setSVGText","showElement","hideElement","delayedNext","setTextWithAnimation","introduceClient","hideClient","messageFromClient","sendLogMessage","logMessageFromLeaderToFollowers","logMessageAckFromFollowersToLeader","getFinishPromises","messageFromC","messageFromA","messageFromB","getSetValueText","partitionNodeC","startMyLeaseTimer","startLeaderLeaseTimer","startLeaseTimer","myLeaseTimerId","leaderLeaseTimerId","animejs_lib_anime_es_js__WEBPACK_IMPORTED_MODULE_0__","_constants__WEBPACK_IMPORTED_MODULE_1__","params","target","document","getElementById","targetId","text","textContent","addCSSClass","classList","add","removeCSSClass","remove","element","animation","delay","setTimeout","next","textSect","onComplete","innerHTML","ml4","anime","targets","opacity","opacityIn","scale","scaleIn","duration","durationIn","complete","clientTextValue","clientNode","translateY","destination","messageElement","translateX","console","log","easing","begin","onBegin","changeComplete","onChangeComplete","direction","alternate","fromNode","toNode","returnAck","isAck","value","commitValue","destinationTimerAnimation","srcTimerAnimation","method","textElementId","sourceNodeTextElementId","messageContrainer","additionalTextElementID","sourceNodeAdditionalTextElementId","Error","anim","restart","additionalText","style","transform","withAck","nodeATimerAnimation","nodeBTimerAnimation","nodeCTimerAnimation","animations","animationPromises","forEach","currentAnimation","push","finished","warning","forNode","config","targetPercent","startPercent","disableAutoPlay","arguments","length","undefined","innerRect","startWidth","targetWidth","width","autoplay","constructTimerId","prefix","id","error","SmallClock","react_default","a","createElement","height","xmlns","stroke","strokeWidth","cx","cy","fill","x","y","rx","ry","HorizontalTimer","className","this","props","uid","label","Component","HelperFunctions","require","clientNodePositions","mainText","clientNodeYPos","clientMessage","nodeAPositions","base","messageToB","nodeABaseXPos","messageToClient","leaseTimer","nodeABaseYPos","nodeCPositions","nodeCBaseXPos","messageToA","partitionText1","nodeCBaseYPos","partitionText2","nodeBPositions","nodeBBaseXPos","messageToC","MainDiagram","clientX","clientY","nodeAX","nodeAY","nodeBX","nodeBY","nodeCX","nodeCY","svg_SmallClock","fontFamily","fontSize","padding","dy","dx","concat","fillOpacity","href","svg_HorizontalTimer","clientNodeXPos","ReadOperationAnimation","_Component","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","animationState","state","animationFinished","previousEnabled","inherits","createClass","key","mainTextSect","_this2","Promise","resolve","reject","onNextInternal","_this3","nodeATextContainer","nodeBTextContainer","nodeCTextContainer","nodeATermText","nodeBTermText","nodeCTermText","nodeATermHighlight","nodeBTermHighlight","nodeAExtraText","nodeBExtraText","nodeCExtraText","nodeAExtraHighlight","nodeAExtraText2","nodeAMessageBubble","nodeAMessageStatus","clientMessageBubble","clientQueryMessage","clientMessageBackground","nodeOuterCircles","getElementsByClassName","i","changeMainText","nodeCText","contentLine1","index","str","update","innerText","substr","altBubbleText","content","clientContent1","clientContent2","clientContent3","statusText1","statusText2","statusText3","then","aToBAnim","setState","_this4","onPreviousInternal","_this5","nodeBExtraHighlight","partitionWrap","nodeC","svg_MainDiagram","RaftReadOperationAnimation","nodeCExtraHighlight","contentLine2","statusTextLine1","statusTextLine2","introduceClientAnimation","statusElem","leaderTextLine1","leaderTextLine2","leaderText1","leaderText2","ltxt1","ltxt2","warningSVG","LeaderLeaseAnimation","init","timersAreActive","pauseTimers","resumeTimers","nodeBExtraText2","nodeCMessageBubble","nodeCMessageStatus","clientMessageStatus","play","asyncAnimation","seek","textAlt","leaseToA","nodeCTextAnimation","nodeALeaseAnimation","leaseToB","nodeBLeaseAnimation","all","nodeAContent","messageContrainerElement","nodeCTextAlt","nodeAMessage","nodeA","messageStatus","newBTimer","confirmToClientAnimation","confirmToBAnimation","stopTimers","pause","AnimationRunner","onPlayClicked","bind","assertThisInitialized","onPreviousClicked","onRestartClicked","animationPlaying","onNext","result","JSON","stringify","runMode","resume","onPrevious","previous","window","location","reload","Animation","animationToRun","disableNext","disablePrevious","isAnimationFinished","ref","n","disabled","onClick","aria-hidden","AnimationState","INITIAL","LEADER_ELECTION_NODE_TIMED_OUT","LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF","LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES","LOG_REPLICATION_START","LOG_REPLICATION_INTRODUCE_CLIENT","LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER","LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS","LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY","LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER","RaftWriteAnimation","nodeAOuterCircle","nodeBOuterCircle","nodeCOuterCircle","onNodeCAnimationEnd","display","addEventListener","animation1","animation2","voteTexts","App","BrowserRouter","Route","exact","path","component","Home","render","src_AnimationRunner","assign","ReadFailureAnimation","LeaderLeasesAnimation","Link","to","class","Boolean","hostname","match","ReactDOM","src_App_0","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f2e9c109.chunk.js","sourcesContent":["export var Constants = {\n\tDEFAULT_DELAY: 2000,\n\tNODE_A: \"NODE_A\",\n\tNODE_B: \"NODE_B\",\n\tNODE_C: \"NODE_C\",\n\tCLIENT_NODE: \"CLIENT_NODE\",\n\tANIMATION_STATE_INITIAL: 'ANIMATION_STATE_INITIAL',\n\tANIMATION_STATE_FINISHED: \"ANIMATION_STATE_FINISHED\",\n\tCOMMITTED: \"(committed)\",\n\tUNCOMMITTED: \"(uncommitted)\",\n}\n","import anime from 'animejs/lib/anime.es.js';\n\nimport {Constants} from './constants';\n\n// Set text content of a SVG text element\n// params:{\n//\ttargetId:\n//\ttext:\n//\taddCSSClass:\n//\tshowElement:\n//}\nexport function setSVGText(params) {\n\tvar target = document.getElementById(params.targetId);\n\tif (params.text) {\n\t\ttarget.textContent = params.text;\n\t}\n\tif (params.addCSSClass) {\n\t\ttarget.classList.add(params.addCSSClass);\n\t}\n\tif (params.removeCSSClass) {\n\t\ttarget.classList.remove(params.removeCSSClass);\n\t}\n\tif (params.showElement) {\n\t\tshowElement(target);\n\t}\n}\n\nexport function showElement(element) {\n\telement.classList.remove('visibility-hidden');\n\telement.classList.add('visibility-visible');\n}\n\nexport function hideElement(element){\n\telement.classList.remove('visibility-visible');\n\telement.classList.add('visibility-hidden');\n}\n\nexport function delayedNext(animation, delay) {\n\tif (!delay) {\n\t\tdelay = Constants.DEFAULT_DELAY;\n\t}\n\tsetTimeout(() => animation.next(), delay);\n}\n\nexport function setTextWithAnimation(textSect, text, onComplete, delay) {\n\ttextSect.innerHTML=text;\n\n\tvar ml4 = {};\n\tml4.opacityIn = [0,1];\n\tml4.scaleIn = [0.2, 1];\n\tml4.scaleOut = 3;\n\tml4.durationIn = 2000;\n\tml4.durationOut = 2000;\n\tml4.delay = (delay?delay:500);\n\n\tanime({\n\t\ttargets: textSect,\n\t\topacity: ml4.opacityIn,\n\t\tscale: ml4.scaleIn,\n\t\tduration: ml4.durationIn,\n\t\tcomplete: onComplete,\n\t\tdelay: ml4.delay,\n\t});\n}\n///////////////////////////////////////////////////////////////\n//Animation Helpers. TODO: Maybe they should go in AnimationHelper module?\n//////////////////////////////////////////////////////////////\n\nexport function introduceClient(clientTextValue) {\n\tvar clientNode = document.getElementById(\"client-node\");\n\tshowElement(clientNode);\n\tif (clientTextValue) {\n\t\tsetSVGText({targetId: \"client-node-value\", text: clientTextValue})\n\t}\n\tvar animation = anime({\n\t\ttargets: clientNode,\n\t\ttranslateY: -84\n\t});\n\treturn animation;\n}\n\nexport function hideClient() {\n\tvar clientNode = document.getElementById(\"client-node\");\n\thideElement(clientNode);\n\thideElement(document.getElementById('client-message-circle'));\n}\n\n\nexport function messageFromClient(destination, params) {\n\tvar messageElement = document.getElementById('client-message');\n\tvar translateX = 0;\n\tvar translateY = 0;\n\n\tswitch (destination) {\n\t\tcase Constants.NODE_C: {\n\t\t\ttranslateX = 140;\n\t\t\ttranslateY = -140;\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.NODE_A: {\n\t\t\ttranslateX = -160;\n\t\t\ttranslateY = -156;\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tconsole.log('messageFromClient: Unrecognized destination: ' + destination);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tvar animation = anime({\n\t\ttargets: messageElement,\n\t\ttranslateX: translateX,\n\t\ttranslateY: translateY,\n\t\teasing: 'linear',\n\t\tduration: 800,\n\t\tbegin: params.onBegin,\n\t\tcomplete: params.onComplete,\n\t\tchangeComplete: params.onChangeComplete,\n\t\tdirection: params.alternate?'alternate':'normal',\n\t});\n\treturn animation;\n}\n\nexport function sendLogMessage(fromNode, toNode, returnAck, isAck, value, commitValue, delay, destinationTimerAnimation, srcTimerAnimation) {\n\tconsole.log('FromNode: ' + fromNode + \" toNode: \" + toNode + \" returnAck: \" + returnAck + \" value: \" + value + \" commitValue: \" + commitValue);\n\tvar method = null;\n\tvar messageElement = null;\n\tvar textElementId = null;\n\tvar sourceNodeTextElementId = null;\n\tvar messageContrainer = null;\n\tvar additionalTextElementID = null;\n\tvar sourceNodeAdditionalTextElementId = null;\n\n\tswitch(fromNode) {\n\t\tcase Constants.NODE_A: {\n\t\t\tmethod = messageFromA;\n\t\t\tsourceNodeTextElementId = 'node-a-extra-text';\n\t\t\tsourceNodeAdditionalTextElementId = 'node-a-extra-text2';\n\n\t\t\tif(toNode === Constants.NODE_B) {\n\t\t\t\tmessageElement = document.getElementById('node-a-message-to-b');\n\t\t\t\ttextElementId = 'node-b-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-b-extra-text2';\n\t\t\t} else if (toNode === Constants.NODE_C) {\n\t\t\t\tmessageElement = document.getElementById('node-a-message-to-c');\n\t\t\t\ttextElementId = 'node-c-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-c-extra-text2';\n\t\t\t} else if (toNode === Constants.CLIENT_NODE) {\n\t\t\t\tmessageElement = document.getElementById('node-a-message-to-client');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.NODE_B: {\n\t\t\tmethod = messageFromB;\n\t\t\tsourceNodeTextElementId = 'node-b-extra-text';\n\t\t\tsourceNodeAdditionalTextElementId = 'node-b-extra-text2';\n\n\t\t\tif(toNode === Constants.NODE_A) {\n\t\t\t\tmessageElement = document.getElementById('node-b-message-to-a');\n\t\t\t\ttextElementId = 'node-a-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-a-extra-text2';\n\t\t\t} else if (toNode === Constants.NODE_C) {\n\t\t\t\tmessageElement = document.getElementById('node-b-message-to-c');\n\t\t\t\ttextElementId = 'node-c-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-c-extra-text2';\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.NODE_C: {\n\t\t\tmethod = messageFromC;\n\t\t\tsourceNodeTextElementId = 'node-c-extra-text';\n\t\t\tsourceNodeAdditionalTextElementId = 'node-c-extra-text2';\n\n\t\t\tif (toNode === Constants.NODE_A) {\n\t\t\t\tmessageElement = document.getElementById('node-c-message-to-a');\n\t\t\t\ttextElementId = 'node-a-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-a-extra-text2';\n\t\t\t} else if (toNode === Constants.NODE_B) {\n\t\t\t\tmessageElement = document.getElementById('node-c-message-to-b');\n\t\t\t\ttextElementId = 'node-b-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-b-extra-text2';\n\t\t\t} else if (toNode === Constants.CLIENT_NODE) {\n\t\t\t\tmessageElement = document.getElementById('node-c-message-to-client');\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.CLIENT_NODE: {\n\t\t\tmethod = messageFromClient;\n\t\t\tmessageElement = document.getElementById('client-message-circle');\n\t\t\tmessageContrainer = document.getElementById('client-message');\n\n\t\t\tif (toNode === Constants.NODE_A) {\n\t\t\t\ttextElementId = 'node-a-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-a-extra-text2';\n\t\t\t} else if (toNode === Constants.NODE_B) {\n\t\t\t\ttextElementId = 'node-b-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-b-extra-text2';\n\t\t\t} else if (toNode === Constants.NODE_C) {\n\t\t\t\ttextElementId = 'node-c-extra-text';\n\t\t\t\tadditionalTextElementID = 'node-c-extra-text2';\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error('Unrecognized fromNode: ' + fromNode);\n\t\t}\n\t}\n\n\tvar animation = method(toNode,{\n\t\t\tdelay: delay,\n\t\t\tdestinationTimerAnimation: destinationTimerAnimation,\n\t\t\tonBegin: anim => {\n\t\t\t\tshowElement(messageElement);\n\t\t\t\tif (isAck) {\n\t\t\t\t\tmessageElement.classList.remove('log-message');\n\t\t\t\t\tmessageElement.classList.add('log-message-ack');\n\t\t\t\t} else {\n\t\t\t\t\tmessageElement.classList.add('log-message');\n\t\t\t\t\tmessageElement.classList.remove('log-message-ack');\n\t\t\t\t}\n\t\t\t},\n\t\t\tonChangeComplete: anim => {\n\t\t\t\tconsole.log('In onChangeComplete. messageElement: ' + messageElement);\n\t\t\t\tif (destinationTimerAnimation) {\n\t\t\t\t\tconsole.log('Will restart timer animation');\n\t\t\t\t\tdestinationTimerAnimation.restart();\n\t\t\t\t}\n\n\t\t\t\tif (returnAck) {\n\t\t\t\t\tmessageElement.classList.remove('log-message');\n\t\t\t\t\tmessageElement.classList.add('log-message-ack');\n\t\t\t\t}\n\n\t\t\t\tvar additionalText = null;\n\t\t\t\tif (value && textElementId){\n\t\t\t\t\tvar addCSSClass = \"\";\n\t\t\t\t\tvar removeCSSClass = \"\";\n\n\t\t\t\t\tif (commitValue) {\n\t\t\t\t\t\taddCSSClass = \"set-text-committed\";\n\t\t\t\t\t\tremoveCSSClass = \"set-text-uncommitted\";\n\t\t\t\t\t\tadditionalText = Constants.COMMITTED;\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddCSSClass = \"set-text-uncommitted\";\n\t\t\t\t\t\tremoveCSSClass = \"set-text-committed\";\n\t\t\t\t\t\tadditionalText = Constants.UNCOMMITTED;\n\t\t\t\t\t}\n\t\t\t\t\t// setSVGText({\n\t\t\t\t\t// \ttargetId: textElementId,\n\t\t\t\t\t// \ttext: value,\n\t\t\t\t\t// \taddCSSClass: addCSSClass,\n\t\t\t\t\t// \tremoveCSSClass:removeCSSClass,\n\t\t\t\t\t// \tshowElement: !commitValue,\n\t\t\t\t\t// });\n\n\t\t\t\t\tconsole.log('additionalText: ' + additionalText + 'additionalTextElementID: ' + additionalTextElementID);\n\t\t\t\t\tif (additionalText != null && additionalTextElementID) {\n\t\t\t\t\t\tsetSVGText({\n\t\t\t\t\t\t\ttargetId: additionalTextElementID,\n\t\t\t\t\t\t\ttext: additionalText,\n\t\t\t\t\t\t\taddCSSClass: addCSSClass,\n\t\t\t\t\t\t\tremoveCSSClass:removeCSSClass,\n\t\t\t\t\t\t\tshowElement: !commitValue,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t},\n\t\t\tonComplete: anim => {\n\t\t\t\tif (returnAck) {\n\t\t\t\t\tmessageElement.classList.remove('log-message-ack');\n\t\t\t\t\t// we got the ack back so uncommitted text should be shown as committed now\n\t\t\t\t\tif (value && sourceNodeTextElementId) {\n\t\t\t\t\t\tsetSVGText({targetId: sourceNodeTextElementId, addCSSClass: \"set-text-committed\"});\n\t\t\t\t\t}\n\t\t\t\t\tif (value && sourceNodeAdditionalTextElementId){\n\t\t\t\t\t\tsetSVGText({targetId: sourceNodeAdditionalTextElementId, text: Constants.COMMITTED, addCSSClass: \"set-text-committed\"});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (srcTimerAnimation) {\n\t\t\t\t\tsrcTimerAnimation.restart();\n\t\t\t\t}\n\t\t\t\tmessageElement.style.transform = 'none';\n\t\t\t\tif (messageContrainer) {\n\t\t\t\t\tmessageContrainer.style.transform = 'none';\n\t\t\t\t}\n\t\t\t},\n\t\t\talternate: returnAck,\n\t\t});\n\treturn animation;\n}\n\nexport function logMessageFromLeaderToFollowers(withAck, value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\n\tvar nodeAAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_A, withAck, false, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\n\tvar nodeBAnimation = sendLogMessage(Constants.NODE_C,Constants.NODE_B, withAck, false, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\n\n\treturn [nodeAAnimation,nodeBAnimation];\n}\nexport function logMessageAckFromFollowersToLeader(value, commitValue, delay, nodeATimerAnimation, nodeBTimerAnimation, nodeCTimerAnimation) {\n\tvar nodeAAnimation = sendLogMessage(Constants.NODE_A,Constants.NODE_C, false, true, value, commitValue, delay,nodeATimerAnimation, nodeCTimerAnimation);\n\tvar nodeBAnimation = sendLogMessage(Constants.NODE_B,Constants.NODE_C, false, true, value, commitValue, delay, nodeBTimerAnimation, nodeCTimerAnimation);\n\n\treturn [nodeAAnimation,nodeBAnimation];\n}\nexport function getFinishPromises(animations) {\n\tvar animationPromises = [];\n\tanimations.forEach(currentAnimation => {\n\t\tanimationPromises.push(currentAnimation.finished);\n\t});\n\treturn animationPromises;\n}\n\nexport function messageFromC(destination, params) {\n\tvar translateX = 0;\n\tvar translateY = 0;\n\tvar targets = \"\";\n\tif (destination === Constants.NODE_B) {\n\t\ttranslateX = -140;\n\t\ttranslateY = -276;\n\t\ttargets = '#node-c-message-to-b';\n\t} else if (destination === Constants.NODE_A) {\n\t\ttargets = '#node-c-message-to-a';\n\t\ttranslateX = -275;\n\t} else if (destination === Constants.CLIENT_NODE) {\n\t\ttargets = '#node-c-message-to-client';\n\t\ttranslateX = -130;\n\t\ttranslateY = 135;\n\t}\n\n\tvar animation = anime({\n\t\ttargets: targets,\n\t\ttranslateX: translateX,\n\t\ttranslateY: translateY,\n\t\teasing: 'linear',\n\t\tduration: 1000,\n\t\tdirection: params.alternate?'alternate':'normal',\n\t\tbegin: params.onBegin,\n\t\tchangeComplete: params.onChangeComplete,\n\t\tcomplete: params.onComplete,\n\t\tdelay: params.delay?params.delay:0\n\t});\n\treturn animation;\n}\n\nexport function messageFromA(destination, params) {\n\tvar translateX = 0;\n\tvar translateY = 0;\n\tvar targets = \"\";\n\tif (destination === Constants.NODE_B) {\n\t\ttranslateX = 160;\n\t\ttranslateY = -290;\n\t\ttargets = '#node-a-message-to-b';\n\t} else if (destination === Constants.NODE_C) {\n\t\ttranslateX = 275;\n\t\ttargets = '#node-a-message-to-c';\n\t}\n\telse if (destination === Constants.CLIENT_NODE) {\n\t\ttranslateX = 150;\n\t\ttranslateY = 148;\n\t\ttargets = '#node-a-message-to-client';\n\t}\n\telse {\n\t\tconsole.warning('Unsupported destination: ' + destination);\n\t\treturn;\n\t}\n\n\n\tvar animation = anime({\n\t\ttargets: targets,\n\t\ttranslateX: translateX,\n\t\ttranslateY: translateY,\n\t\teasing: 'linear',\n\t\tduration: 1000,\n\t\tdirection: (params.alternate?'alternate':'normal'),\n\t\tbegin: params.onBegin,\n\t\tchangeComplete: params.onChangeComplete,\n\t\tcomplete: params.onComplete,\n\t\tdelay: params.delay?params.delay:0\n\t});\n\treturn animation;\n}\n\nexport function messageFromB(destination, params) {\n\tvar translateX = 0;\n\tvar translateY = 0;\n\tvar targets = \"\";\n\tif (destination === Constants.NODE_A) {\n\t\ttranslateX = -160;\n\t\ttranslateY = 290;\n\t\ttargets = '#node-b-message-to-a';\n\t} else if (destination === Constants.NODE_C) {\n\t\ttranslateX = 140;\n\t\ttranslateY = 276;\n\t\ttargets = '#node-b-message-to-c';\n\t}\n\telse {\n\t\tconsole.warning('Unsupported destination: ' + destination);\n\t\treturn;\n\t}\n\n\n\tvar animation = anime({\n\t\ttargets: targets,\n\t\ttranslateX: translateX,\n\t\ttranslateY: translateY,\n\t\teasing: 'linear',\n\t\tduration: 1000,\n\t\tdirection: (params.alternate?'alternate':'normal'),\n\t\tbegin: params.onBegin,\n\t\tchangeComplete: params.onChangeComplete,\n\t\tcomplete: params.onComplete,\n\t\tdelay: params.delay?params.delay:0\n\t});\n\treturn animation;\n}\n\nexport function getSetValueText(value) {\n\treturn \"Value: \" + value;\n}\n\nexport function partitionNodeC() {\n\tvar nodeCPartition = document.getElementById('node-c-partition-wrap');\n\tshowElement(nodeCPartition);\n}\n\n/**\n * Calls `startLeaseTimer` for a leader node's 'My Lease' timer.\n * @param {*} forNode \n * @param {Object} config \n * @param {number} config.duration Duration of animation in milliseconds\n * @param {number} config.targetPercent Percentage of timer at end of animation\n * @param {number} config.startPercent Percentage of timer at start of animation\n * @param {boolean} config.disableAutoPlay Whether to set autoplay for animation\n */\nexport function startMyLeaseTimer(forNode, config){\n\tvar targetId = myLeaseTimerId(forNode);\n\tconst { duration, targetPercent, startPercent, disableAutoPlay } = config;\n\treturn startLeaseTimer(targetId, duration, targetPercent, startPercent, disableAutoPlay);\n}\n/**\n * Calls `startLeaseTimer` for a follower node's 'Leader Lease' timer.\n * @param {*} forNode \n * @param {Object} config \n * @param {number} config.duration Duration of animation in milliseconds\n * @param {number} config.targetPercent Percentage of timer at end of animation\n * @param {number} config.startPercent Percentage of timer at start of animation\n * @param {boolean} config.disableAutoPlay Whether to set autoplay for animation\n */\nexport function startLeaderLeaseTimer(forNode, config){\n\tvar targetId = leaderLeaseTimerId(forNode);\n\tconst { duration, targetPercent, startPercent, disableAutoPlay } = config;\n\treturn startLeaseTimer(targetId, duration, targetPercent, startPercent, disableAutoPlay);\n}\n\n/**\n * Function that returns animation for a lease timer. This animation will run for\n * a specific `duration` until it reaches the specified `percent` limit.\n * @param {string} targetId String of html element id for this animation to run on\n * @param {number} duration Milliseconds until animation finishes\n * @param {number} targetPercent  Target percentage to be remaining after animation is over, default is 0.\n * @param {number} startPercentage From what percentage to start animation from\n * @param {boolean} disableAutoPlay Sets whether the animation should autoplay, most times should be true but\n * sometimes you need to disable it.\n */\nexport function startLeaseTimer(targetId, duration, targetPercent = 0, startPercent = 100, disableAutoPlay){\n\tvar timer = document.getElementById(targetId);\n\tshowElement(timer);\n\tvar innerRect = document.getElementById(targetId + '-inner');\n\tconst startWidth = startPercent / 100.0 * 80;\n\tconst targetWidth = targetPercent / 100.0 * 80;\n\tvar animation = anime({\n\t\ttargets: innerRect,\n\t\twidth: [startWidth, targetWidth], // calculatedWidth,\n\t\teasing: 'easeOutCubic',\n\t\tduration: duration,\n\t\tautoplay: !disableAutoPlay,\n\t});\n\treturn animation;\n}\n\nexport function myLeaseTimerId(forNode) {\n\treturn constructTimerId(\"mlease-rect-\", forNode);\n}\n\nexport function leaderLeaseTimerId(forNode) {\n\treturn constructTimerId(\"llease-rect-\", forNode);\n}\n\nfunction constructTimerId(prefix, forNode) {\n\tvar id = prefix;\n\tswitch(forNode) {\n\t\tcase Constants.NODE_C: {\n\t\t\tid += \"node-c\";\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.NODE_B: {\n\t\t\tid += \"node-b\";\n\t\t\tbreak;\n\t\t}\n\t\tcase Constants.NODE_A: {\n\t\t\tid += \"node-a\";\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tconsole.error(\"Unrecognized Node: \" + forNode);\n\t\t}\n\t}\n\treturn id;\n}\n","import React from 'react';\n\nconst SmallClock = () => {\n  return (\n    <svg width=\"100\" height=\"100\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g id=\"analog-clock\" transform=\"translate(10,10)\">\n          <circle id=\"face\" stroke=\"black\" strokeWidth=\"3px\" cx=\"10\" cy=\"20\" r=\"10\" fill=\"transparent\"/>\n          <g id=\"hands\">\n            <rect id=\"hour\" x=\"9\" y=\"12\" width=\"2\" height=\"10\" rx=\"2.5\" ry=\"2.55\" strokeWidth=\"1px\" fill=\"#333\" stroke=\"555\" />\n            <rect id=\"min\" x=\"9\" y=\"20\" width=\"9\" height=\"2\" rx=\"2.5\" ry=\"2.55\" strokeWidth=\"1px\" fill=\"#333\" stroke=\"555\" />\n          </g>\n        </g>\n    </svg>\n  )\n}\n\nexport default SmallClock;\n","import React, { Component } from 'react';\n\nclass HorizontalTimer extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<g transform=\"translate(10,10)\" className={this.props.className} id={this.props.uid}>\n\t\t\t\t<text x={this.props.x + 36} y={this.props.y - 4} fill=\"black\">\n\t\t\t\t\t{this.props.label}\n\t\t\t\t</text>\n\t\t\t\t<rect id={this.props.uid + '-inner'} x={this.props.x + 32} y={this.props.y} width=\"80\" height=\"6\" rx=\"2.5\" ry=\"2.55\" strokeWidth=\"1px\" fill=\"#333\" stroke=\"#555\" />\n\t\t\t\t<rect id={this.props.uid + '-outer'} x={this.props.x + 32} y={this.props.y} width=\"80\" height=\"7\" rx=\"2.5\" ry=\"2.55\" strokeWidth=\"2px\" fill=\"transparent\" stroke=\"black\" />}\n\t\t\t</g>\n\t\t)\n\t}\n}\n\nexport default HorizontalTimer;\n","import React, { Component } from 'react';\n\nimport SmallClock from './SmallClock';\nimport HorizontalTimer from './HorizontalTimer';\nimport {Constants} from '../constants';\n\nvar HelperFunctions = require('../HelperFunctions');\n\n\n// starting position of nodes\nconst nodeABaseXPos = 42;\nconst nodeABaseYPos = 324;\n\nconst nodeCBaseXPos = 320;\nconst nodeCBaseYPos = 324;\n\nconst nodeBBaseXPos = 168;\nconst nodeBBaseYPos = 42;\n\nconst clientNodeXPos = 186;\nconst clientNodeYPos = 550;\n\nexport const clientNodePositions = {\n\tmainText: {\n\t\tx: clientNodeXPos,\n\t\ty: clientNodeYPos + 9\n\t},\n\tclientMessage: {\n\t\tx: clientNodeXPos,\n\t\ty: clientNodeYPos - 72\n\t},\n}\n\nexport const nodeAPositions = {\n\tbase: {\n\t\tx: nodeABaseXPos,\n\t\ty: nodeABaseYPos\n\t},\n\tmessageToB: {\n\t\tx: nodeABaseXPos + 6,\n\t\ty: nodeABaseYPos\n\t},\n\tmessageToClient: {\n\t\tx: nodeABaseXPos + 6,\n\t\ty: nodeABaseYPos\n\t},\n\tleaseTimer: {\n\t\tx: nodeABaseXPos - 48,\n\t\ty: nodeABaseYPos + 95\n\t}\n}\n\nexport const nodeCPositions = {\n\tbase: {\n\t\tx: nodeCBaseXPos,\n\t\ty: nodeCBaseYPos\n\t},\n\tmessageToB: {\n\t\tx:nodeCBaseXPos+32 ,\n\t\ty:nodeCBaseYPos\n\t},\n\tmessageToA: {\n\t\tx:nodeCBaseXPos+32 ,\n\t\ty:nodeCBaseYPos\n\t},\n\tmessageToClient: {\n\t\tx:nodeCBaseXPos+32 ,\n\t\ty:nodeCBaseYPos\n\t},\n\tpartitionText1: {\n\t\tx: nodeCBaseXPos - 80,\n\t\ty: nodeCBaseYPos - 70\n\t},\n\tpartitionText2: {\n\t\tx: nodeCBaseXPos - 80,\n\t\ty: nodeCBaseYPos - 55\n\t}\n}\n\nexport const nodeBPositions = {\n\tbase: {\n\t\tx: nodeBBaseXPos,\n\t\ty: nodeBBaseYPos\n  },\n  messageToA: {\n\t\tx: nodeBBaseXPos - 10,\n\t\ty: nodeBBaseYPos\n\t},\n\tmessageToC: {\n\t\tx: nodeBBaseXPos + 32,\n\t\ty: nodeBBaseYPos\n\t},\n}\n\nclass MainDiagram extends Component {\n\n\trender() {\n\t\t// Initialize variables for each node location\n\t\t// These are numbers so we can't destructure..\n\t\tconst clientX = clientNodePositions.clientMessage.x;\n\t\tconst clientY = clientNodePositions.clientMessage.y;\n\t\tconst nodeAX = nodeAPositions.base.x;\n\t\tconst nodeAY = nodeAPositions.base.y;\n\t\tconst nodeBX = nodeBPositions.base.x;\n\t\tconst nodeBY = nodeBPositions.base.y;\n\t\tconst nodeCX = nodeCPositions.base.x;\n\t\tconst nodeCY = nodeCPositions.base.y;\n\n\t\treturn (\n\t\t\t<svg height=\"500\" width=\"720\">\n\t\t\t\t{/* reusable analog clock */}\n\t\t\t\t<defs>\n\t\t\t\t\t<SmallClock/>\n\t\t\t\t</defs>\n\n\t\t\t\t{/* Center text area */}\n\t\t\t\t<foreignObject x={30} y={160} width=\"400\" height=\"300\">\n\t\t\t\t\t<div id=\"center-message-text\" style={{fontFamily: 'Verdana', fontSize: '1em', padding: '30px'}}></div>\n\t\t\t\t</foreignObject>\n\t\t\t\t<g>\n\t\t\t\t\t<text id=\"center-message-rect\" className=\"visibility-hidden\"\n\t\t\t\t\t\tx={clientX} y={170} fontFamily=\"Verdana\" fontSize=\"1em\">\n\t\t\t\t\t\t<tspan id=\"center-message-text1\" x={50} dy=\"1.2em\"></tspan>\n\t\t\t\t\t\t<tspan id=\"center-message-text2\" x={50} dy=\"1.2em\"></tspan>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t\t{/* smaller circles */}\n\t\t\t\t<circle id=\"node-c-message-to-b\" className=\"node-small-circle\" cx={nodeCPositions.messageToB.x} cy={nodeCPositions.messageToB.y} />\n\t\t\t\t<circle id=\"node-c-message-to-a\" className=\"node-small-circle\" cx={nodeCPositions.messageToA.x} cy={nodeCPositions.messageToB.y} />\n\t\t\t\t<circle id=\"node-c-message-to-client\" className=\"node-small-circle visibility-hidden\" cx={nodeCPositions.messageToClient.x} cy={nodeCPositions.messageToClient.y} />\n\n\t\t\t\t{/* partition around C */}\n\t\t\t\t<g id=\"node-c-partition-wrap\" className=\"visibility-hidden\">\n\t\t\t\t\t<path d=\"M250,360a83,75,0,1,1,190,-15\" id=\"node-c-partition\" className=\"node-partition\"/>\n\t\t\t\t\t<text fill=\"black\">\n\t\t\t\t\t\t<tspan x={nodeCPositions.partitionText1.x} y={nodeCPositions.partitionText1.y}>Partitioned</tspan>\n\t\t\t\t\t\t<tspan x={nodeCPositions.partitionText2.x} y={nodeCPositions.partitionText2.y}>from A & B</tspan>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t\t<g>\n\t\t\t\t\t{/* Node A text with white background */}\n\t\t\t\t\t<rect id=\"client-message-status-bg\" className=\"visibility-hidden\" x={clientX - 92} y={clientY - 152} fill=\"white\" width=\"210\" height=\"76\"></rect>\n\t\t\t\t\t<text id=\"client-query-message\" x={clientX - 90} y={clientY - 148} className=\"visibility-hidden\">\n\t\t\t\t\t\t<tspan id=\"client-query-message-anchor\" x={clientX - 80} dy=\"1.2em\">Query: </tspan>\n\t\t\t\t\t\t<tspan id=\"client-query-message-text1\" dx={5} className=\"code-block\"></tspan>\n\t\t\t\t\t\t<tspan id=\"client-query-message-text2\" x={clientX - 83} dy=\"1.2em\" className=\"code-block\"></tspan>\n\t\t\t\t\t\t<tspan id=\"client-query-message-text3\" x={clientX - 83} dy=\"1.2em\" className=\"code-block\"></tspan>\n\t\t\t\t\t</text>\n\t\t\t\t\t<foreignObject x={clientX - 85} y={clientY - 148} width=\"200\" height=\"70\">\n\t\t\t\t\t\t<div id=\"client-message-status\"></div>\n\t\t\t\t\t</foreignObject>\n\n\t\t\t\t\t<path id=\"client-message-bubble\" className=\"visibility-hidden\"\n\t\t\t\t\t\td={`M${clientX + 3},${clientY - 50} l0,-26 l-90,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l200,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-90,0 z`}\n\t\t\t\t\t\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\n\t\t\t\t</g>\n\t\t\t\t<g id=\"client-message\" className=\"visibility-hidden\">\n\t\t\t\t\t<circle id=\"client-message-circle\" className=\"client-message\" cx={clientX} cy={clientY}/>\n\t\t\t\t\t<text id=\"client-message-text\" x={clientX - 18} y={clientY + 24}>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\t\t\t\t<image href=\"./warning-sign.jpg\" width=\"200\" x=\"0\" y=\"0\" />\n\t\t\t\t\n\t\t\t\t<circle id=\"node-b-small-circle\" className=\"node-small-circle\" cx={nodeBX + 24} cy={nodeBY + 12} />\n\n\t\t\t\t<circle id=\"node-a-message-to-b\" className=\"node-small-circle visibility-hidden\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\n        \t\t<circle id=\"node-a-message-to-c\" className=\"node-small-circle visibility-hidden\" cx={nodeAPositions.messageToB.x} cy={nodeAPositions.messageToB.y} />\n\t\t\t\t<circle id=\"node-a-message-to-client\" className=\"node-small-circle visibility-hidden\" cx={nodeAPositions.messageToClient.x} cy={nodeAPositions.messageToClient.y} />\n\n\t\t\t\t{/* node C */}\n\n\t\t\t\t{/* main and outer circles */}\n\t\t\t\t<g id=\"node-c-wrap\">\n\t\t\t\t\t<circle id=\"node-c-outer-circle\" className=\"node-outer-circle\" cx={nodeCX + 32} cy={nodeCY} r=\"38\" stroke=\"rgb(158, 196, 226)\" strokeWidth=\"6\" fill=\"transparent\" />\n\t\t\t\t\t<circle id=\"node-c-circle\" cx={nodeCX + 32} cy={nodeCY} r=\"35\" stroke=\"rgb(70, 130, 180)\" strokeWidth=\"0\" fill=\"rgb(70, 130, 180)\" />\n\t\t\t\t\t<text id=\"node-c-main-text\" x={nodeCX + 30} y={nodeCY + 6} className=\"node-text\" fill=\"black\">\n\t\t\t\t\t\tNode C\n\t\t\t\t\t</text>\n\t\t\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 93}\n\t\t\t\t\tlabel={\"My Lease\"}/>\n\t\t\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_C)} x={nodeCX - 48} y={nodeCY + 93}\n\t\t\t\t\tlabel={\"Leader Lease\"}/>\n\t\t\t\t</g>\n\n\t\t\t\t<g>\n\t\t\t\t\t<rect id=\"node-c-text-highlight\" className=\"visibility-hidden\"\n\t\t\t\t\t\tx={nodeCX + 5} y={nodeCY + 62} width=\"55\" height=\"24\" fill=\"yellow\"></rect>\n\t\t\t\t\t<text id=\"node-c-term-text-rect\" x={nodeCX + 10} y={nodeCY + 40} fill=\"black\" className=\"visibility-hidden\">\n\t\t\t\t\t\t<tspan id=\"node-c-term-text\" x={nodeCX + 10} dy=\"1.2em\"></tspan>\n\t\t\t\t\t\t<tspan id=\"node-c-extra-text\" className=\"node-extra-text\" x={nodeCX + 10} dy=\"1.2em\"></tspan>\n\t\t\t\t\t\t<tspan id=\"node-c-extra-text2\" className=\"node-extra-text2\" dx=\"0.5em\" ></tspan>\n\t\t\t\t\t</text>\n\t\t\t\t</g>\n\n        \t\t{/* Node C bubble text area */}\n\t\t\t\t<foreignObject x={nodeCX - 15} y={nodeCY - 174} width=\"235\" height=\"80\">\n\t\t\t\t\t<div id=\"node-c-message-text-alt\"></div>\n\t\t\t\t</foreignObject>\n\t\t\t\t<text id=\"node-c-message-status\" x={nodeCX - 10} y={nodeCY - 130} className=\"visibility-hidden\">\n\t\t\t\t\t<tspan id=\"node-c-message-status-text1\" x={nodeCX - 10} dy=\"1.2em\"></tspan>\n\t\t\t\t\t<tspan id=\"node-c-message-status-text2\" x={nodeCX - 10} dy=\"1.2em\"></tspan>\n\t\t\t\t</text>\n\t\t\t\t<path id=\"node-c-message-bubble\" className=\"visibility-hidden\"\n\t\t\t\t\td={`M${nodeCX + 40},${nodeCX - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-65 c0,0 0,-5 5,-5 l215,0 c0,0 5,0 5,5 l0,65 c0,0 0,5 -5,5 l-140,0 z`}\n\t\t\t\t\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\n        \t\t<path id=\"node-c-message-bubble-alt\" className=\"visibility-hidden\"\n\t\t\t\t\td={`M${nodeCX + 45},${nodeCX - 50} l15,-40 l-80,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l235,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-135,0 z`}\n\t\t\t\t\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\n\n\t\t\t\t{/* node A */}\n\n\t\t\t\t{/* main and outer circles */}\n\t\t\t\t<g id=\"node-a-wrap\">\n\t\t\t\t\t<circle id=\"node-a-outer-circle\" className=\"node-outer-circle\" cx={nodeAX} cy={nodeAY} r=\"38\" stroke=\"rgb(158, 196, 226)\" strokeWidth=\"6\" fill=\"transparent\" />\n\t\t\t\t\t<circle id=\"node-a-circle\" cx={nodeAX} cy={nodeAY} r=\"35\" stroke=\"rgb(70, 130, 180)\" strokeWidth=\"0\" fill=\"rgb(70, 130, 180)\" />\n\t\t\t\t\t<text id=\"node-a-main-text\" x={nodeAX} y={nodeAY + 6} className=\"node-text\">\n\t\t\t\t\t\tNode A\n\t\t\t\t\t</text>\n\t\t\t\t\t<rect id=\"node-a-timer-highlight\" className=\"visibility-hidden\"\n            \t\t\tx={nodeAPositions.leaseTimer.x + 18} y={nodeAPositions.leaseTimer.y - 12} width=\"75\" height=\"20\" fill=\"yellow\"></rect>\n\t\t\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y} label={\"My Lease\"}/>\n\t\t\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)} x={nodeAPositions.leaseTimer.x - 24} y={nodeAPositions.leaseTimer.y} label={\"Leader Lease\"}/>\n\t\t\t\t</g>\n\n        {/* text */}\n        <g>\n          <rect id=\"node-a-term-highlight\" className=\"visibility-hidden\"\n            x={nodeAX - 30} y={nodeAY + 41} width=\"63\" height=\"24\" fill=\"yellow\"></rect>\n          <rect id=\"node-a-text-highlight\" className=\"visibility-hidden\"\n\t\t\tx={nodeAX - 30} y={nodeAY + 62} width=\"55\" height=\"24\" fill=\"yellow\"></rect>\n          <text id=\"node-a-term-text-rect\" x={nodeAX} y={nodeAY + 40} fill=\"black\" className=\"visibility-hidden\">\n            <tspan id=\"node-a-term-text\" x={nodeAX - 24} dy=\"1.2em\"></tspan>\n            <tspan id=\"node-a-extra-text\" className=\"node-extra-text\" x={nodeAX - 24} dy=\"1.2em\"></tspan>\n            <tspan id=\"node-a-extra-text2\" className=\"node-extra-text2\" dx=\"0.5em\"></tspan>\n          </text>\n        </g>\n\n\t\t{/* node B */}\n        <circle id=\"node-b-message-to-a\" className=\"node-small-circle visibility-hidden\" cx={nodeBPositions.messageToA.x} cy={nodeBPositions.messageToA.y} />\n        <circle id=\"node-b-message-to-c\" className=\"node-small-circle visibility-visible log-message\" cx={nodeBPositions.messageToC.x} cy={nodeBPositions.messageToC.y} />\n\n\t\t{/* main and outer circles */}\n\t\t<g id=\"node-b-wrap\">\n\t\t\t<circle id=\"node-b-circle\" cx={nodeBX + 24} cy={nodeBY} r=\"35\" stroke=\"rgb(70, 130, 180)\" strokeWidth=\"0\" fill=\"rgb(70, 130, 180)\" />\n\t\t\t<circle id=\"node-b-outer-circle\" className=\"node-outer-circle\" cx={nodeBX + 24} cy={nodeBY} r=\"38\" stroke=\"rgb(158, 196, 226)\" strokeWidth=\"6\" fill=\"transparent\" />\n\t\t\t<text id=\"node-b-main-text\" x={nodeBX + 24} y={nodeBY + 6} className=\"node-text\">\n\t\t\t\tNode B\n\t\t\t</text>\n\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.myLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 95} label={\"My Lease\"}/>\n\t\t\t<HorizontalTimer className=\"visibility-hidden\" uid={HelperFunctions.leaderLeaseTimerId(Constants.NODE_B)} x={nodeBX - 54} y={nodeBY + 95} label=\"Leader Lease\"/>\n\t\t</g>\n\n        {/* text */}\n        <g>\n          <rect id=\"node-b-term-highlight\" className=\"visibility-hidden\"\n              x={nodeBX - 6} y={nodeBY + 45} width=\"63\" height=\"24\" fill=\"yellow\"></rect>\n          <rect id=\"node-b-text-highlight\" className=\"visibility-hidden\"\n\t\t\t\t\t\tx={nodeBX - 6} y={nodeBY + 65} width=\"55\" height=\"24\" fill=\"yellow\"></rect>\n          <text id=\"node-b-term-text-rect\" x={nodeBX} y={nodeBY + 43} fill=\"black\" className=\"visibility-hidden\">\n            <tspan id=\"node-b-term-text\" x={nodeBX} dy=\"1.2em\"></tspan>\n            <tspan id=\"node-b-extra-text\" className=\"node-extra-text\" x={nodeBX} dy=\"1.2em\"></tspan>\n            <tspan id=\"node-b-extra-text2\" className=\"node-extra-text2\" dx={\"0.5em\"}></tspan>\n          </text>\n        </g>\n\n\t\t{/* Node A text with white background */}\n\t\t<rect id=\"node-a-message-status-bg\" className=\"visibility-hidden\" x={nodeAX - 40} y={nodeAY - 167} fill=\"white\" width=\"207\" height=\"100\"></rect>\n        <foreignObject x={nodeAX - 32} y={nodeAY - 155} width=\"200\" height=\"80\">\t\n\t\t\t<div id=\"node-a-message-status\"></div>\n\t\t</foreignObject>\n\t\t{/* speech bubble */}\n\t\t<path id=\"node-a-message-bubble\" className=\"visibility-hidden\"\n\t\t\t// d={`M${nodeAX + 20},${nodeAY - 40} l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-80 c0,0 0,-5 5,-5 l170,0 c0,0 5,0 5,5 l0,80 c0,0 0,5 -5,5 l-90,0 z`}\n\t\t\td=\"M62,284 l0,-26 l-55,0 c0,0 -5,0 -5,-5 l0,-90 c0,0 0,-5 5,-5 l196,0 c0,0 5,0 5,5 l0,90 c0,0 0,5 -5,5 l-126,0 z\"\n\t\t\tstyle={{fillOpacity: 0, stroke:'black', strokeWidth:1}}></path>\n\n\t\t{/* client node */}\n\t\t<g id=\"client-node\" className=\"visibility-visible\">\n\t\t\t<circle className=\"client-node\" cx={clientNodeXPos} cy={clientNodeYPos} />\n\t\t\t<text id=\"client-node-main-text\" x={clientNodeXPos} y={clientNodeYPos + 9} className=\"client-node-text\">\n\t\t\t\tClient\n\t\t\t</text>\n\t\t\t<text id=\"client-node-value\" x={clientNodeXPos + 40} y={clientNodeYPos + 9}></text>\n\t\t\t<text id=\"client-node-value-alt\" x={clientNodeXPos + 40} y={clientNodeYPos + 9} className=\"visibility-hidden\">\n\t\t\t\t<tspan fill=\"red\" x={clientNodeXPos + 40} fontSize=\"1.5em\"></tspan>\n\t\t\t\t<tspan id=\"client-node-value-error-header\" dx=\"4px\"></tspan>\n\t\t\t\t<tspan id=\"client-node-value-error-subtitle\" fill=\"red\" x={clientNodeXPos + 40} dy=\"1.2em\"></tspan>\n\t\t\t</text>\n\t\t</g>\n\n\t\t{/* lease messages */}\n\t\t<g id=\"node-c-lease-to-node-a\" className=\"visibility-hidden\">\n\t\t\t<use href=\"#analog-clock\" x={nodeCX + 6} y={nodeCY - 36}/>\n\t\t</g>\n\t\t<g id=\"node-c-lease-to-node-b\" className=\"visibility-hidden\">\n\t\t\t<use href=\"#analog-clock\" x={nodeCX + 24} y={nodeCY - 36}/>\n\t\t</g>\n\n\t\t<g id=\"node-a-lease-to-node-b\" className=\"visibility-hidden\">\n\t\t\t<use href=\"#analog-clock\" x={nodeAX} y={nodeAY - 36}/>\n\t\t</g>\n\n\t</svg>\n\n\t\t);\n\t}\n}\nexport default MainDiagram;\n","\nimport React, { Component } from 'react';\nimport './App.css';\nimport anime from 'animejs/lib/anime.es.js';\nimport MainDiagram from './svg/MainDiagram';\nimport { Constants } from './constants';\n\nvar HelperFunctions = require('./HelperFunctions');\n\nconst ANIMATION_STATE_UNSAFE_READ = \"ANIMATION_STATE_UNSAFE_READ\";\nconst ANIMATION_STATE_NODE_C_PARTITIONED = \"ANIMATION_STATE_NODE_C_PARTITIONED\";\nconst ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER = \"ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER\";\nconst ANIMATION_STATE_CLIENT_SET_OPERATION = 'ANIMATION_STATE_CLIENT_SET_OPERATION';\nconst ANIMATION_STATE_CLIENT_READ_FROM_NODE_C = 'ANIMATION_STATE_CLIENT_READ_FROM_NODE_C';\nconst ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER = \"ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER\";\nconst ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE = 'ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE';\n\nconst SET_VALUE2=\"V2\";\n\nexport class ReadOperationAnimation extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\n\t\tthis.state = {\n      animationFinished: false,\n      previousEnabled: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.mainTextSect = document.getElementById('center-message-text');\n\t}\n\n\tpause() {\n\t}\n\tresume() {\n\t}\n\n\tonNext() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onNextInternal(resolve,reject);\n\t\t});\n\t}\n\n\tonNextInternal(resolve,reject) {\n    // Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Highlight for Text Term (Line 1) -> Only 2 needed\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    // Text Extra (Line 3)\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n\n    // MESSAGE OBJECTS\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n    const clientQueryMessage = document.getElementById('client-query-message');\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\n\n\t\tswitch(this.animationState) {\n\t\t\tcase Constants.ANIMATION_STATE_INITIAL: {\n\t\t\t\t//////////////////// initial setup ////////////////////\n\n\t\t\t\t// hide all outer circles (TODO: revisit this approach)\n\t\t\t\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\n\t\t\t\tfor (var i = 0; i < nodeOuterCircles.length; i++) {\n\t\t\t\t\tHelperFunctions.hideElement(nodeOuterCircles[i]);\n\t\t\t\t}\n\t\t\t\t//////////////////////////////////////////////////////\n\t\t\t\tthis.changeMainText('Let\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\n\t\t\t\t\t// make Node C the Leader\n\t\t\t\t\tvar nodeC = document.getElementById('node-c-circle');\n\t\t\t\t\tnodeC.classList.add('leader-node');\n          HelperFunctions.showElement(nodeATextContainer);\n          HelperFunctions.showElement(nodeBTextContainer);\n          HelperFunctions.showElement(nodeCTextContainer);\n\n          nodeATermText.innerHTML = 'Term: 1';\n          nodeBTermText.innerHTML = 'Term: 1';\n          nodeCTermText.innerHTML = 'Term: 1';\n\n          nodeAExtraText.innerHTML = '(k, V1)';\n          nodeBExtraText.innerHTML = '(k, V1)';\n          nodeCExtraText.innerHTML = '(k, V1)';\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_UNSAFE_READ: {\n        this.changeMainText('');\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n        const nodeCText = document.getElementById('node-c-message-text-alt')\n        const contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Unsafe to read from raft leader without majority heartbeats. This sequence explains why.'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            nodeCText.innerText = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            this.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_NODE_C_PARTITIONED: {\n\t\t\t\tthis.changeMainText('');\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n\n\t\t\t\tconst contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            HelperFunctions.partitionNodeC()\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\n        document.getElementById('node-c-message-text-alt').innerText = '';\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        HelperFunctions.showElement(nodeAMessageBubble);\n        const content = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'This results in A and B\\n electing a new raft\\nleader, say A.'\n        };\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 1300,\n          update: function() {\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            var nodeA = document.getElementById('node-a-circle');\n            nodeA.classList.add('leader-node');\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \"Term: 2\"});\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \"Term: 2\"});\n            HelperFunctions.showElement(nodeATermHighlight);\n            HelperFunctions.showElement(nodeBTermHighlight);\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_CLIENT_SET_OPERATION: {\n        /**\n         *  Update: (monospaced) UPDATE T SET value = V2 WHERE key = k \n         *  (Get rid of committed but leave uncommitted and change node\n         *  subtext to k: V1, and highlight the value. \n         *  After Node A sends msg to client, show Client: Update successful!\n         */\n        nodeAMessageStatus.innerHTML = '';\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        HelperFunctions.hideElement(nodeATermHighlight);\n        HelperFunctions.hideElement(nodeBTermHighlight);\n        HelperFunctions.introduceClient();\n\n        const clientContent1 = {\n          index: 0,\n          str: 'UPDATE T SET'\n        }\n        const clientContent2 = {\n          index: 0,\n          str: 'value = V2 WHERE'\n        }\n        const clientContent3 = {\n          index: 0,\n          str: ' key = k'\n        }\n        \n        const statusText1 = document.getElementById('client-query-message-text1');\n        const statusText2 = document.getElementById('client-query-message-text2');\n        const statusText3 = document.getElementById('client-query-message-text3');\n        HelperFunctions.showElement(clientMessageBubble);\n        HelperFunctions.showElement(clientMessageBackground);\n        HelperFunctions.showElement(clientQueryMessage);\n        anime({\n          targets: clientContent1,\n          index: clientContent1.str.length,\n          easing: 'linear',\n          duration: 400,\n          update: function() {\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\n          },\n          complete: () => {\n            anime({\n              targets: clientContent2,\n              index: clientContent2.str.length,\n              easing: 'linear',\n              duration: 400,\n              update: function () {\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\n              },\n              complete: () => {\n                anime({\n                  targets: clientContent3,\n                  index: clientContent3.str.length,\n                  easing: 'linear',\n                  duration: 400,\n                  update: function () {\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\n                  },\n                  complete: () => {   \n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\n                    animation.finished.then(() => {\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\n                      nodeAToBAnimation.finished.then(() => {\n                        document.getElementById('client-query-message-text1').innerHTML = '';\n                        document.getElementById('client-query-message-text2').innerHTML = '';\n                        document.getElementById('client-query-message-text3').innerHTML = '';\n                        HelperFunctions.hideElement(clientMessageBubble);\n                        HelperFunctions.hideElement(clientQueryMessage);\n                        HelperFunctions.showElement(nodeAMessageBubble);\n                        \n                        // send commit confirmation back to B\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\n                        nodeAExtraText.innerHTML = '(k, V2)';\n                        HelperFunctions.showElement(nodeAExtraHighlight);\n                        HelperFunctions.hideElement(nodeAExtraText2);\n\n                        aToBAnim.finished.then(() => {\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\n                        });\n\n                        nodeAMessageStatus.innerHTML = '';\n                        HelperFunctions.hideElement(nodeAMessageBubble);\n\n                        // notify client as well\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\n\n                        messageToClientAnimation.finished.then(() => {\n                          HelperFunctions.showElement(clientMessageBubble);\n                          HelperFunctions.hideElement(clientQueryMessage);\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\n                          resolve({\n                            animationState: this.animationState,\n                            delay: 100,\n                          });\n                        });\n                      });\n                    })\n                  }\n                });\n              }\n            });\n          }\n        });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\n        nodeAMessageStatus.innerHTML = '';\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        HelperFunctions.hideElement(document.getElementById('node-a-text-highlight'));\n        HelperFunctions.hideElement(document.getElementById('node-b-text-highlight'));\n        document.getElementById('client-query-message-text1').innerHTML = ''\n        document.getElementById('client-query-message-text2').innerHTML = ''\n        document.getElementById('client-query-message-text3').innerHTML = ''\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(clientQueryMessage);\n        document.getElementById('client-message-status').innerHTML = '';\n        \n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\n        this.changeMainText('');\n        const statusText1 = document.getElementById('client-query-message-text1');\n        const statusText2 = document.getElementById('client-query-message-text2');\n        statusText1.innerHTML = '';\n        statusText2.innerHTML = '';\n        HelperFunctions.showElement(clientMessageBubble);\n        HelperFunctions.showElement(clientMessageBackground);\n        HelperFunctions.showElement(clientQueryMessage);\n\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\n\n        const clientContent1 = {\n          index: 0,\n          str: 'SELECT value'\n        }\n        const clientContent2 = {\n          index: 0,\n          str: 'FROM T WHERE key = k'\n        }\n\n        anime({\n          targets: clientContent1,\n          index: clientContent1.str.length,\n          easing: 'linear',\n          duration: 400,\n          update: function() {\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\n          },\n          complete: () => {\n            anime({\n              targets: clientContent2,\n              index: clientContent2.str.length,\n              easing: 'linear',\n              duration: 600,\n              update: function() {\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\n              },\n              complete: () => {\n                HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\n                resolve({\n                  animationState: this.animationState,\n                  delay: 100,\n                });\n              }\n            }); \n          }\n        });\n\t\t\t\tbreak;\n      }\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(clientMessageBackground);\n        HelperFunctions.hideElement(clientQueryMessage);\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n\n\t\t\t\tconst contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'C thinks it is the raft leader.\\nWithout majority heartbeats,\\nC will respond with value = V1'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE, false);\n            animation.finished.then(() => {\n              HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\n              document.getElementById('client-node-value-error-header').innerHTML = 'Value: V1';\n              document.getElementById('client-node-value-error-subtitle').innerHTML = 'Expected value = V2';\n            });\n            this.animationState = Constants.ANIMATION_STATE_FINISHED;\n            this.setState({ animationFinished: true });\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n        break;\n      }\n\t\t\tcase Constants.ANIMATION_STATE_FINISHED: {\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 100,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tconsole.error('Unrecognized state: ' + this.animationState);\n\t\t}\n\t}\n\n  onPrevious() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onPreviousInternal(resolve,reject);\n\t\t});\n\t}\n  \n  onPreviousInternal(resolve, reject) {\n    // Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Highlight for Text Term (Line 1) -> Only 2 needed\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\n    // Text Extra (Line 3)\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n\n    // MESSAGE OBJECTS\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n    const clientQueryMessage = document.getElementById('client-query-message');\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\n\n    // MISC\n    const partitionWrap = document.getElementById('node-c-partition-wrap');\n\n    switch(this.animationState) {\n      case ANIMATION_STATE_UNSAFE_READ: {\n        let nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.remove('leader-node');\n        HelperFunctions.hideElement(nodeATextContainer);\n        HelperFunctions.hideElement(nodeBTextContainer);\n        HelperFunctions.hideElement(nodeCTextContainer);\n        nodeATermText.innerHTML = '';\n        nodeBTermText.innerHTML = '';\n        nodeCTermText.innerHTML = '';\n        nodeAExtraText.innerHTML = '';\n        nodeBExtraText.innerHTML = '';\n        nodeCExtraText.innerHTML = '';\n        this.changeMainText('');\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\n        resolve({\n          animationState: this.animationState,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_NODE_C_PARTITIONED: {\n        let nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.remove('leader-node');\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        document.getElementById('node-c-message-text-alt').innerText = '';\n        nodeATermText.innerHTML = '';\n        nodeBTermText.innerHTML = '';\n        nodeCTermText.innerHTML = '';\n        nodeAExtraText.innerHTML = '';\n        nodeBExtraText.innerHTML = '';\n        nodeCExtraText.innerHTML = '';\n        this.changeMainText('Let\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\n          nodeATermText.innerHTML = 'Term: 1';\n          nodeBTermText.innerHTML = 'Term: 1';\n          nodeCTermText.innerHTML = 'Term: 1';\n\n          nodeAExtraText.innerHTML = '(k, V1)';\n          nodeBExtraText.innerHTML = '(k, V1)';\n          nodeCExtraText.innerHTML = '(k, V1)';\n          nodeC.classList.add('leader-node');\n          this.animationState = ANIMATION_STATE_UNSAFE_READ;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER: {\n        HelperFunctions.hideElement(partitionWrap);\n        const nodeCText = document.getElementById('node-c-message-text-alt')\n        nodeCText.innerText = '';\n        const contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Unsafe to read from raft leader without majority heartbeats. This sequence explains why.'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            nodeCText.innerText = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            this.animationState = ANIMATION_STATE_NODE_C_PARTITIONED;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_SET_OPERATION: {\n        var nodeA = document.getElementById('node-a-circle');\n        nodeA.classList.remove('leader-node');\n        HelperFunctions.hideElement(partitionWrap);\n        nodeATermText.innerHTML = 'Term: 1';\n        nodeBTermText.innerHTML = 'Term: 1';\n        HelperFunctions.hideElement(nodeATermHighlight);\n        HelperFunctions.hideElement(nodeBTermHighlight);\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\n        nodeAMessageStatus.innerText = '';\n        const altBubbleText = document.getElementById('node-c-message-text-alt');\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n\n\t\t\t\tconst contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Now imagine raft leader C gets\\n partitioned from followers\\n[but not from client]'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            altBubbleText.innerText = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            HelperFunctions.showElement(partitionWrap);\n            this.animationState = ANIMATION_STATE_NODE_A_ELECTED_AS_LEADER;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_READ_FROM_NODE_C: {\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(document.getElementById('client-node'));\n        HelperFunctions.hideElement(document.getElementById('client-message-circle'));\n        document.getElementById('client-message-status').innerHTML = '';\n        HelperFunctions.hideElement(nodeAExtraHighlight);\n        HelperFunctions.hideElement(nodeBExtraHighlight);\n        HelperFunctions.hideElement(clientQueryMessage);\n        nodeAExtraText.innerText = '(k, V1)';\n        nodeBExtraText.innerText = '(k, V1)';\n        HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \"Term: 1\"});\n        HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \"Term: 1\"});\n        HelperFunctions.showElement(nodeAMessageBubble);\n        const content = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'This results in A and B\\n electing a new raft\\nleader, say A.'\n        };\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 1300,\n          update: function() {\n            nodeAMessageStatus.innerHTML = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            var nodeA = document.getElementById('node-a-circle');\n            nodeA.classList.add('leader-node');\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \"Term: 2\"});\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \"Term: 2\"});\n            HelperFunctions.showElement(nodeATermHighlight);\n            HelperFunctions.showElement(nodeBTermHighlight);\n            this.animationState = ANIMATION_STATE_CLIENT_SET_OPERATION;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n\t\t\t\t});\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER: {\n        this.changeMainText('');\n        nodeAMessageStatus.innerHTML = '';\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        HelperFunctions.hideElement(nodeATermHighlight);\n        HelperFunctions.hideElement(nodeBTermHighlight);\n        HelperFunctions.introduceClient();\n\n        const clientContent1 = {\n          index: 0,\n          str: 'UPDATE T SET'\n        }\n        const clientContent2 = {\n          index: 0,\n          str: 'value = V2 WHERE'\n        }\n        const clientContent3 = {\n          index: 0,\n          str: ' key = k'\n        }\n        \n        const statusText1 = document.getElementById('client-query-message-text1');\n        const statusText2 = document.getElementById('client-query-message-text2');\n        const statusText3 = document.getElementById('client-query-message-text3');\n        statusText1.innerHTML = '';\n        statusText2.innerHTML = '';\n        statusText3.innerHTML = '';\n        HelperFunctions.showElement(clientMessageBubble);\n        HelperFunctions.showElement(clientMessageBackground);\n        HelperFunctions.showElement(clientQueryMessage);\n        anime({\n          targets: clientContent1,\n          index: clientContent1.str.length,\n          easing: 'linear',\n          duration: 400,\n          update: function() {\n            statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\n          },\n          complete: () => {\n            anime({\n              targets: clientContent2,\n              index: clientContent2.str.length,\n              easing: 'linear',\n              duration: 400,\n              update: function () {\n                statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\n              },\n              complete: () => {\n                anime({\n                  targets: clientContent3,\n                  index: clientContent3.str.length,\n                  easing: 'linear',\n                  duration: 400,\n                  update: function () {\n                    statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\n                  },\n                  complete: () => {   \n                    var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\n                    animation.finished.then(() => {\n                      var nodeAToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)');\n                      nodeAToBAnimation.finished.then(() => {\n                        document.getElementById('client-query-message-text1').innerHTML = '';\n                        document.getElementById('client-query-message-text2').innerHTML = '';\n                        document.getElementById('client-query-message-text3').innerHTML = '';\n                        HelperFunctions.hideElement(clientMessageBubble);\n                        HelperFunctions.showElement(nodeAMessageBubble);\n                        \n                        // send commit confirmation back to B\n                        var aToBAnim = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 600);\n                        nodeAExtraText.innerHTML = '(k, V2)';\n                        HelperFunctions.showElement(nodeAExtraHighlight);\n                        HelperFunctions.hideElement(nodeAExtraText2);\n\n                        aToBAnim.finished.then(() => {\n                          HelperFunctions.showElement(document.getElementById('node-b-text-highlight'));\n                          document.getElementById('node-b-extra-text').innerHTML = '(k, V2)';\n                          HelperFunctions.hideElement(document.getElementById('node-b-extra-text2'));\n                        });\n\n                        nodeAMessageStatus.innerHTML = '';\n                        HelperFunctions.hideElement(nodeAMessageBubble);\n\n                        // notify client as well\n                        var messageToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE);\n\n                        messageToClientAnimation.finished.then(() => {\n                          HelperFunctions.showElement(clientMessageBubble);\n                          document.getElementById('client-message-status').textContent = 'Update successful!';\n                          this.animationState = ANIMATION_STATE_CLIENT_READ_FROM_NODE_C;\n                          resolve({\n                            animationState: this.animationState,\n                            delay: 100,\n                          });\n                        });\n                      });\n                    })\n                  }\n                });\n              }\n            });\n          }\n        });\n        break;\n      }\n\n\n      case ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE: {\n        HelperFunctions.hideElement(clientMessageBackground);\n        HelperFunctions.hideElement(clientQueryMessage);\n        HelperFunctions.hideElement(clientMessageBubble);\n        this.changeMainText('Now the client queries C. This should return value = ' + SET_VALUE2, () => {\n          this.animationState = ANIMATION_STATE_CLIENT_SENDS_QUERY_TO_OLD_LEADER;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n        });\n        break;\n      }\n      case Constants.ANIMATION_STATE_FINISHED: {\n        this.setState({ animationFinished: false });\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n\n        const statusText1 = document.getElementById('client-query-message-text1');\n        const statusText2 = document.getElementById('client-query-message-text2');\n        statusText1.innerHTML = '';\n        statusText2.innerHTML = '';\n        HelperFunctions.showElement(clientMessageBubble);\n        HelperFunctions.showElement(clientMessageBackground);\n        HelperFunctions.showElement(clientQueryMessage);\n\n        HelperFunctions.hideElement(document.getElementById('node-c-extra-text2'));\n\n        const clientContent1 = {\n          index: 0,\n          str: 'SELECT value'\n        }\n        const clientContent2 = {\n          index: 0,\n          str: 'FROM T WHERE key = k'\n        }\n\n        anime({\n          targets: clientContent1,\n          index: clientContent1.str.length,\n          easing: 'linear',\n          duration: 400,\n          update: function() {\n            statusText1.innerHTML = clientContent1.str.substr(0, clientContent1.index);\n          },\n          complete: () => {\n            anime({\n              targets: clientContent2,\n              index: clientContent2.str.length,\n              easing: 'linear',\n              duration: 600,\n              update: function() {\n                statusText2.innerHTML = clientContent2.str.substr(0, clientContent2.index);\n              },\n              complete: () => {\n                HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\n                this.animationState = ANIMATION_STATE_NODE_C_RETURNS_INCORRECT_VALUE;\n                resolve({\n                  animationState: this.animationState,\n                  delay: 100,\n                });\n              }\n            }); \n          }\n        });\n        break;\n      }\n      default:\n        console.error('Unrecognized state: ' + this.animationState);\n    }\n  }\n\n\tchangeMainText(text, onComplete) {\n\t\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\n  }\n\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div id=\"main-diagram\">\n\t\t\t\t\t<MainDiagram/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"main-text-sect\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default ReadOperationAnimation;\n","\nimport React, { Component } from 'react';\nimport './App.css';\nimport anime from 'animejs/lib/anime.es.js';\nimport MainDiagram from './svg/MainDiagram';\nimport { Constants } from './constants';\n\nvar HelperFunctions = require('./HelperFunctions');\n\nconst ANIMATION_STATE_EXPLAIN_PROTOCOL = 'ANIMATION_STATE_EXPLAIN_PROTOCOL';\nconst ANIMATION_STATE_LEADER_ELECTION = 'ANIMATION_STATE_LEADER_ELECTION';\nconst ANIMATION_STATE_NODE_DATA = 'ANIMATION_STATE_NODE_DATA';\nconst ANIMATION_STATE_CLIENT_INTRODUCED = 'ANIMATION_STATE_CLIENT_INTRODUCED';\nconst ANIMATION_STATE_PERFORMED_READ_ON_LEADER = \"ANIMATION_STATE_PERFORMED_READ_ON_LEADER\";\nconst ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS = \"ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS\";\nconst ANIMATION_STATE_CLIENT_FINISH_OPERATION = 'ANIMATION_STATE_CLIENT_FINISH_OPERATION';\n\nconst SET_VALUE1=\"V1\";\nconst warningSVG = (height = '550.45', width = '627.77') => (\n\t\t`<svg id=\"Layer_3\" xmlns=\"http://www.w3.org/2000/svg\" height=${height}\" width=\"${width}\" version=\"1.0\" viewBox=\"0 0 627.769 550.45\">\n\t\t\t<path id=\"path2231\" fill=\"#ea0000\" d=\"m614.57 504.94l-279.4-483.94c-4.38-7.588-12.47-12.262-21.23-12.262s-16.85 4.674-21.23 12.258l-279.41 483.94c-4.375 7.58-4.375 16.93 0.003 24.52 4.379 7.58 12.472 12.25 21.23 12.25h558.81c8.76 0 16.86-4.67 21.23-12.25 4.38-7.59 4.38-16.94 0-24.52z\"/>\n\t\t\t<polygon id=\"polygon2233\" points=\"93.977 482.88 533.9 482.88 313.94 101.89\" fill=\"#fff\"/>\n\t\t\t<path id=\"path2235\" d=\"m291.87 343.36c1.21 11.49 3.21 20.04 6.02 25.66 2.81 5.63 7.82 8.43 15.04 8.43h2.01c7.22 0 12.24-2.8 15.04-8.43 2.81-5.62 4.82-14.17 6.02-25.66l6.42-88.75c1.21-17.3 1.81-29.71 1.81-37.25 0-10.25-2.91-18.25-8.73-23.99-5.53-5.46-13.38-8.59-21.56-8.59s-16.04 3.13-21.57 8.59c-5.81 5.74-8.72 13.74-8.72 23.99 0 7.54 0.6 19.95 1.8 37.25l6.42 88.75z\"/>\n\t\t\t<circle id=\"circle2237\" cy=\"430.79\" cx=\"313.94\" r=\"30.747\"/>\n\t\t</svg>`);\n\nexport class RaftReadOperationAnimation extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.animationState = Constants.ANIMATION_STATE_INITIAL;\n\t\tthis.state = {\n      animationFinished: false,\n      previousEnabled: true,\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.mainTextSect = document.getElementById('center-message-text');\n\t}\n\n\tpause(){ }\n\tresume() {\t}\n\n\tonNext() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onNextInternal(resolve,reject);\n\t\t});\n\t}\n\n\tonNextInternal(resolve,reject) {\n    // Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\n    // Text Extra (Line 3)\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n\n\t\tswitch(this.animationState) {\n\t\t\tcase Constants.ANIMATION_STATE_INITIAL: {\n\t\t\t\t//////////////////// initial setup ////////////////////\n\t\t\t\t// make Node C the Leader\n\t\t\t\t// var nodeC = document.getElementById('node-c-circle');\n\t\t\t\t// nodeC.classList.add('leader-node');\n\n\t\t\t\t// hide all outer circles (TODO: revisit this approach)\n\t\t\t\tlet nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\n\t\t\t\tfor (let i = 0; i < nodeOuterCircles.length; i++){\n\t\t\t\t\tHelperFunctions.hideElement(nodeOuterCircles[i]);\n        }\n\n        this.changeMainText('Lets say we have a 3-node raft group.');\n        this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL;\n\n        resolve({\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_EXPLAIN_PROTOCOL: {\n\t\t\t\tthis.changeMainText('Nodes would have performed leader election..', () => {\n          // Show each text container and then edit the text within them\n          HelperFunctions.showElement(nodeATextContainer);\n          HelperFunctions.showElement(nodeBTextContainer);\n          HelperFunctions.showElement(nodeCTextContainer);\n\n          nodeAExtraText.innerHTML = 'Voted For C';\n          nodeBExtraText.innerHTML = 'Voted For C';\n          nodeCExtraText.innerHTML = 'Voted For C';\n        })\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION;\n        resolve({\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_LEADER_ELECTION: {\n        this.changeMainText('');\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\n        HelperFunctions.showElement(document.getElementById('node-c-message-status'));\n        const contentLine1 = {\n          index: 0,\n          str: 'C is the current raft leader,'\n        };\n        const contentLine2 = {\n          index: 0,\n          str: 'denoted by a black border.'\n        };\n        const statusTextLine1 = document.getElementById('node-c-message-status-text1');\n        const statusTextLine2 = document.getElementById('node-c-message-status-text2');\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 600,\n          update: function() {\n            statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            anime({\n              targets: contentLine2,\n              index: contentLine2.str.length,\n              easing: 'linear',\n              duration: 900,\n              update: function() {\n                statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => {\n                document.getElementById('node-c-circle').classList.add('leader-node');\n                nodeATermText.innerHTML = 'Term: 1';\n                nodeBTermText.innerHTML = 'Term: 1';\n                nodeCTermText.innerHTML = 'Term: 1';\n                this.animationState = ANIMATION_STATE_NODE_DATA;\n                resolve({\n                  animationState: ANIMATION_STATE_NODE_DATA,\n                  delay: 100,\n                });\n              }\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_NODE_DATA: {\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\n\t\t\t\tthis.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\n          nodeAExtraText.innerHTML = '(k, V1)';\n          nodeBExtraText.innerHTML = '(k, V1)';\n          nodeCExtraText.innerHTML = '(k, V1)';\n\n          HelperFunctions.showElement(nodeAExtraHighlight);\n          HelperFunctions.showElement(nodeBExtraHighlight);\n          HelperFunctions.showElement(nodeCExtraHighlight);\n        });\n        this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\n        resolve({\n          animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\n\t\t\t\t//////////////////////////////////////////////////////\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\n        this.changeMainText('');\n\n\t\t\t\tintroduceClientAnimation.finished.then(() => {\n          HelperFunctions.hideElement(nodeAExtraHighlight);\n          HelperFunctions.hideElement(nodeBExtraHighlight);\n          HelperFunctions.hideElement(nodeCExtraHighlight);\n\n          HelperFunctions.showElement(document.getElementById('client-message'));\n          const statusElem = document.getElementById('client-query-message');\n          document.getElementById('client-query-message-text1');\n          const contentLine1 = {\n            index: 0,\n            str: 'SELECT value'\n          }\n          const contentLine2 = {\n            index: 0,\n            str: 'FROM T WHERE key = k'\n          }\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\n          HelperFunctions.showElement(clientMessageBubble);\n          HelperFunctions.showElement(statusElem);\n          anime({\n            targets: contentLine1,\n            index: contentLine1.str.length,\n            easing: 'linear',\n            duration: 600,\n            update: function() {\n              statusTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\n            },\n            complete: () => {\n              anime({\n                targets: contentLine2,\n                index: contentLine2.str.length,\n                easing: 'linear',\n                duration: 900,\n                update: function() {\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\n                },\n                complete: () => HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false)\n              });\n            }\n          });\n\n\t\t\t\t\tthis.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tanimationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\n\t\t\t\t\t\tdelay: 100,\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\n\t\t\t\t// Leader contacts followers to obtain a consensus on current value\n\t\t\t\tHelperFunctions.hideElement(document.getElementById('client-query-message'));\n        HelperFunctions.hideElement(clientMessageBubble);\n        document.getElementById('client-query-message-text1').innerHTML = '';\n        document.getElementById('client-query-message-text2').innerHTML = ''\n\t\t\t\tconst statusElem = document.getElementById('node-c-message-status');\n\t\t\t\tHelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\n\t\t\t\tHelperFunctions.showElement(statusElem);\n\t\t\t\tconst contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Per raft protocol, leader should'\n\t\t\t\t}\n\t\t\t\tconst contentLine2 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'obtain majority heartbeat.'\n\t\t\t\t}\n\t\t\t\tconst leaderTextLine1 = document.getElementById('node-c-message-status-text1');\n\t\t\t\tconst leaderTextLine2 = document.getElementById('node-c-message-status-text2')\n\t\t\t\tanime({\n\t\t\t\t\ttargets: contentLine1,\n\t\t\t\t\tindex: contentLine1.str.length,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tduration: 800,\n\t\t\t\t\tupdate: function() {\n\t\t\t\t\t\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tanime({\n\t\t\t\t\t\t\ttargets: contentLine2,\n\t\t\t\t\t\t\tindex: contentLine2.str.length,\n\t\t\t\t\t\t\teasing: 'linear',\n\t\t\t\t\t\t\tduration: 1040,\n\t\t\t\t\t\t\tupdate: function() {\n\t\t\t\t\t\t\t\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\n            });\n            \n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 1000\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\n\n        receivedAckAnimation[0].finished.then(() => {\n          // Once majority is obtained. The leader returns value back to the client\n          document.getElementById('node-c-message-status-text1').textContent = 'Leader:';\n          document.getElementById('node-c-message-status-text2').textContent = '';\n          const leaderText1 = {\n            index: 7,\n            str: 'Majority heartbeat obtained,'\n          }\n          const leaderText2 = {\n            index: 0,\n            str: 'raft leader can serve read.'\n          }\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\n          anime({\n            targets: leaderText1,\n            index: leaderText1.str.length,\n            easing: 'linear',\n            duration: 800,\n            update: function() {\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\n            },\n            complete: () => {\n              anime({\n                targets: leaderText2,\n                index: leaderText2.str.length,\n                easing: 'linear',\n                duration: 1080,\n                update: function() {\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\n                },\n                complete: () => {\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\n                  animation.finished.then(() => {\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\n\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\n                    resolve({\n                      animationState: this.animationState,\n                      delay: 100\n                    });\n                  });\n                }\n              });\n            }\n          });\n        })\n\t\t\t\tbreak;\n      }\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\n\t\t\t\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\n        \n        this.changeMainText(warningSVG(26, 28) + ' If nodes are in different regions, obtaining majority heartbeat is expensive. Query has high latency.');\n        this.animationState = Constants.ANIMATION_STATE_FINISHED;\n        this.setState({ animationFinished: true });\n        resolve({\n          animationState: this.animationState,\n          delay: 100\n        });\n        break;\n      }\n\t\t\tcase Constants.ANIMATION_STATE_FINISHED: {\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 100,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault: {\n\t\t\t\tconsole.error('Unrecognized state: ' + this.animationState);\n\t\t\t\treject('Unrecognized state: ' + this.animationState);\n\t\t\t}\n\t\t}\n  }\n  \n  onPrevious() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onPreviousInternal(resolve,reject);\n\t\t});\n  }\n\n  onPreviousInternal(resolve,reject) {\n    // Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\n    const nodeCExtraHighlight = document.getElementById('node-c-text-highlight');\n    // Text Extra (Line 3)\n    // const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n    // const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\n    // const nodeCExtraText2 = document.getElementById('node-c-extra-text2');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n\n    \n\t\tswitch(this.animationState) {\n\n\t\t\tcase ANIMATION_STATE_EXPLAIN_PROTOCOL: {\n        // Undo phase\n        this.changeMainText('');\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\n\n        resolve({\n          animationState: Constants.ANIMATION_STATE_INITIAL,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_LEADER_ELECTION: {\n        // Undo phase\n        HelperFunctions.hideElement(nodeATextContainer);\n        HelperFunctions.hideElement(nodeBTextContainer);\n        HelperFunctions.hideElement(nodeCTextContainer);\n        // Redo previous phase\n        HelperFunctions.showElement(this.mainTextSect);\n        this.changeMainText('Lets say we have a 3-node raft group.', () => { this.animationState = ANIMATION_STATE_EXPLAIN_PROTOCOL });\n\n        resolve({\n          animationState: ANIMATION_STATE_EXPLAIN_PROTOCOL,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_NODE_DATA: {\n        // Undo phase\n        document.getElementById('node-c-circle').classList.remove('leader-node');\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\n        HelperFunctions.hideElement(document.getElementById('node-c-message-status'));\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\n        nodeATermText.innerHTML = '';\n        nodeBTermText.innerHTML = '';\n        nodeCTermText.innerHTML = '';\n        nodeAExtraText.innerHTML = '';\n        nodeBExtraText.innerHTML = '';\n        nodeCExtraText.innerHTML = '';\n\n        // Redo previous phase\n        this.changeMainText('Nodes would have performed leader election..', () => {\n          nodeAExtraText.innerHTML = 'Voted For C';\n          nodeBExtraText.innerHTML = 'Voted For C';\n          nodeCExtraText.innerHTML = 'Voted For C';\n        })\n        this.animationState = ANIMATION_STATE_LEADER_ELECTION\n        resolve({\n          animationState: ANIMATION_STATE_LEADER_ELECTION,\n          delay: 100,\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_INTRODUCED: {\n        // Undo phase\n        this.changeMainText('');\n        document.getElementById('node-c-circle').classList.remove('leader-node');\n        HelperFunctions.hideElement(nodeAExtraHighlight);\n        HelperFunctions.hideElement(nodeBExtraHighlight);\n        HelperFunctions.hideElement(nodeCExtraHighlight);\n\n        // Redo previous phase\n        nodeAExtraText.innerHTML = 'Voted for C';\n        nodeBExtraText.innerHTML = 'Voted for C';\n        nodeCExtraText.innerHTML = 'Voted for C';\n        \n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\n        HelperFunctions.showElement(document.getElementById('node-c-message-status'));\n        const contentLine1 = {\n          index: 0,\n          str: 'C is the current raft leader,'\n        };\n        const contentLine2 = {\n          index: 0,\n          str: 'denoted by the black border.'\n        };\n        const statusTextLine1 = document.getElementById('node-c-message-status-text1');\n        const statusTextLine2 = document.getElementById('node-c-message-status-text2');\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 600,\n          update: function() {\n            statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            anime({\n              targets: contentLine2,\n              index: contentLine2.str.length,\n              easing: 'linear',\n              duration: 900,\n              update: function() {\n                statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => {\n                document.getElementById('node-c-circle').classList.add('leader-node');\n                nodeATermText.innerHTML = 'Term: 1';\n                nodeBTermText.innerHTML = 'Term: 1';\n                nodeCTermText.innerHTML = 'Term: 1';\n                this.animationState = ANIMATION_STATE_NODE_DATA;\n                resolve({\n                  animationState: ANIMATION_STATE_NODE_DATA,\n                  delay: 100,\n                });\n              }\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_PERFORMED_READ_ON_LEADER: {\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideClient();\n        document.getElementById('client-query-message-text1').innerHTML = '';\n        document.getElementById('client-query-message-text2').innerHTML = '';\n        this.changeMainText('Assume all nodes have data: <br />(key,value) = (k, V1)', () => {\n          HelperFunctions.showElement(nodeAExtraHighlight);\n          HelperFunctions.showElement(nodeBExtraHighlight);\n          HelperFunctions.showElement(nodeCExtraHighlight);\n          this.animationState = ANIMATION_STATE_CLIENT_INTRODUCED;\n          resolve({\n            animationState: ANIMATION_STATE_CLIENT_INTRODUCED,\n            delay: 100,\n          });\n        })\n        break;\n      }\n      case ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS: {\n        const statusElem = document.getElementById('node-c-message-status');\n\t\t\t\tHelperFunctions.hideElement(document.getElementById('node-c-message-bubble'));\n\t\t\t\tHelperFunctions.hideElement(statusElem);\n\t\t\t\tdocument.getElementById('node-c-message-status-text1').innerHTML = '';\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\n        var introduceClientAnimation = HelperFunctions.introduceClient('');\n        this.changeMainText('');\n\n\t\t\t\tintroduceClientAnimation.finished.then(() => {\n          HelperFunctions.hideElement(nodeAExtraHighlight);\n          HelperFunctions.hideElement(nodeBExtraHighlight);\n          HelperFunctions.hideElement(nodeCExtraHighlight);\n\n          HelperFunctions.showElement(document.getElementById('client-message'));\n          const statusElem = document.getElementById('client-query-message');\n          document.getElementById('client-query-message-text1');\n          const contentLine1 = {\n            index: 0,\n            str: 'SELECT value'\n          }\n          const contentLine2 = {\n            index: 0,\n            str: 'FROM T WHERE key = k'\n          }\n          const statusTextLine1 = document.getElementById('client-query-message-text1');\n          const statusTextLine2 = document.getElementById('client-query-message-text2');\n          HelperFunctions.showElement(clientMessageBubble);\n          HelperFunctions.showElement(statusElem);\n          anime({\n            targets: contentLine1,\n            index: contentLine1.str.length,\n            easing: 'linear',\n            duration: 600,\n            update: function() {\n              statusTextLine1.innerHTML = contentLine1.str.substr(0, contentLine1.index);\n            },\n            complete: () => {\n              anime({\n                targets: contentLine2,\n                index: contentLine2.str.length,\n                easing: 'linear',\n                duration: 900,\n                update: function() {\n                  statusTextLine2.innerHTML = contentLine2.str.substr(0, contentLine2.index);\n                },\n                complete: () => {\n                  const anim = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false);\n                  anim.finished.then(() => {\n                    this.animationState = ANIMATION_STATE_PERFORMED_READ_ON_LEADER;\n                    resolve({\n                      animationState: ANIMATION_STATE_PERFORMED_READ_ON_LEADER,\n                      delay: 100,\n                    });\n                  })\n                }\n              });\n            }\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_FINISH_OPERATION: {\n        const leaderTextLine1 = document.getElementById('node-c-message-status-text1');\n        const leaderTextLine2 = document.getElementById('node-c-message-status-text2');\n        HelperFunctions.hideElement(document.getElementById('client-node-value'));\n        leaderTextLine1.innerHTML = '';\n        leaderTextLine2.innerHTML = '';\n        \n        const contentLine1 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Per raft protocol, leader should'\n\t\t\t\t}\n\t\t\t\tconst contentLine2 = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'obtain majority heartbeat.'\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tanime({\n\t\t\t\t\ttargets: contentLine1,\n\t\t\t\t\tindex: contentLine1.str.length,\n\t\t\t\t\teasing: 'linear',\n\t\t\t\t\tduration: 800,\n\t\t\t\t\tupdate: function() {\n\t\t\t\t\t\tleaderTextLine1.textContent = contentLine1.str.substr(0, contentLine1.index);\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\tanime({\n\t\t\t\t\t\t\ttargets: contentLine2,\n\t\t\t\t\t\t\tindex: contentLine2.str.length,\n\t\t\t\t\t\t\teasing: 'linear',\n\t\t\t\t\t\t\tduration: 1040,\n\t\t\t\t\t\t\tupdate: function() {\n\t\t\t\t\t\t\t\tleaderTextLine2.textContent = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => HelperFunctions.logMessageFromLeaderToFollowers(false)\n            });\n            \n            this.animationState = ANIMATION_STATE_LEADER_RECEIVED_MAJORITY_ON_VALUE_FROM_FOLLOWERS;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n\t\t\t\t\t}\n        });\n        break;\n      }\n      case Constants.ANIMATION_STATE_FINISHED: {\n        this.changeMainText('');\n        HelperFunctions.hideElement(document.getElementById('client-node-value'))\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\n        this.setState({ animationFinished: false });\n        const receivedAckAnimation = HelperFunctions.logMessageAckFromFollowersToLeader();\n\n        receivedAckAnimation[0].finished.then(() => {\n          // Once majority is obtained. The leader returns value back to the client\n          const statusElem = document.getElementById('node-c-message-status');\n          HelperFunctions.showElement(document.getElementById('node-c-message-bubble'));\n          HelperFunctions.showElement(statusElem);\n          \n          const leaderText1 = {\n            index: 7,\n            str: 'Majority heartbeat obtained,'\n          }\n          const leaderText2 = {\n            index: 0,\n            str: 'raft leader can serve read.'\n          }\n          const ltxt1 = document.getElementById('node-c-message-status-text1');\n          const ltxt2 = document.getElementById('node-c-message-status-text2')\n          anime({\n            targets: leaderText1,\n            index: leaderText1.str.length,\n            easing: 'linear',\n            duration: 800,\n            update: function() {\n              ltxt1.textContent = leaderText1.str.substr(0, leaderText1.index);\n            },\n            complete: () => {\n              anime({\n                targets: leaderText2,\n                index: leaderText2.str.length,\n                easing: 'linear',\n                duration: 1080,\n                update: function() {\n                  ltxt2.textContent = leaderText2.str.substr(0, leaderText2.index);\n                },\n                complete: () => {\n                  var animation = HelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\n                  animation.finished.then(() => {\n                    HelperFunctions.setSVGText({targetId: 'client-node-value', text: `value: ${SET_VALUE1}`, showElement: true });\n\n                    this.animationState = ANIMATION_STATE_CLIENT_FINISH_OPERATION;\n                    resolve({\n                      animationState: this.animationState,\n                      delay: 100\n                    });\n                  });\n                }\n              });\n            }\n          });\n        });\n        break;\n      }\n      default: {\n        console.error('Unrecognized state or unimplemented: ' + this.animationState);\n        reject('Unrecognized state or unimplemented: ' + this.animationState);\n      }\n    }\n  }\n  \n\tchangeMainText(text, onComplete) {\n\t\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div id=\"main-diagram\">\n\t\t\t\t\t<MainDiagram/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default RaftReadOperationAnimation;\n","\nimport React, { Component } from 'react';\nimport './App.css';\nimport anime from 'animejs/lib/anime.es.js';\nimport MainDiagram from './svg/MainDiagram';\nimport { Constants } from './constants';\n\nvar HelperFunctions = require('./HelperFunctions');\n\nconst ANIMATION_STATE_LEADER_REPLICATES_LEASE = \"ANIMATION_STATE_LEADER_REPLICATES_LEASE\";\nconst ANIMATION_STATE_LEADER_READS_PROTOCOL = 'ANIMATION_STATE_LEADER_READS_PROTOCOL';\nconst ANIMATION_STATE_START_LEADER_LEASE = 'ANIMATION_STATE_START_LEADER_LEASE';\nconst ANIMATION_STATE_CLIENT_UPDATE_FAILS = 'ANIMATION_STATE_CLIENT_UPDATE_FAILS';\nconst ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED = \"ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED\";\nconst ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED = \"ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED\";\nconst ANIMATION_STATE_NEW_LEADER_ELECTED = \"ANIMATION_STATE_NEW_LEADER_ELECTED\";\nconst ANIMATION_STATE_LEADER_LEASE_DURATION = 'ANIMATION_STATE_LEADER_LEASE_DURATION';\nconst ANIMATION_STATE_OLD_LEADER_STILL_READABLE = 'ANIMATION_STATE_OLD_LEADER_STILL_READABLE';\nconst ANIMATION_STATE_OLD_LEASE_EXPIRES = 'ANIMATION_STATE_OLD_LEASE_EXPIRES';\nconst ANIMATION_STATE_LEADER_LEASE_CONCLUSION = 'ANIMATION_STATE_LEADER_LEASE_CONCLUSION';\nconst ANIMATION_STATE_NEW_LEADER_SENT_LEASES = \"ANIMATION_STATE_NEW_LEADER_SENT_LEASES\";\n\nconst ORIGINAL_LEADER_INITIAL_DURATION = 3000;\nconst LEADER_REPLICATION_DURATION = 5000;\n\n\nexport class LeaderLeaseAnimation extends Component {\n\tconstructor(props) {\n    super(props);\n    this.animationState = Constants.ANIMATION_STATE_INITIAL;\n\t\tthis.state = {\n      previousEnabled: true\n\t\t}\n\t\tthis.init();\n\t}\n\tinit() {\n\t\tthis.nodeATimerAnimation = null;\n\t\tthis.nodeBTimerAnimation = null;\n\t\tthis.nodeCTimerAnimation = null;\n\t}\n\tcomponentDidMount() {\n\t\tthis.mainTextSect = document.getElementById('center-message-text');\n\t\tthis.timersAreActive = false;\n\t}\n\n\tpause() {\n\t\tif (this.timersAreActive) {\n\t\t\tthis.pauseTimers();\n\t\t}\n\t}\n\tresume() {\n\t\tif (this.timersAreActive) {\n\t\t\tthis.resumeTimers();\n\t\t}\n\t}\n\tonNext() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onNextInternal(resolve,reject);\n\t\t});\n\t}\n\n\tonNextInternal(resolve,reject) {\n\t\t// Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Highlight for Text Term (Line 1) -> Only 2 needed\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\n    // Text Extra (Line 3)\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\n\n    // MESSAGE OBJECTS\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n    const clientQueryMessage = document.getElementById('client-query-message');\n    const clientMessageStatus = document.getElementById('client-message-status');\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\n\n\t\tswitch(this.animationState) {\n\t\t\tcase Constants.ANIMATION_STATE_INITIAL: {\n\t\t\t\t//////////////////// initial setup ////////////////////\n\n\t\t\t\t// hide all outer circles (TODO: revisit this approach)\n\t\t\t\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\n\t\t\t\tfor (var i = 0; i < nodeOuterCircles.length; i++){\n\t\t\t\t\tHelperFunctions.hideElement(nodeOuterCircles[i]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//////////////////////////////////////////////////////\n\t\t\t\tthis.changeMainText('Let\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\n          // make Node C  the leader\n          var nodeC = document.getElementById('node-c-circle');\n          nodeC.classList.add('leader-node');\n          HelperFunctions.showElement(nodeATextContainer);\n          HelperFunctions.showElement(nodeBTextContainer);\n          HelperFunctions.showElement(nodeCTextContainer);\n          HelperFunctions.showElement(nodeATermText);\n          HelperFunctions.showElement(nodeBTermText);\n          HelperFunctions.showElement(nodeCTermText);\n          HelperFunctions.showElement(nodeAExtraText);\n          HelperFunctions.showElement(nodeBExtraText);\n          HelperFunctions.showElement(nodeCExtraText);\n\n          nodeATermText.innerHTML = 'Term: 1';\n          nodeBTermText.innerHTML = 'Term: 1';\n          nodeCTermText.innerHTML = 'Term: 1';\n\n          nodeAExtraText.innerHTML = '(k, V1)';\n          nodeBExtraText.innerHTML = '(k, V1)';\n          nodeCExtraText.innerHTML = '(k, V1)';\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n          });\n\t\t\t\t});\n\t\t\t\tbreak;\n      }\n      case ANIMATION_STATE_LEADER_READS_PROTOCOL: {\n        this.changeMainText('This sequence shows how to safely perform reads from the leader using leader leases.', () => {\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_START_LEADER_LEASE: {\n        this.changeMainText('');\n        HelperFunctions.showElement(nodeCMessageBubble);\n        HelperFunctions.showElement(nodeCMessageStatus);\n        const statusText1 = document.getElementById('node-c-message-status-text1');\n        const statusText2 = document.getElementById('node-c-message-status-text2');\n\n        const contentLine1 = {\n          index: 0,\n          str: 'Raft leader starts a'\n        }\n        const contentLine2 = {\n          index: 0,\n          str: 'new lease timer for itself.'\n        }\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 600,\n          update: function() {\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            anime({\n              targets: contentLine2,\n              index: contentLine2.str.length,\n              easing: 'linear',\n              duration: 600,\n              update: function() {\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => {\n                this.timersAreActive = true;\n                this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\n                  duration: ORIGINAL_LEADER_INITIAL_DURATION,\n                  targetPercent: 90,\n                  disableAutoPlay: true,\n                });\n                this.nodeCTimerAnimation.play();\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\n                resolve({\n                  animationState: this.animationState,\n                  delay: 100,\n                  asyncAnimation: true,\n                });\n              }\n            });\n          }\n        });\n        break;\n      }\n\t\t\tcase ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\n        this.nodeCTimerAnimation.seek(0);\n        HelperFunctions.hideElement(nodeCMessageBubble);\n        HelperFunctions.hideElement(nodeCMessageStatus);\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n        const textAlt = document.getElementById('node-c-message-text-alt');\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\n        const content = {\n\t\t\t\t\tindex: 0,\n\t\t\t\t\tstr: 'Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.'\n        };\n\n        var nodeCTextAnimation = anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2500,\n          update: function() {\n            textAlt.innerText = content.str.substr(0, content.index);\n          }\n\t\t\t\t});\n        var nodeALeaseAnimation = anime({\n          targets: leaseToA,\n          translateX: -280,\n          translateY: 0,\n          easing: 'linear',\n          duration: 1500,\n          begin: () => {\n            HelperFunctions.showElement(leaseToA);\n          },\n          complete: () =>{\n            HelperFunctions.hideElement(leaseToA);\n            leaseToA.style.transform = 'none';\n          },\n        });\n\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\n          duration: LEADER_REPLICATION_DURATION,\n          targetPercent: 60,\n          startPercent: 90,\n        });\n\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\n        var nodeBLeaseAnimation = anime({\n          targets: leaseToB,\n          translateX: -150,\n          translateY: -280,\n          easing: 'linear',\n          duration: 1500,\n          begin: () => {\n            HelperFunctions.showElement(leaseToB);\n          },\n          complete: () =>{\n            HelperFunctions.hideElement(leaseToB);\n            leaseToB.style.transform = 'none';\n          },\n        });\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n            duration: ORIGINAL_LEADER_INITIAL_DURATION,\n            targetPercent: 85\n          });\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n            duration: ORIGINAL_LEADER_INITIAL_DURATION,\n            targetPercent: 90\n          });\n\n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\n          resolve({\n            animationState: this.animationState,\n            delay: 500,\n            asyncAnimation: true\n          });\n        });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_LEADER_LEASE_DURATION: {\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n\n        this.changeMainText('Any new leader must wait out the existing Leader Lease duration before acquiring lease.', () => {\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\n          // partition original leader\n\t\t\t\t\tHelperFunctions.partitionNodeC();\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\n        this.changeMainText('');\n        HelperFunctions.showElement(nodeAMessageBubble);\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\n        const nodeAContent = {\n          index: 0,\n          str: 'A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.'\n        };\n\n        anime({\n          targets: nodeAContent,\n          index: nodeAContent.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\n          },\n          complete: () => {\n            // elect Node A as new leader candidate\n            var nodeA = document.getElementById('node-a-circle');\n            nodeA.classList.add('leader-candidate-node');\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \"Term: 2\"});\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \"Term: 2\"});\n            HelperFunctions.showElement(nodeATermHighlight);\n            HelperFunctions.showElement(nodeBTermHighlight);\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n\t\t\t\t});\n        \n        break;\n      }\n\t\t\tcase ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\n        nodeAMessageStatus.innerHTML = '';\n        HelperFunctions.hideElement(nodeATermHighlight);\n        HelperFunctions.hideElement(nodeBTermHighlight);\n\t\t\t\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\n          HelperFunctions.introduceClient();\n          HelperFunctions.showElement(clientMessageBubble);\n          HelperFunctions.showElement(clientMessageBackground);\n          HelperFunctions.showElement(clientQueryMessage);\n          const clientContent1 = {\n            index: 0,\n            str: 'UPDATE T SET'\n          }\n          const clientContent2 = {\n            index: 0,\n            str: 'value = V2 WHERE'\n          }\n          const clientContent3 = {\n            index: 0,\n            str: ' key = k'\n          }\n          \n          const statusText1 = document.getElementById('client-query-message-text1');\n          const statusText2 = document.getElementById('client-query-message-text2');\n          const statusText3 = document.getElementById('client-query-message-text3');\n          anime({\n            targets: clientContent1,\n            index: clientContent1.str.length,\n            easing: 'linear',\n            duration: 400,\n            update: function() {\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\n            },\n            complete: () => {\n              anime({\n                targets: clientContent2,\n                index: clientContent2.str.length,\n                easing: 'linear',\n                duration: 400,\n                update: function () {\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\n                },\n                complete: () => {\n                  anime({\n                    targets: clientContent3,\n                    index: clientContent3.str.length,\n                    easing: 'linear',\n                    duration: 400,\n                    update: function () {\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\n                    },\n                    complete: () => {\n                      var messageContrainerElement = document.getElementById('client-message');\n                      var messageElement = document.getElementById('client-message-circle');\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\t{\n                        onBegin: () => {\n                          HelperFunctions.showElement(messageContrainerElement);\n                          messageElement.classList.add('log-message');\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\n                        },\n                        onChangeComplete: () => {\n                          messageElement.classList.remove('log-message');\n                          messageElement.classList.add('error-message');\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\n                          // messageTextElement\n                        },\n                        onComplete: () => {\n                          messageElement.classList.remove('error-message');\n                          HelperFunctions.hideElement(messageContrainerElement);\n                          messageContrainerElement.style.transform = 'none';\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\n                          HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\n                          document.getElementById('client-node-value-error-header').innerHTML = 'Query Rejected:';\n                          document.getElementById('client-node-value-error-subtitle').innerHTML = 'Cannot find raft leader';\n                        },\n                        alternate: true,\n                      });\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\n                      resolve({\n                        animationState: this.animationState,\n                        delay: 100,\n                      });\n                    }\n                  });\n                }\n              });\n            }\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\n        this.changeMainText('');\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\n\n        const contentLine1 = {\n          index: 0,\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\n        };\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n       break;\n      }\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\n        HelperFunctions.hideElement(clientMessageBubble);\n        document.getElementById('client-message-status').innerHTML = '';\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\n        const content = {\n          index: 0,\n          str: 'Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.'\n        };\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n          duration: 6000,\n          startPercent: 85,\n          targetPercent: 35,\n         });\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n          duration: 6000,\n          startPercent: 90,\n          targetPercent: 40,\n         });\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\n          duration: 6000,\n          startPercent: 60,\n        });\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\n          },\n        });\n        this.nodeCTimerAnimation.finished.then(() => {\n          var nodeC = document.getElementById('node-c-circle');\n          nodeC.classList.remove('leader-node');\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n            asyncAnimation: true\n          });\n        });\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_NEW_LEADER_ELECTED: {\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\n        const nodeAMessage = document.getElementById('node-a-message-status');\n        const content = {\n          index: 0,\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\n        };\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 800,\n          update: function() {\n            nodeAMessage.textContent = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n              duration: 2500,\n              startPercent: 35,\n            });\n            this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n              duration: 2500,\n              targetPercent: 10,\n              startPercent: 40,\n              disableAutoPlay: true\n            });\n            this.nodeBTimerAnimation.play();\n            this.nodeATimerAnimation.finished.then(() => {\n              var nodeA = document.getElementById('node-a-circle');\n              HelperFunctions.showElement(document.getElementById('node-a-timer-highlight'));\n              nodeA.classList.remove('leader-candidate-node');\n              nodeA.classList.add('leader-node');\n    \n              // hide Node A's leader lease timer\n              HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\n    \n              // and start its my lease timer\n              this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, {\n                duration: 3000,\n                targetPercent: 60,\n               });\n    \n              // then send leader lease message to B\n              var leaseToB = document.getElementById('node-a-lease-to-node-b');\n              anime({\n                targets: leaseToB,\n                translateX: 150,\n                translateY: -280,\n                easing: 'linear',\n                duration: 1500,\n                begin: () => {\n                  HelperFunctions.showElement(leaseToB);\n                },\n                complete: () => {\n                  HelperFunctions.hideElement(leaseToB);\n                  leaseToB.style.transform = 'none';\n    \n                  this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n                    duration: 2500,\n                    targetPercent: 80,\n                  });\n                  this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\n                  resolve({\n                    animationState: this.animationState,\n                    delay: 100,\n                    asyncAnimation: true\n                  });\n                },\n              });\n            });\n          }\n        });        \n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\n        HelperFunctions.hideElement(document.getElementById('node-a-timer-highlight'));\n        document.getElementById('node-a-message-status').innerHTML = '';\n        HelperFunctions.showElement(clientMessageBubble);\n        const messageStatus = document.getElementById('client-message-status');\n\n        const content = {\n          index: 0,\n          str: 'From here on, client can issue reads/writes to the new leader.'\n        }\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            messageStatus.textContent = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            // initiate a raft round\n            this.nodeATimerAnimation.restart();\n   \n            // client message to A\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\n\n            animation.finished.then(() => {\n              // message with ack from A to B\n              nodeAExtraText.innerHTML = '(k, V2)';\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\n\n              messageToBAnimation.finished.then(() => {\n                nodeBExtraText.innerHTML = '(k, V2)';\n                HelperFunctions.hideElement(nodeAExtraText2);\n                HelperFunctions.showElement(nodeAExtraHighlight);\n                let newBTimer = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n                  duration: 2500,\n                  startPercent: 100,\n                  targetPercent: 80\n                });\n                // confirmation message back to B and the client\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, newBTimer);\n\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\n                  HelperFunctions.hideElement(nodeBExtraText2);\n                  nodeBExtraText.innerHTML = '(k, V2)';\n                  HelperFunctions.showElement(nodeBExtraHighlight);\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\n                  this.stopTimers();\n                  resolve({\n                    animationState: this.animationState,\n                    delay: 100,\n                  });\n                });\n              });\n            });\n          }\n        });\n\t\t\t\tbreak;\n      }\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\n        HelperFunctions.hideElement(nodeAExtraHighlight);\n        HelperFunctions.hideElement(nodeBExtraHighlight);\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(clientMessageBackground);\n        document.getElementById('client-message-status').innerHTML = '';\n        this.changeMainText('Leader Leases ensure low latency reads even when nodes are across regions.', () => {\n          this.animationState = Constants.ANIMATION_STATE_FINISHED;\n          this.stopTimers();\n          this.setState({ animationFinished: true });\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n        })\n        break;\n      }\n\t\t\tcase Constants.ANIMATION_STATE_FINISHED: {\n\t\t\t\tconsole.log('Animation finished. Nothing to do');\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 100,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n        console.error('Unrecognized state: ' + this.animationState);\n        reject('Unrecognized state');\n\t\t}\n  }\n  \n  onPrevious() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onPreviousInternal(resolve,reject);\n\t\t});\n\t}\n\n\tonPreviousInternal(resolve,reject) {\n    // Text Containers underneath each Node\n    const nodeATextContainer = document.getElementById('node-a-term-text-rect');\n    const nodeBTextContainer = document.getElementById('node-b-term-text-rect');\n    const nodeCTextContainer = document.getElementById('node-c-term-text-rect');\n    // Text Term (Line 1)\n    const nodeATermText = document.getElementById('node-a-term-text');\n    const nodeBTermText = document.getElementById('node-b-term-text');\n    const nodeCTermText = document.getElementById('node-c-term-text');\n    // Highlight for Text Term (Line 1) -> Only 2 needed\n    const nodeATermHighlight = document.getElementById('node-a-term-highlight');\n    const nodeBTermHighlight = document.getElementById('node-b-term-highlight');\n    // Text Extra (Line 2)\n    const nodeAExtraText = document.getElementById('node-a-extra-text');\n    const nodeBExtraText = document.getElementById('node-b-extra-text');\n    const nodeCExtraText = document.getElementById('node-c-extra-text');\n    // Highlight for Text Extra (Line 2)\n    const nodeAExtraHighlight = document.getElementById('node-a-text-highlight');\n    const nodeBExtraHighlight = document.getElementById('node-b-text-highlight');\n    // Text Extra (Line 3)\n    const nodeAExtraText2 = document.getElementById('node-a-extra-text2');\n    const nodeBExtraText2 = document.getElementById('node-b-extra-text2');\n\n    // MESSAGE OBJECTS\n    const nodeAMessageBubble = document.getElementById('node-a-message-bubble');\n    const nodeAMessageStatus = document.getElementById('node-a-message-status');\n    const nodeCMessageBubble = document.getElementById('node-c-message-bubble');\n    const nodeCMessageStatus = document.getElementById('node-c-message-status');\n\n    // Client\n    const clientMessageBubble = document.getElementById('client-message-bubble');\n    const clientQueryMessage = document.getElementById('client-query-message');\n    const clientMessageStatus = document.getElementById('client-message-status');\n    const clientMessageBackground = document.getElementById('client-message-status-bg');\n\n\t\tswitch(this.animationState) {\n\t\t\tcase ANIMATION_STATE_LEADER_READS_PROTOCOL: {\n        HelperFunctions.hideElement(nodeATermText);\n        HelperFunctions.hideElement(nodeBTermText);\n        HelperFunctions.hideElement(nodeCTermText);\n        HelperFunctions.hideElement(nodeAExtraText);\n        HelperFunctions.hideElement(nodeBExtraText);\n        HelperFunctions.hideElement(nodeCExtraText);\n        var nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.remove('leader-node');\n        this.changeMainText('')\n        this.animationState = Constants.ANIMATION_STATE_INITIAL;\n        resolve({\n          animationState: this.animationState,\n          delay: 1000,\n        });\n        break;\n      }\n      case ANIMATION_STATE_START_LEADER_LEASE: {\n        // Undo phase\n\t\t\t\tHelperFunctions.hideElement(nodeATermText);\n        HelperFunctions.hideElement(nodeBTermText);\n        HelperFunctions.hideElement(nodeCTermText);\n        HelperFunctions.hideElement(nodeAExtraText);\n        HelperFunctions.hideElement(nodeBExtraText);\n        HelperFunctions.hideElement(nodeCExtraText);\n        let nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.remove('leader-node');\n\n        // Redo phase\n\t\t\t\t// hide all outer circles (TODO: revisit this approach)\n\t\t\t\tvar nodeOuterCircles = document.getElementsByClassName('node-outer-circle');\n\t\t\t\tfor (var i = 0; i < nodeOuterCircles.length; i++){\n\t\t\t\t\tHelperFunctions.hideElement(nodeOuterCircles[i]);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//////////////////////////////////////////////////////\n\t\t\t\tthis.changeMainText('Let\\'s say we have a 3-node raft group.<br />C is the raft leader, all nodes have data <br />k = V1', () => {\n          // make Node C  the leader\n          nodeC.classList.add('leader-node');\n          HelperFunctions.showElement(nodeATextContainer);\n          HelperFunctions.showElement(nodeBTextContainer);\n          HelperFunctions.showElement(nodeCTextContainer);\n          HelperFunctions.showElement(nodeATermText);\n          HelperFunctions.showElement(nodeBTermText);\n          HelperFunctions.showElement(nodeCTermText);\n          HelperFunctions.showElement(nodeAExtraText);\n          HelperFunctions.showElement(nodeBExtraText);\n          HelperFunctions.showElement(nodeCExtraText);\n\n          nodeATermText.innerHTML = 'Term: 1';\n          nodeBTermText.innerHTML = 'Term: 1';\n          nodeCTermText.innerHTML = 'Term: 1';\n\n          nodeAExtraText.innerHTML = '(k, V1)';\n          nodeBExtraText.innerHTML = '(k, V1)';\n          nodeCExtraText.innerHTML = '(k, V1)';\n          this.animationState = ANIMATION_STATE_LEADER_READS_PROTOCOL;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n          });\n\t\t\t\t});\n\t\t\t\tbreak;\n      }\n      case ANIMATION_STATE_LEADER_REPLICATES_LEASE: {\n        // Undo phase\n        HelperFunctions.hideElement(nodeCMessageBubble);\n        document.getElementById('node-c-message-status-text1').innerHTML = '';\n        document.getElementById('node-c-message-status-text2').innerHTML = '';\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-c'));\n\n        // Redo phase\n        this.changeMainText('This sequence shows how to safely perform reads from the leader using leader leases.', () => {\n          this.animationState = ANIMATION_STATE_START_LEADER_LEASE;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_LEADER_LEASE_DURATION: {\n        // Undo phase\n        HelperFunctions.hideElement(document.getElementById('llease-rect-node-a'));\n        HelperFunctions.hideElement(document.getElementById('llease-rect-node-b'));;\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-c'));\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n\n        // Redo phase\n        this.changeMainText('');\n        HelperFunctions.showElement(nodeCMessageBubble);\n        HelperFunctions.showElement(nodeCMessageStatus);\n        const statusText1 = document.getElementById('node-c-message-status-text1');\n        statusText1.innerHTML = '';\n        const statusText2 = document.getElementById('node-c-message-status-text2');\n        statusText2.innerHTML = '';\n\n        const contentLine1 = {\n          index: 0,\n          str: 'Raft leader starts a'\n        }\n        const contentLine2 = {\n          index: 0,\n          str: 'new lease timer for itself.'\n        }\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 600,\n          update: function() {\n            statusText1.textContent = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            anime({\n              targets: contentLine2,\n              index: contentLine2.str.length,\n              easing: 'linear',\n              duration: 600,\n              update: function() {\n                statusText2.textContent = contentLine2.str.substr(0, contentLine2.index);\n              },\n              complete: () => {\n                this.timersAreActive = true;\n                HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\n                  duration: ORIGINAL_LEADER_INITIAL_DURATION,\n                  targetPercent: 90,\n                });\n                this.animationState = ANIMATION_STATE_LEADER_REPLICATES_LEASE;\n                resolve({\n                  animationState: this.animationState,\n                  delay: 100,\n                  asyncAnimation: true,\n                });\n              }\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED: {\n        this.changeMainText('');\n        // this.changeMainText('Leader replicates a lease interval to followers', () => {\n        HelperFunctions.hideElement(nodeCMessageBubble);\n        HelperFunctions.hideElement(nodeCMessageStatus);\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n        HelperFunctions.hideElement(document.getElementById('llease-rect-node-a'));\n        HelperFunctions.hideElement(document.getElementById('llease-rect-node-b'));\n\n        const textAlt = document.getElementById('node-c-message-text-alt');\n        var leaseToA = document.getElementById('node-c-lease-to-node-a');\n        const content = {\n          index: 0,\n          str: 'Raft leader then replicates a\\nlease interval to followers. Note\\nthe lease timer on C has started\\nbefore replicating to A and B.'\n        };\n\n        var nodeCTextAnimation = anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2500,\n          update: function() {\n            textAlt.innerText = content.str.substr(0, content.index);\n          }\n        });\n        var nodeALeaseAnimation = anime({\n          targets: leaseToA,\n          translateX: -280,\n          translateY: 0,\n          easing: 'linear',\n          duration: 1500,\n          begin: () => {\n            HelperFunctions.showElement(leaseToA);\n          },\n          complete: () =>{\n            HelperFunctions.hideElement(leaseToA);\n            leaseToA.style.transform = 'none';\n          },\n        });\n\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, {\n          duration: 5000,\n          targetPercent: 60,\n          startPercent: 90,\n        });\n        this.nodeCTimerAnimation.restart();\n        var leaseToB = document.getElementById('node-c-lease-to-node-b');\n        var nodeBLeaseAnimation = anime({\n          targets: leaseToB,\n          translateX: -150,\n          translateY: -280,\n          easing: 'linear',\n          duration: 1500,\n          begin: () => {\n            HelperFunctions.showElement(leaseToB);\n          },\n          complete: () =>{\n            HelperFunctions.hideElement(leaseToB);\n            leaseToB.style.transform = 'none';\n          },\n        });\n        Promise.all([nodeCTextAnimation.finished, nodeALeaseAnimation.finished,nodeBLeaseAnimation.finished, this.nodeCTimerAnimation]).then(() => {\n          this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n            duration: 3000,\n            targetPercent: 85\n          });\n          this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n            duration: 3000,\n            targetPercent: 90\n          });\n          console.log(this.nodeBTimerAnimation);\n          this.nodeATimerAnimation.restart();\n          this.nodeBTimerAnimation.restart();\n          \n          this.animationState = ANIMATION_STATE_LEADER_LEASE_DURATION;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n            asyncAnimation: true\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED: {\n        this.changeMainText('');\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\n        this.changeMainText('Any new leader must wait out existing Leader Lease duration before acquiring lease.', () => {\n          this.animationState = ANIMATION_STATE_ORIGINAL_LEADER_PARITIONED;\n          resolve({\n            animationState: this.animationState,\n            delay: 1000,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_CLIENT_UPDATE_FAILS: {\n        HelperFunctions.hideElement(nodeATermHighlight);\n        HelperFunctions.hideElement(nodeBTermHighlight);\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        HelperFunctions.hideElement(document.getElementById('node-c-partition-wrap'));\n        HelperFunctions.hideElement(document.getElementById('node-a-message-status-bg'));\n        document.getElementById('node-a-message-status').innerHTML = '';\n        var nodeA = document.getElementById('node-a-circle');\n        nodeA.classList.remove('leader-candidate-node');\n        this.changeMainText('Now suppose the original leader gets network partitioned', () => {\n          // partition original leader\n\t\t\t\t\tHelperFunctions.partitionNodeC();\n          this.animationState = ANIMATION_STATE_NEW_LEADER_CANDIDATE_ELECTED;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_OLD_LEADER_STILL_READABLE: {\n        let nodeA = document.getElementById('node-a-circle');\n        nodeA.classList.remove('leader-candidate-node');\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(clientQueryMessage);\n        document.getElementById('client-query-message-text1').innerHTML = '';\n        document.getElementById('client-query-message-text2').innerHTML = '';\n        document.getElementById('client-query-message-text3').innerHTML = '';\n        HelperFunctions.hideElement(document.getElementById('client-node'));\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\n        document.getElementById('client-message-text').innerHTML = '';\n\n        this.changeMainText('');\n        HelperFunctions.showElement(nodeAMessageBubble);\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\n        const nodeAContent = {\n          index: 0,\n          str: 'A wins new leader election\\n but cannot perform any\\noperations until Leader\\nLease on A runs out.'\n        };\n\n        anime({\n          targets: nodeAContent,\n          index: nodeAContent.str.length,\n          easing: 'linear',\n          duration: 1500,\n          update: function() {\n            nodeAMessageStatus.innerText = nodeAContent.str.substr(0, nodeAContent.index);\n          },\n          complete: () => {\n            // elect Node A as new leader candidate\n            var nodeA = document.getElementById('node-a-circle');\n            nodeA.classList.add('leader-candidate-node');\n            HelperFunctions.setSVGText({targetId: 'node-a-term-text', text: \"Term: 2\"});\n            HelperFunctions.setSVGText({targetId: 'node-b-term-text', text: \"Term: 2\"});\n            HelperFunctions.showElement(nodeATermHighlight);\n            HelperFunctions.showElement(nodeBTermHighlight);\n            this.animationState = ANIMATION_STATE_CLIENT_UPDATE_FAILS;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n\t\t\t\t});\n        break;\n      }\n      case ANIMATION_STATE_OLD_LEASE_EXPIRES: {\n        clientMessageStatus.innerHTML = '';\n        HelperFunctions.hideElement(clientMessageBubble);\n        HelperFunctions.hideElement(document.getElementById('client-node'));\n        document.getElementById('client-message-text').innerHTML = '';\n        document.getElementById('client-query-message-text1').innerHTML = '';\n        document.getElementById('client-query-message-text2').innerHTML = '';\n        document.getElementById('client-query-message-text3').innerHTML = '';\n\t\t\t\tthis.changeMainText('If client tries to write to A, operation is rejected..', () => {\n          HelperFunctions.introduceClient();\n          HelperFunctions.showElement(clientMessageBubble);\n          HelperFunctions.showElement(clientMessageBackground);\n          HelperFunctions.showElement(clientQueryMessage);\n          const clientContent1 = {\n            index: 0,\n            str: 'UPDATE T SET'\n          }\n          const clientContent2 = {\n            index: 0,\n            str: 'value = V2 WHERE'\n          }\n          const clientContent3 = {\n            index: 0,\n            str: ' key = k'\n          }\n          \n          const statusText1 = document.getElementById('client-query-message-text1');\n          const statusText2 = document.getElementById('client-query-message-text2');\n          const statusText3 = document.getElementById('client-query-message-text3');\n          anime({\n            targets: clientContent1,\n            index: clientContent1.str.length,\n            easing: 'linear',\n            duration: 400,\n            update: function() {\n              statusText1.textContent = clientContent1.str.substr(0, clientContent1.index);\n            },\n            complete: () => {\n              anime({\n                targets: clientContent2,\n                index: clientContent2.str.length,\n                easing: 'linear',\n                duration: 400,\n                update: function () {\n                  statusText2.textContent = clientContent2.str.substr(0, clientContent2.index);\n                },\n                complete: () => {\n                  anime({\n                    targets: clientContent3,\n                    index: clientContent3.str.length,\n                    easing: 'linear',\n                    duration: 400,\n                    update: function () {\n                      statusText3.textContent = clientContent3.str.substr(0, clientContent3.index);\n                    },\n                    complete: () => {\n                      var messageContrainerElement = document.getElementById('client-message');\n                      var messageElement = document.getElementById('client-message-circle');\n                      HelperFunctions.messageFromClient(Constants.NODE_A,\t{\n                        onBegin: () => {\n                          HelperFunctions.showElement(messageContrainerElement);\n                          messageElement.classList.add('log-message');\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\n                        },\n                        onChangeComplete: () => {\n                          messageElement.classList.remove('log-message');\n                          messageElement.classList.add('error-message');\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: 'Rejected'});\n                          // messageTextElement\n                        },\n                        onComplete: () => {\n                          messageElement.classList.remove('error-message');\n                          HelperFunctions.hideElement(messageContrainerElement);\n                          messageContrainerElement.style.transform = 'none';\n                          HelperFunctions.setSVGText({targetId: 'client-message-text', text: ''});\n                          HelperFunctions.showElement(document.getElementById('client-node-value-alt'));\n                        },\n                        alternate: true,\n                      });\n                      this.animationState = ANIMATION_STATE_OLD_LEADER_STILL_READABLE;\n                      resolve({\n                        animationState: this.animationState,\n                        delay: 100,\n                      });\n                    }\n                  });\n                }\n              });\n            }\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_NEW_LEADER_ELECTED: {\n        this.changeMainText('');\n        HelperFunctions.hideElement(document.getElementById('client-query-message'));\n        HelperFunctions.hideElement(document.getElementById('client-node-value-alt'));\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n        let nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.add('leader-node');\n\n        const contentLine1 = {\n          index: 0,\n          str: 'Client can still read from C and get a valid response. Writes, however, are unavailable at this moment.'\n        };\n\n        HelperFunctions.showElement(clientMessageBubble);\n\n        anime({\n          targets: contentLine1,\n          index: contentLine1.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            clientMessageStatus.textContent = contentLine1.str.substr(0, contentLine1.index);\n          },\n          complete: () => {\n            this.animationState = ANIMATION_STATE_OLD_LEASE_EXPIRES;\n            resolve({\n              animationState: this.animationState,\n              delay: 100,\n            });\n          }\n        });\n        break;\n      }\n      case ANIMATION_STATE_NEW_LEADER_SENT_LEASES: {\n        HelperFunctions.hideElement(document.getElementById('node-a-timer-highlight'));\n        HelperFunctions.hideElement(document.getElementById('node-a-message-bubble'));\n        let nodeC = document.getElementById('node-c-circle');\n        nodeC.classList.add('leader-node');\n        let nodeA = document.getElementById('node-a-circle');\n        nodeA.classList.add('leader-candidate-node');\n        HelperFunctions.hideElement(nodeAMessageBubble);\n        document.getElementById('node-a-message-status').innerHTML = '';\n        HelperFunctions.hideElement(clientMessageBubble);\n        document.getElementById('client-message-status').innerHTML = '';\n        HelperFunctions.showElement(document.getElementById('node-c-message-bubble-alt'));\n        const nodeCTextAlt = document.getElementById('node-c-message-text-alt');\n        const content = {\n          index: 0,\n          str: 'Leader Lease of C will run out\\nfirst [since it started first]. \\nC now steps down as leader.'\n        };\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-a'));\n        this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n          duration: 6000,\n          targetPercent: 35\n        });\n        this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n          duration: 6000,\n          targetPercent: 40\n        });\n        this.nodeCTimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_C, { duration: 6000 });\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            nodeCTextAlt.textContent = content.str.substr(0, content.index);\n          },\n        });\n        this.nodeCTimerAnimation.finished.then(() => {\n          var nodeC = document.getElementById('node-c-circle');\n          nodeC.classList.remove('leader-node');\n          this.animationState = ANIMATION_STATE_NEW_LEADER_ELECTED;\n          resolve({\n            animationState: this.animationState,\n            delay: 100,\n            asyncAnimation: true\n          });\n        });\n        break;\n      }\n      case ANIMATION_STATE_LEADER_LEASE_CONCLUSION: {\n        HelperFunctions.hideElement(nodeAExtraHighlight);\n        HelperFunctions.hideElement(nodeBExtraHighlight);\n        HelperFunctions.hideElement(clientMessageBubble);\n        let nodeA = document.getElementById('node-a-circle');\n        nodeA.classList.add('leader-candidate-node');\n        nodeA.classList.remove('leader-node');\n        document.getElementById('client-message-status').innerHTML = '';\n        HelperFunctions.hideElement(document.getElementById('node-c-message-bubble-alt'));\n        document.getElementById('node-c-message-text-alt').innerHTML = '';\n\n        HelperFunctions.showElement(document.getElementById('node-a-message-bubble'));\n        HelperFunctions.showElement(document.getElementById('node-a-message-status-bg'));\n        HelperFunctions.hideElement(document.getElementById('mlease-rect-node-a'));\n        const nodeAMessage = document.getElementById('node-a-message-status');\n        const content = {\n          index: 0,\n          str: 'Once Leader Lease on A expires, it becomes raft leader.'\n        };\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 800,\n          update: function() {\n            nodeAMessage.textContent = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            this.nodeATimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_A, {\n              duration: 2500,\n              startPercent: 35,\n            });\n            this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n              duration: 2500,\n              targetPercent: 10,\n              startPercent: 40,\n            });\n            this.nodeATimerAnimation.finished.then(() => {\n              nodeA.classList.remove('leader-candidate-node');\n              nodeA.classList.add('leader-node');\n              HelperFunctions.showElement(document.getElementById('node-a-timer-highlight'));\n\n              // hide Node A's leader lease timer\n              HelperFunctions.hideElement(document.getElementById(HelperFunctions.leaderLeaseTimerId(Constants.NODE_A)));\n\n              // and start its my lease timer\n              this.nodeATimerAnimation = HelperFunctions.startMyLeaseTimer(Constants.NODE_A, {\n                duration: 3000,\n                targetPercent: 60\n              });\n\n              // then send leader lease message to B\n              var leaseToB = document.getElementById('node-a-lease-to-node-b');\n              anime({\n                targets: leaseToB,\n                translateX: 150,\n                translateY: -280,\n                easing: 'linear',\n                duration: 1500,\n                begin: () => {\n                  HelperFunctions.showElement(leaseToB);\n                },\n                complete: () => {\n                  HelperFunctions.hideElement(leaseToB);\n                  leaseToB.style.transform = 'none';\n\n                  this.nodeBTimerAnimation = HelperFunctions.startLeaderLeaseTimer(Constants.NODE_B, {\n                    duration: 2500,\n                    targetPercent: 80\n                  });\n                  this.animationState = ANIMATION_STATE_NEW_LEADER_SENT_LEASES;\n                  resolve({\n                    animationState: this.animationState,\n                    delay: 100,\n                    asyncAnimation: true\n                  });\n                },\n              });\n            })\n          }\n        });\n\n        break;\n      }\n      case Constants.ANIMATION_STATE_FINISHED: {\n        this.setState({animationFinished: false});\n        this.changeMainText('');\n        document.getElementById('node-a-message-status').innerHTML = '';\n        HelperFunctions.showElement(document.getElementById('client-message-status-bg'));\n        HelperFunctions.showElement(clientMessageBubble);\n        const messageStatus = document.getElementById('client-message-status');\n\n        const content = {\n          index: 0,\n          str: 'From here on, client can issue reads/writes to the new leader.'\n        }\n\n        anime({\n          targets: content,\n          index: content.str.length,\n          easing: 'linear',\n          duration: 2000,\n          update: function() {\n            messageStatus.textContent = content.str.substr(0, content.index);\n          },\n          complete: () => {\n            // initiate a raft round\n            \n            // client message to A\n            var animation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_A, false, false, '(k, V2)');\n\n            animation.finished.then(() => {\n              // message with ack from A to B\n              nodeAExtraText.innerHTML = '(k, V2)';\n              var messageToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, true, false, '(k, V2)', false, 0, this.nodeBTimerAnimation, this.nodeATimerAnimation);\n\n              messageToBAnimation.finished.then(() => {\n                nodeBExtraText.innerHTML = '(k, V2)';\n                HelperFunctions.hideElement(nodeAExtraText2);\n                HelperFunctions.showElement(nodeAExtraHighlight);\n                // confirmation message back to B and the client\n                var confirmToClientAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.CLIENT_NODE, false, false, '', true);\n                var confirmToBAnimation = HelperFunctions.sendLogMessage(Constants.NODE_A, Constants.NODE_B, false, false, '', true, 300, this.nodeBTimerAnimation);\n\n                Promise.all([confirmToClientAnimation.finished, confirmToBAnimation.finished]).then(() => {\n                  HelperFunctions.hideElement(nodeBExtraText2);\n                  nodeBExtraText.innerHTML = '(k, V2)';\n                  HelperFunctions.showElement(nodeBExtraHighlight);\n                  this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\n                  resolve({\n                    animationState: this.animationState,\n                    delay: 100,\n                  });\n                });\n              });\n            });\n          }\n        });\n        this.animationState = ANIMATION_STATE_LEADER_LEASE_CONCLUSION;\n        resolve({\n          animationState: this.animationState,\n          delay: 100,\n        });\n        break;\n      }\n      default:\n        console.error('Unrecognized state: ' + this.animationState);\n        break;\n    }\n  }\n\n\tchangeMainText(text, onComplete, delay) {\n\t\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete, delay);\n\t}\n\trestartTimers() {\n\t\tif (this.nodeATimerAnimation) {\n\t\t\tthis.nodeATimerAnimation.restart();\n\t\t}\n\t\tif (this.nodeBTimerAnimation) {\n\t\t\tthis.nodeBTimerAnimation.restart();\n\t\t}\n\t\tif (this.nodeCTimerAnimation) {\n\t\t\tthis.nodeCTimerAnimation.restart();\n\t\t}\n\t}\n\tstopTimers() {\n\t\tthis.timersAreActive = false;\n\t\tthis.pauseTimers();\n\t}\n\tpauseTimers() {\n\t\tif (this.nodeATimerAnimation) {\n\t\t\tthis.nodeATimerAnimation.pause();\n\t\t}\n\t\tif (this.nodeBTimerAnimation) {\n\t\t\tthis.nodeBTimerAnimation.pause();\n\t\t}\n\t\tif (this.nodeCTimerAnimation) {\n\t\t\tthis.nodeCTimerAnimation.pause();\n\t\t}\n\t}\n\tresumeTimers() {\n\t\tif (this.nodeATimerAnimation) {\n\t\t\tthis.nodeATimerAnimation.play();\n\t\t}\n\t\tif (this.nodeBTimerAnimation) {\n\t\t\tthis.nodeBTimerAnimation.play();\n\t\t}\n\t\tif (this.nodeCTimerAnimation) {\n\t\t\tthis.nodeCTimerAnimation.play();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div id=\"main-diagram\" >\n\t\t\t\t\t<MainDiagram/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"main-text-sect\">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default LeaderLeaseAnimation;\n","import React, { Component } from 'react';\nimport './App.css';\nimport {Constants} from './constants';\n\nvar HelperFunctions = require('./HelperFunctions');\n\nconst RUN_MODE_CONTINUOUS = \"CONTINOUS\";\n\nclass AnimationRunner extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.onPlayClicked = this.onPlayClicked.bind(this);\n\t\tthis.onPreviousClicked = this.onPreviousClicked.bind(this);\n\t\tthis.onRestartClicked = this.onRestartClicked.bind(this);\n\n\t\tthis.state = {\n\t\t\tanimationPlaying: false,\n\t\t}\n\t}\n\tcomponentDidMount() {\n\t\tthis.mainTextSect = document.getElementById('main-text-sect');\n\t\t// HelperFunctions.delayedNext(this,100);\n\t\tsetTimeout(() => this.next(), 100);\n\t}\n\tchangeMainText(text, onComplete) {\n\t\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\n\t}\n\n\tnext(){\n\t\tthis.setState({ animationPlaying: true });\n\n\t\tvar promise = this.currentAnimation.onNext();\n\t\tpromise.then(result => {\n\t\t\tconsole.log('Result: ' + JSON.stringify(result));\n\t\t\tthis.setState({ animationPlaying: false });\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.runMode === RUN_MODE_CONTINUOUS ) {\n\t\t\t\t\tthis.currentAnimation.resume();\n\t\t\t\t\tthis.next();\n\t\t\t\t} else if (!result.asyncAnimation) {\n\t\t\t\t\tthis.currentAnimation.pause();\n\t\t\t\t}\n\t\t\t},\n\t\t\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\n\t\t});\n\t}\n\n\tprevious() {\n\t\tthis.setState({ animationPlaying: true });\n\n\t\tvar promise = this.currentAnimation.onPrevious();\n\t\tpromise.then( result => {\n\t\t\tconsole.log('Undo: ' + JSON.stringify(result));\n\t\t\tthis.setState({ animationPlaying: false });\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.runMode === RUN_MODE_CONTINUOUS ) {\n\t\t\t\t\tthis.currentAnimation.resume();\n\t\t\t\t\tthis.next();\n\t\t\t\t} else {\n\t\t\t\t\tthis.currentAnimation.pause();\n\t\t\t\t}\n\t\t\t},\n\t\t\t(result.delay?result.delay:Constants.DEFAULT_DELAY));\n\t\t});\n\t}\n\n\tonPlayClicked() {\n\t\tthis.next();\n\t}\n\tonRestartClicked() {\n\t\tthis.restart();\n\t}\n\tonPreviousClicked() {\n\t\tthis.previous();\n\t}\n\n\trestart() {\n\t\twindow.location.reload();\n\t}\n\n\trender() {\n\t\t// In React, names starting with a capital letter will compile to the createComponent method\n\t\t// (credit: https://medium.com/@Carmichaelize/dynamic-tag-names-in-react-and-jsx-17e366a684e9)\n\t\t// This is done so that we can use animationToRun as a tag in the JSX below\n\t\tconst Animation = this.props.animationToRun;\n\t\tconst disableNext = this.state.animationPlaying || \n\t\t\t(this.currentAnimation && this.currentAnimation.state.animationFinished);\n\t\tconst disablePrevious = this.state.animationPlaying ||\n\t\t\t(this.currentAnimation && !this.currentAnimation.state.previousEnabled) ||\n\t\t\t(this.currentAnimation && this.currentAnimation.animationState === Constants.ANIMATION_STATE_INITIAL);\n\t\tconst isAnimationFinished = this.currentAnimation && this.currentAnimation.state.animationFinished;\n\t\treturn(\n\t\t\t<div className=\"animation-runner\">\n\t\t\t\t<div id=\"main-text-sect\"></div>\n\t\t\t\t<Animation ref={n => this.currentAnimation = n}></Animation>\n\t\t\t\t<div className=\"control-btns\">\n\t\t\t\t\t<button id=\"animation-ctrl-previous\" className=\"yb-btn\" disabled={disablePrevious} onClick={this.onPreviousClicked}>\n\t\t\t\t\t\t<i className=\"fas fa-undo\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\t<span className=\"yb-button-text\">Previous</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button id=\"animation-ctrl-next\" className=\"yb-btn\" disabled={disableNext} onClick={this.onPlayClicked}>\n\t\t\t\t\t\t<i className=\"fas fa-play\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\t<span className=\"yb-button-text\">\n\t\t\t\t\t\t\t{isAnimationFinished ? 'End' : 'Next' }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button id=\"animation-ctrl-restart\" className=\"yb-btn\" onClick={this.onRestartClicked}>\n\t\t\t\t\t\t<i className=\"fas fa-fast-backward\" aria-hidden=\"true\"></i>\n\t\t\t\t\t\t<span className=\"yb-button-text\">Restart</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default AnimationRunner;\n","import React, { Component } from 'react';\nimport './App.css';\nimport MainDiagram from './svg/MainDiagram';\nimport {Constants} from './constants';\n\nvar HelperFunctions = require('./HelperFunctions');\n\nconst SET_VALUE1 = \"5\";\nvar AnimationState = {\n\tINITIAL: \"INITIAL\",\n\tLEADER_ELECTION_NODE_TIMED_OUT: \"LEADER_ELECTION_NODE_TIMED_OUT\",\n\tLEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: \"LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF\",\n\tLEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: \"LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES\",\n\tLOG_REPLICATION_START: \"LOG_REPLICATION_START\",\n\tLOG_REPLICATION_INTRODUCE_CLIENT: \"LOG_REPLICATION_INTRODUCE_CLIENT\",\n\tLOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: \"LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER\",\n\tLOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: \"LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS\",\n\tLOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: \"LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY\",\n\tLOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: \"LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER\",\n};\n\n\nclass RaftWriteAnimation extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.animationState = AnimationState.INITIAL;\n\t\tthis.state = {\n\t\t\tanimationFinished: false,\n\t\t}\n\t}\n\n\tpause() {\n\t}\n\tresume() {\n\t}\n\n\tonNext() {\n\t\treturn new Promise((resolve,reject) => {\n\t\t\tthis.onNextInternal(resolve,reject);\n\t\t});\n\t}\n\n\tonNextInternal(resolve,reject) {\n\t\tswitch(this.animationState) {\n\t\t\tcase AnimationState.INITIAL: {\n\t\t\t\tthis.changeMainText('Leader election starts ...');\n\n\t\t\t\t// initiate a timeout\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.changeMainText('If there is no leader, a election timeout is triggered');\n\n\t\t\t\t\t////////////////// animate Node A and B ////////////////////////\n\t\t\t\t\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\n\t\t\t\t\tnodeAOuterCircle.classList.add('animation-delay-3s');\n\t\t\t\t\tnodeAOuterCircle.classList.add('animate-circle-stroke');\n\n\t\t\t\t\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\n\t\t\t\t\tnodeBOuterCircle.classList.add('animation-delay-2s');\n\t\t\t\t\tnodeBOuterCircle.classList.add('animate-circle-stroke');\n\n\t\t\t\t\t////////////////// animate Node C ////////////////////////\n\t\t\t\t\t// get the specific node (i.e Node C) which would time out faster and eventually\n\t\t\t\t\t// become the leader\n\t\t\t\t\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\n\t\t\t\t\tnodeCOuterCircle.classList.add('animate-circle-stroke');\n\n\t\t\t\t\t// need to wait for the animation on the faster node to end and then\n\t\t\t\t\t// execute the next step\n\t\t\t\t\tvar onNodeCAnimationEnd = () => {\n\t\t\t\t\t\tnodeAOuterCircle.classList.add('pause-animation');\n\t\t\t\t\t\tnodeBOuterCircle.classList.add('pause-animation');\n\t\t\t\t\t\tnodeCOuterCircle.style.display = 'none';\n\t\t\t\t\t\tthis.animationState = AnimationState.LEADER_ELECTION_NODE_TIMED_OUT;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\t\tdelay: 100,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tnodeCOuterCircle.addEventListener(\"webkitAnimationEnd\", onNodeCAnimationEnd,false);\n\t\t\t\t\tnodeCOuterCircle.addEventListener(\"animationend\", onNodeCAnimationEnd,false);\n\n\t\t\t\t}, Constants.DEFAULT_DELAY);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LEADER_ELECTION_NODE_TIMED_OUT: {\n\t\t\t\tvar fasterTimeoutCircle = document.getElementById('node-c-outer-circle');\n\t\t\t\tfasterTimeoutCircle.classList.add('leader-candidate-node');\n\n\t\t\t\tconst nodeCVoteText = document.getElementById('node-c-extra-text');\n\t\t\t\tnodeCVoteText.classList.remove('visibility-hidden');\n\n\t\t\t\tthis.changeMainText('After election timeout the follower becomes a candidate. '\n\t\t\t\t+ 'It starts a new election term and votes for itself', () => {\n\t\t\t\t\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF;\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\tdelay: 2000,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LEADER_ELECTION_LEADER_HAS_VOTED_FOR_ITSELF: {\n\t\t\t\t// send \"request vote\" to node B\n\t\t\t\tvar messageToB = document.getElementById('node-c-message-to-b');\n\t\t\t\tvar animation1 = HelperFunctions.messageFromC(Constants.NODE_B, {\n\t\t\t\t\tonBegin: (anim) => {\n\t\t\t\t\t\tmessageToB.classList.add('vote-request-circle')\n\t\t\t\t\t},\n\t\t\t\t\tonChangeComplete: (anim) => {\n\t\t\t\t\t\tmessageToB.classList.remove('vote-request-circle');\n\t\t\t\t\t\tmessageToB.classList.add('vote-ack-circle');\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: (anim) => {\n\t\t\t\t\t\tmessageToB.classList.remove('vote-ack-circle');\n\t\t\t\t\t},\n\t\t\t\t\talternate: true,\n\t\t\t\t});\n\n\t\t\t\t// send \"request vote\" to node A\n\t\t\t\tvar messageToA = document.getElementById('node-c-message-to-a');\n\t\t\t\tvar animation2 = HelperFunctions.messageFromC(Constants.NODE_A, {\n\t\t\t\t\tonBegin: (anim) => {\n\t\t\t\t\t\tmessageToA.classList.add('vote-request-circle')\n\t\t\t\t\t},\n\t\t\t\t\tonChangeComplete: (anim) => {\n\t\t\t\t\t\tmessageToA.classList.remove('vote-request-circle');\n\t\t\t\t\t\tmessageToA.classList.add('vote-ack-circle');\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: (anim) => {\n\t\t\t\t\t\tmessageToA.classList.remove('vote-ack-circle');\n\t\t\t\t\t},\n\t\t\t\t\talternate: true,\n\t\t\t\t})\n\n\t\t\t\t// wait for both animations to finish before proceeding\n\t\t\t\tPromise.all([animation1.finished, animation2.finished]).then(() => {\n\t\t\t\t\tthis.animationState = AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES;\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\tdelay: 1000,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LEADER_ELECTION_LEADER_RECEIVED_VOTES_FROM_OTHER_NODES: {\n\t\t\t\tthis.changeMainText('Once a candidate has majority of votes it becomes the leader');\n\n\t\t\t\t// show that follower nodes have voted for the leader (Node C)\n\t\t\t\tvar nodeAVoteText = document.getElementById('node-a-extra-text');\n\t\t\t\tnodeAVoteText.classList.remove('visibility-hidden');\n\t\t\t\tvar nodeBVoteText = document.getElementById('node-b-extra-text');\n\t\t\t\tnodeBVoteText.classList.remove('visibility-hidden');\n\n\t\t\t\tconst nodeCVoteText = document.getElementById('node-c-extra-text');\n\t\t\t\tnodeCVoteText.textContent = 'Leader Node';\n\n\t\t\t\tvar nodeCOuterCircle = document.getElementById('node-c-outer-circle');\n\t\t\t\tnodeCOuterCircle.classList.remove('leader-candidate-node');\n\t\t\t\tnodeCOuterCircle.classList.add('leader-node');\n\n\t\t\t\t// hide node A and B's outer circles\n\t\t\t\tvar nodeAOuterCircle = document.getElementById('node-a-outer-circle');\n\t\t\t\tHelperFunctions.hideElement(nodeAOuterCircle);\n\n\t\t\t\tvar nodeBOuterCircle = document.getElementById('node-b-outer-circle');\n\t\t\t\tHelperFunctions.hideElement(nodeBOuterCircle);\n\n\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_START;\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 2000,\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_START: {\n\t\t\t\tvar voteTexts = document.getElementsByClassName('node-extra-text');\n\t\t\t\tfor (var i = 0; i < voteTexts.length; i++){\n\t\t\t\t\tHelperFunctions.hideElement(voteTexts[i]);\n\t\t\t\t}\n\t\t\t\tthis.changeMainText('Log replication ...');\n\n\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT;\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 2000,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_INTRODUCE_CLIENT: {\n\t\t\t\tthis.changeMainText('Clients always communicate with the leader.');\n\n\t\t\t\tvar introClientAnimation = HelperFunctions.introduceClient();\n\n\t\t\t\tintroClientAnimation.finished.then(() => {\n\t\t\t\t\tvar messageToCAnimation = HelperFunctions.sendLogMessage(Constants.CLIENT_NODE, Constants.NODE_C, false, false, HelperFunctions.getSetValueText(SET_VALUE1));\n\t\t\t\t\tmessageToCAnimation.finished.then(() => {\n\t\t\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\t\tdelay: 1000,\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_MESSAGE_RECEIVED_BY_LEADER: {\n\t\t\t\tthis.changeMainText(\"The log entry is currently uncommitted, so it won't update the node's value. To commit the entry the node first replicates it to the follower nodes\", () => {\n\t\t\t\t\t// send log messages to follower nodes\n\t\t\t\t\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(true, HelperFunctions.getSetValueText(SET_VALUE1));\n\t\t\t\t\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\n\n\t\t\t\t\t// wait for both animations to finish before proceeding\n\t\t\t\t\tPromise.all(animationPromises).then(() => {\n\t\t\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\t\tdelay: 100,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_LEADER_RECEIVED_ALL_LOG_ACKS: {\n\t\t\t\tthis.changeMainText(\"Once the leader receives acks from majority of follower nodes, it commits the value and sets it state to '5'\", () => {\n\t\t\t\t\t// since leader has received acks from both followers, mark entry as committed\n\t\t\t\t\tHelperFunctions.setSVGText({\n\t\t\t\t\t\ttargetId: 'node-c-extra-text',\n\t\t\t\t\t\taddCSSClass: \"set-text-committed\"});\n\t\t\t\t\tHelperFunctions.setSVGText({\n\t\t\t\t\t\ttargetId: 'node-c-main-text',\n\t\t\t\t\t\ttext: \"5\",\n\t\t\t\t\t\tshowElement: true,});\n\n\t\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY;\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\tdelay: 1000,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_LEADER_HAS_COMMITTED_ENTRY: {\n\t\t\t\tthis.changeMainText(\"The leader then notifies followers and the client that entry is committed\", () => {\n\t\t\t\t\t// notify followers that leader has committed the entries\n\t\t\t\t\tvar animations = HelperFunctions.logMessageFromLeaderToFollowers(false,HelperFunctions.getSetValueText(SET_VALUE1), true);\n\t\t\t\t\tvar animationPromises = HelperFunctions.getFinishPromises(animations);\n\n\t\t\t\t\t// and notify client as well\n\t\t\t\t\tHelperFunctions.sendLogMessage(Constants.NODE_C, Constants.CLIENT_NODE);\n\n\t\t\t\t\t//// follower message animation on finish\n\t\t\t\t\tPromise.all(animationPromises).then(() => {\n\t\t\t\t\t\tthis.animationState = AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER;\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\t\t\tdelay: 100,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase AnimationState.LOG_REPLICATION_FOLLOWERS_RECEIVED_COMMIT_MESSAGE_FROM_LEADER: {\n\t\t\t\t// commit entries for follower nodes\n\t\t\t\tHelperFunctions.setSVGText({\n\t\t\t\t\t\ttargetId: 'node-a-main-text',\n\t\t\t\t\t\ttext: SET_VALUE1,\n\t\t\t\t\t\tshowElement: true,\n\t\t\t\t});\n\n\t\t\t\tHelperFunctions.setSVGText({\n\t\t\t\t\ttargetId: 'node-b-main-text',\n\t\t\t\t\ttext: SET_VALUE1,\n\t\t\t\t\tshowElement: true,\n\t\t\t\t});\n\n\t\t\t\tthis.changeMainText(\"The cluster has now come to consensus about the system state\");\n\t\t\t\tthis.animationState = Constants.ANIMATION_STATE_FINISHED;\n\t\t\t\tthis.setState({ animationFinished: true });\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 100,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase Constants.ANIMATION_STATE_FINISHED: {\n\t\t\t\tresolve({\n\t\t\t\t\tanimationState: this.animationState,\n\t\t\t\t\tdelay: 100,\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tconsole.error('Unrecognized state: ' + this.animationState);\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.mainTextSect = document.getElementById('main-text-sect');\n\t}\n\n  render() {\n    return (\n\t    <div>\n\t\t\t\t<div id=\"main-diagram\">\n\t\t\t\t\t<MainDiagram/>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"main-text-sect\">\n\t\t\t\t</div>\n\t    </div>\n\t  );\n  }\n\n\tchangeMainText(text, onComplete) {\n\t\tHelperFunctions.setTextWithAnimation(this.mainTextSect, text, onComplete);\n\t}\n}\n\nexport default RaftWriteAnimation;\n","import React, { Component } from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Route,\n  Link\n} from 'react-router-dom';\n\nimport ReadFailureAnimation from './ReadFailureAnimation';\nimport RaftReadOperationAnimation from './RaftReadOperationAnimation';\nimport LeaderLeasesAnimation from './LeaderLeasesAnimation';\nimport AnimationRunner from './AnimationRunner';\nimport RaftWriteAnimation from './RaftWriteAnimation';\n\nclass App extends Component {\n\trender() {\n    return (\n\t\t\t<Router>\n\t\t    <div className=\"App\">\n\t\t\t\t<Route exact path='/' component={Home}></Route>\n\t\t\t\t<Route path='/raft-write-operation' render={(props) => <AnimationRunner {...props} animationToRun={RaftWriteAnimation}/> }></Route>\n\t\t\t\t<Route path='/why-raft-read-fails-without-quorum' render={(props) => <AnimationRunner {...props} animationToRun={ReadFailureAnimation}/> }></Route>\n\t\t\t\t<Route path='/raft-read-with-leader-leases' render={(props) => <AnimationRunner {...props} animationToRun={LeaderLeasesAnimation}/> }></Route>\n\t\t\t\t<Route path='/read-operation-in-raft' render={(props) => <AnimationRunner {...props} animationToRun={RaftReadOperationAnimation}/> }></Route>\n\t\t    </div>\n\t\t\t</Router>\n    );\n  }\n}\n\nclass Home extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"home-link-container\">\n\t\t\t\t\t<h3>Read:</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/read-operation-in-raft\">Read operation in raft</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/why-raft-read-fails-without-quorum\">Why raft read failes without quorum</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link to=\"/raft-read-with-leader-leases\">Raft read with leader leases</Link>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\n\t\t\t\t<h3>Write:</h3>\n\t\t\t\t\t<div class=\"write-link-container\">\n\t\t\t\t\t\t<Link to=\"/raft-write-operation\">Raft write operation</Link>\n\t\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}